<script>
    $('#collapseOne').collapse('hide');
//            $('#relationshipCollapse').collapse('hide');
</script>
<div class="row">
    <div class="col-xs-12"> 
        <!--breadcrumb-->
        <div class="col-xs-12 breadcrumb-bg" >
            <div class="col-xs-12 col-lg-8">
                <ol class="breadcrumb">
                    <li>{{ entity + 'You are here' | translate}}</li>
                    <li>{{ entity + 'Manage' | translate}}</li>
                    <li>{{ entity + 'Report Builder' | translate}}</li>
                    <li class="active uppercase" >{{ entity + 'Add Report' | translate}}</li>
                </ol>

            </div>
        </div>
    </div>
</div>



<div class="new-panel row">
    <div class="row">
        <div class="col-md-12">
            <div id="messages" ng-include src="'templates/messages.html'"></div>
        </div>
    </div>
    <form method="POST" class="form-horizontal" name="reportDesignerForm" novalidate>
        <div ng-init="registerLocationChangeEvent(reportDesignerForm);">
            <tabset>
                <tab active="tabs[0].active">
                    <tab-heading>
                        {{entity + "Basic Details"| translate}}
                    </tab-heading>
                    <br/>
                    <div ng-form="reportBasicForm">
                        <div class="form-group">
                            <label class="col-md-2 control-label">{{entity + "Report Group"| translate}}</label>
                            <div class="col-md-3">
                                <div class="row">
                                    <div class="col-md-12"> 
                                        <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                            <select class="form-control" ng-model="report.reportGroup" name="reportGroup" ng-options="masterValue.valueEntityId as masterValue.value for masterValue in detailOfMaster.masterDataBeans"> 
                                                <option value="">{{entity + "Select Group"| translate}}</option>
                                            </select>
                                        </div>
                                        <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="detailOfMaster.masterDataBeans" model-value="report.reportGroup" master-code="{{code}}"></add-master-value>
                                    </div>
                                </div>
                            </div>
                            <label for="reportName" class="col-md-2 control-label">{{entity + "Report Name"| translate}}</label>
                            <div class="col-md-3">
                                <div class="row">
                                    <div class="col-md-12" ng-class="{'has-error': reportBasicForm.reportName.$invalid && (reportBasicForm.reportName.$dirty || submitted)}"> 
                                        <input type="text" placeholder="Report Name" ng-model="report.reportName" class="form-control" id="reportName" name="reportName" required ng-blur="checkReportNameExists(reportBasicForm.reportName, report.reportName)" ng-change="reportBasicForm.reportName.$setValidity('exists', true)" maxlength="50">
                                        <div class="error,help-block" ng-show="(reportBasicForm.reportName.$dirty || submitted) && reportBasicForm.reportName.$invalid">
                                            <span class="help-block" ng-show="reportBasicForm.reportName.$error.required">{{entity + "Enter report name"| translate}}</span>
                                            <span class="help-block" ng-show="reportBasicForm.reportName.$error.exists">{{entity + "Report in this name exists"| translate}}</span>
                                            <span class="help-block" ng-show="reportBasicForm.reportName.$error.maxlength">{{ entity + "Maximum 50 characters" | translate }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="description" class="col-md-2 control-label" style="text-align:right">{{entity + "Description"| translate}}</label>
                            <div class="col-md-3">
                                <textarea ng-model="report.description" id="description" class="form-control" maxlength="500" placeholder="Description"></textarea>                
                                <div id="messagecounter" style="text-align: right;">{{500 - report.description.length}} {{ entity + "characters left" | translate }}</div>
                            </div>
                            <label for="isAnalytics"  class="col-md-2 control-label control-label">
                                {{ entity + 'Is External Report' | translate}}
                            </label>
                            <div class="col-md-3" > 
                                <label class="checkbox-inline">
                                    <input type="checkbox" id="isAnalytics" name="isAnalytics" ng-model="report.externalReport">
                                </label>
                            </div>
                        </div>

                        <div ng-show="report.externalReport === false" ng-form="internalForm">

                            <!--Div not displayed if its external report-->
                            <div class="form-group row required">
                                <label for="feature" class="col-md-2 control-label">{{entity + 'Feature '|translate}}</label>
                                <div class="col-md-3" ng-class="{'has-error': internalForm.selectFeatures.$invalid && (internalForm.selectFeatures.$dirty || submitted)}">
                                    <input type="text" class="col-md-12 hkg-nopadding" ng-required='true' name="selectFeatures" id="selectFeatures" ui-select2="multiFeatures" ng-model="$parent.selectedFeatures"/>
                                    <div class="error,help-block" ng-show="(internalForm.selectFeatures.$dirty || submitted) && internalForm.selectFeatures.$invalid">
                                        <span class="help-block" ng-show="internalForm.selectFeatures.$error.required">{{entity + 'Select Features'| translate }}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row" ng-repeat="join in reportConfig.joins">
                                <ng-form name="joinForm">
                                    <div class="col-md-11" >
                                        <div class="col-md-4 col-md-offset-2">
                                            <select class="col-md-12 hkg-nopadding" ui-select2="joinSelect" ng-model="join.firstColumn" name="joinFirstColumn" data-placeholder="{{entity + 'Select Column'| translate}}" ng-disabled="join.disabled">
                                                <option value=""></option>
                                                <optgroup label="{{table.text}}" ng-repeat="table in tableColumns">
                                                    <option ng-repeat="col in table.children" value="{{col.id}}" ng-selected="{{col.id == join.column}}">{{col.text}}</option>
                                                </optgroup>
                                            </select>
                                            <div class="error,help-block" ng-show="(joinForm.joinFirstColumn.$dirty) && joinForm.joinFirstColumn.$invalid">
                                                <span class="help-block small" ng-show="joinForm.joinFirstColumn.$error.required">{{entity + "Select column"| translate}}</span>
                                            </div>
                                        </div>

                                        <div class="col-md-1">
                                            <select class="form-control input-sm" ng-model="join.joinType" ng-options="joinType for joinType in joinTypes" ng-disabled="join.disabled"></select>
                                        </div>
                                        <div class="col-md-4">
                                            <select class="col-md-12 hkg-nopadding" ui-select2="joinSelect" ng-model="join.secondColumn" name="joinSecondColumn" data-placeholder="{{entity + 'Select Column'|translate}}" ng-disabled="join.disabled">
                                                <option value=""></option>
                                                <optgroup label="{{table.text}}" ng-repeat="table in tableColumns">
                                                    <option ng-repeat="col in table.children" value="{{col.id}}" ng-selected="{{col.id == join.column}}">{{col.text}}</option>
                                                </optgroup>
                                            </select>
                                            <div class="error,help-block" ng-show="(joinForm.joinSecondColumn.$dirty) && joinForm.joinSecondColumn.$invalid">
                                                <span class="help-block small" ng-show="joinForm.joinSecondColumn.$error.required">{{entity + "Select column"| translate}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-1">
                                        <a class="glyphicon glyphicon-ok pull-left" href="" ng-click="applyJoin()" ng-show="!join.disabled && join.firstColumn !== '' && join.secondColumn !== ''"></a>
                                        <a class="close pull-left" href="" ng-click="removeJoin($index)" ng-show="join.disabled">&times;</a>
                                    </div>
                                </ng-form>
                            </div>
                            <!--                        <div class="form-group">
                                                        <label for="query" class="col-md-2 control-label">{{entity + "Query"| translate}}</label>
                                                        <div class="col-md-6">
                                                            <textarea ng-disabled="true" ng-model="report.query" class="form-control" id="query" rows="6" name="reportQuery"></textarea>
                                                        </div>
                                                    </div>-->
                            <div class="form-group row" ng-show="isEditMode">
                                <label for="status" class="col-md-2 control-label">{{ entity + "Status" | translate }}</label>
                                <div class="col-md-3">
                                    <select class="form-control" ng-model="report.status" name="status"> 
                                        <option value="A">Active</option>
                                        <option value="RM">Remove</option>
                                    </select>   
                                </div>
                            </div>
                            <!--                    <div ng-show="tableParams != undefined && !queryChanged && columns.length > 0">
                                                    <div class="table-responsive">
                                                        <table ng-table="tableParams" class="table table-bordered">
                                                            <tbody>
                                                                <tr>
                                                                    <th ng-repeat='col in columns' ng-show="col.checked">
                                                                        {{col.fieldLabel}}
                                                                    </th>
                                                                </tr>
                                                                <tr ng-repeat="row in $data">
                                                                    <td ng-repeat="col in columns" ng-show="col.checked">
                                                                        {{col.dataType === 'timestamp' ? ConvertTimeStamptodate(row[col.colName]) : row[col.colName]}}
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div class="col-md-offset-2 col-md-5" ng-show="columns.length === 0 && columnsResponse">
                                                    <span ng-bind="entity + 'No Data Available' | translate"></span>
                                                </div>  -->
                            <div class="form-group">
                                <div class="col-xs-12">
                                    <div class="row">
                                        <hr/>
                                        <div class="col-xs-12 pull-right text-right">
                                            <a href="" ng-click="resetReport(reportDesignerForm)">
                                                {{ entity + 'Cancel' | translate}}
                                            </a>&nbsp;
                                            <!--<button type="button" class="btn btn-hkg" ng-click="executeQuery(internalForm)">{{entity + "Execute Query"| translate}}</button>-->
                                            <button class="btn btn-hkg" ng-click="
                                                        loadColumnValues(reportBasicForm);
                                                        navigateToComponent()">{{entity + "Next"| translate}}</button>&nbsp;
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-show="report.externalReport">
                            <div class="form-group required">
                                <label for="reportUrl" class="col-md-2 control-label">{{entity + "Report Url"| translate}}</label>
                                <div class="col-md-6" ng-class="{'has-error': reportBasicForm.reportUrl.$invalid && (reportBasicForm.reportUrl.$dirty || submitted)}"> 
                                    <textarea ng-model="report.query" class="form-control" id="reportUrl" rows="3" name="reportUrl" ng-required="report.externalReport"></textarea>
                                    <div class="error,help-block" ng-show="(reportBasicForm.reportUrl.$dirty || submitted) && reportBasicForm.reportUrl.$invalid">
                                        <span class="help-block" ng-show="reportBasicForm.reportUrl.$error.required">{{entity + "Enter report name"| translate}}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row" ng-show="isEditMode">
                                <label for="status" class="col-md-2 control-label">{{ entity + "Status" | translate }}</label>
                                <div class="col-md-3">
                                    <select class="form-control" ng-model="report.status" name="status"> 
                                        <option value="A">Active</option>
                                        <option value="RM">Remove</option>
                                    </select>   
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-12">
                                    <div class="row">
                                        <hr/>
                                        <div class="col-xs-12 pull-right text-right">
                                            <a href="" ng-click="resetReport(reportDesignerForm)">
                                                {{ entity + 'Cancel' | translate}}
                                            </a>
                                            <button class="btn btn-hkg" ng-click="saveReport(reportDesignerForm)">{{entity + "Save"| translate}}</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Report Code if its external report-->
                    <!--                <div ng-if="report.externalReport == true" class="form-group">
                                        <label for="reportCode" class="col-md-2 control-label">
                                            {{entity + "Report Code"| translate}}
                                        </label>
                                        <div class="col-md-3" ng-class="{'has-error': reportDesignerForm.reportCode.$invalid}">
                                            <input type="text" ng-model="report.reportCode" class="form-control input-sm" id="reportCode" name="reportCode" required>
                                            <div class="error,help-block" ng-show="(reportDesignerForm.reportCode.$dirty) && reportDesignerForm.reportCode.$invalid">
                                                <span class="help-block" ng-show="reportDesignerForm.reportCode.$error.required">{{entity + "Enter report code"| translate}}</span>
                                            </div>
                                        </div>
                                        <br/><br/><br/>
                                        <div class="form-group">
                                            <div class="col-md-6"></div>
                                            <div class="col-md-6">
                                                <
                    button class="btn btn-primary" ng-click="saveReport()" ng-disabled="reportDesignerForm.reportName.$invalid || reportDesignerForm.reportCode.$invalid">{{entity + "Save"| translate}}</button>
                                            </div>
                                        </div>
                                    </div>-->


                    <!--Add order popup-->

                </tab>
                <!--Configure columns tab-->
                <tab active="tabs[1].active" disabled="tabs[1].disabled" id="configureColumnsTab">
                    <tab-heading>
                        {{entity + "Fields"| translate}}
                    </tab-heading>
                    <div class="col-md-12">
                        <br/>
                        <h4>Configure Report</h4>
                    </div>
                    <div class="row">
                        <br/> <br/> <br/>
                        <div class="col-md-3" style="max-height: 300px;overflow: auto;">
                            <div class="toolbox">
                                <div class="text-center">
                                    <h4 class="text-center">Fields</h4>
                                </div>
                                <ul style="list-style-type: none;" class="text-center">
                                    <!-- The toolbox only allows to copy objects, not move it.
                        After a new
                                         element was created, dnd-copied is invoked and we
                        generate the next id -->
                                    <li ng-repeat="item in extraFields"
                                        dnd-draggable="item"
                                        dnd-effect-allowed="copy"
                                        dnd-copied="item.id = item.id + 1"
                                        dnd-type="item.type"
                                        dnd-selected="$parent.check(item)">
                                        <a class="list-group-item" style="margin-top: 5px;padding-left:0px;padding-right:0px"
                                           disabled="disabled">
                                            <span ng-if="item.text == 'Full Address'" >&nbsp;
                                                <i class="fa fa-plus-circle" ng-if='!showChecked'>&nbsp;</i>
                                                <i class="fa fa-minus-circle" ng-if='showChecked'>&nbsp;</i>
                                            </span>{{item.text}}
                                        </a>
                                    </li>
                                    <li ng-if="showChecked" ng-repeat="module in addressFull">
                                        <input type="checkbox" class="pull-left " style="margin-left: 15px;" ng-model="module.checked"  ng-change="selectOverView(module)">{{module.text}}<br>

                                    </li>

                                </ul>
                            </div>
                        </div>
                        <!-- Main area with dropzones and source code -->
                        <div class="col-md-7">
                            <div class="row">
                                <div ng-repeat="(zone, list) in models.dropzones" class="col-md-12">
                                    <div class="dropzone  box-grey">
                                        <!-- The dropzone also uses the list template -->
                                        <div ng-include="'list.html'" id="exportZone" class='export-table'
                                             ></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Sidebar--> 
                        <div class="col-md-2">

                            <div class="toolbox">
                                <div class="text-center">
                                    <h4>Elements</h4>
                                </div>
                                <ul style="text-align: center;list-style-type: none;">
                                    <!-- The toolbox only allows to copy objects, not move it.
                        After a new
                                         element was created, dnd-copied is invoked and we
                        generate the next id -->
                                    <li ng-repeat="item in models.templates"

                                        dnd-draggable="item"
                                        dnd-effect-allowed="copy"
                                        dnd-copied="item.id = item.id + 1"
                                        dnd-type="item.type"
                                        >
                                        <a class="list-group-item"
                                           style="margin-top: 5px" disabled="disabled">
                                            <span ng-if="item.newRow">Row</span>
                                            <span ng-if="!item.newRow" >{{item.text}}</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="toolbox">
                                <!-- If you use [] as referenced list, the dropped elements
                        will be lost -->
                                <div class="text-right">
                                    <h4>Remove Fields</h4>
                                </div>
                                <ul  dnd-drop="dropTrashCallback(event, index, item, external, type,
                                     'itemType')" dnd-list="[]" style="text-align: center;list-style-type: none;">
                                    <li>
                                        <img src="images/trashcan.jpg" style="width: 80px">
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 hkg-nopadding">
                        <br/><br/>
                        <div class="col-md-12 hkg-nopadding">
                            <h4>Configure Order</h4>
                        </div>
                        <div class="form-group row">
                            <label class="col-md-2 control-label">{{entity + 'Primary Order '|translate}}</label>
                            <div class="col-md-3" ng-class="{'has-error': primaryOrder.isPrimaryOrderRequired === true}">
                                <select class="form-control" ng-model="primaryOrder.column" ng-options="order.id as order.text for order in primaryOrderFields" name="primaryOrderColumn" data-placeholder="{{entity + 'Select Column'| translate}}" ng-change="primaryOrder.isPrimaryOrderRequired = false; updateOrders()">
                                    <option value="">Select Column</option>
                                </select>
                                <div class="error,help-block" ng-show="primaryOrder.isPrimaryOrderRequired === true">
                                    <span class="help-block small" ng-show="primaryOrder.isPrimaryOrderRequired === true">{{entity + "Configure primay order first"| translate}}</span>
                                </div>
                            </div>
                            <div class="col-md-2 hkg-nopadding">
                                <div class="btn-group">
                                    <button type="button" name="orderValue" class="btn btn-default btn-sm" ng-model="primaryOrder.orderValue" btn-radio="'asc'">{{entity + "Asc"| translate}}</button>
                                    <button type="button" name="orderValue" class="btn btn-default btn-sm" ng-model="primaryOrder.orderValue" btn-radio="'desc'">{{entity + "Desc"| translate}}</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-md-2 control-label">{{entity + 'Secondary Order '|translate}}</label>
                            <div class="col-md-3" ng-class="{'has-error': false}">
                                <select class="form-control" ng-model="secondaryOrder.column" ng-options="order.id as order.text for order in secondaryOrderFields" name="secondaryOrderColumn" data-placeholder="{{entity + 'Select Column'| translate}}" ng-change="updateOrders()">
                                    <option value="">Select Column</option>
                                </select>
                                <div class="error,help-block" ng-show="false">
                                    <span class="help-block small" ng-show="false">{{entity + "Select column"| translate}}</span>
                                </div>
                            </div>
                            <div class="col-md-2 hkg-nopadding">
                                <div class="btn-group">
                                    <button type="button" name="orderValue" class="btn btn-default btn-sm" ng-model="secondaryOrder.orderValue" btn-radio="'asc'">{{entity + "Asc"| translate}}</button>
                                    <button type="button" name="orderValue" class="btn btn-default btn-sm" ng-model="secondaryOrder.orderValue" btn-radio="'desc'">{{entity + "Desc"| translate}}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <br/><br/>
                        <div class="form-group row">
                            <div>
                                <div id="relationshipAccordion">
                                    <h4 ng-if="selectedFeaturesList.length > 1">
                                        {{entity + 'Configure Relationships '|translate}}
                                    </h4>
                                    <div id="relationshipCollapse">
                                        <table ng-if="selectedFeaturesList.length > 1" class="table">
                                            <thead>
                                                <tr>
                                                    <th class="col-md-3">
                                                        {{entity + "Feature Name"| translate}}
                                                    </th>
                                                    <th class="col-md-3">
                                                        {{entity + "Local Field"| translate}}
                                                    </th>
                                                    <th class="col-md-3">
                                                        {{entity + "Reference Feature"| translate}}
                                                    </th>
                                                    <th class="col-md-3">
                                                        {{entity + "Reference Field"| translate}}
                                                    </th>
                                                </tr>
                                            </thead>
                                            <!--                                        <br/>-->
                                            <tr ng-repeat="feature in selectedFeaturesList" ng-form="relationshipForm">

                                                <td class="col-md-3">
                                                    <span class="glyphicon glyphicon-arrow-up" ng-click="shiftRelationshipUp($index)"/>
                                                    <span class="glyphicon glyphicon-arrow-down" ng-click="shiftRelationshipDown($index)"/>
                                                    <label>{{feature.featureName}}</label>
                                                </td>
                                                <td class="col-md-3" ng-class="{'has-error': relationshipForm.selectLocalField.$invalid && (relationshipForm.selectLocalField.$dirty || submitted)}">
                                                    <input type="text" class="col-md-12 hkg-nopadding" ng-required='$index > 0' name="selectLocalField" id="selectLocalField" ui-select2="feature.localFields" ng-model="feature.localField" ng-disabled="$index === 0"/>
                                                    <div class="error,help-block" ng-show="(relationshipForm.selectLocalField.$dirty || submitted) && relationshipForm.selectLocalField.$invalid">
                                                        <span class="help-block" ng-show="relationshipForm.selectLocalField.$error.required">{{entity + 'Select Local Field'| translate }}</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-3" ng-class="{'has-error': relationshipForm.selectReferenceFeature.$invalid && (relationshipForm.selectReferenceFeature.$dirty || submitted)}">
                                                    <select name="selectReferenceFeature" ng-required='$index > 0' ng-model="feature.referenceFeature" class="col-md-12 form-control" ng-change="updateReferenceFields(feature.referenceFeature, $index)" ng-disabled="$index === 0">
                                                        <option ng-repeat="item in featureDetailsList" value="{{item.featureId}}" ng-if="feature.featureName !== item.featureName">{{item.featureName}}</option>
                                                    </select>
                                                    <div class="error,help-block" ng-show="(relationshipForm.selectReferenceFeature.$dirty || submitted) && relationshipForm.selectReferenceFeature.$invalid">
                                                        <span class="help-block" ng-show="relationshipForm.selectReferenceFeature.$error.required">{{entity + 'Select reference Feature'| translate }}</span>
                                                    </div>
                                                </td>
                                                <td class="col-md-3" ng-class="{'has-error': relationshipForm.selectReferenceField.$invalid && (relationshipForm.selectReferenceField.$dirty || submitted)}">
                                                    <input type="text" class="col-md-12 hkg-nopadding" ng-required='$index > 0' name="selectReferenceField" id="selectReferenceField" ui-select2="feature.referenceFields" ng-model="feature.referenceField" ng-disabled="$index === 0"/>
                                                    <div class="error,help-block" ng-show="(relationshipForm.selectReferenceField.$dirty || submitted) && relationshipForm.selectReferenceField.$invalid">
                                                        <span class="help-block" ng-show="relationshipForm.selectReferenceField.$error.required">{{entity + 'Select reference Field'| translate }}</span>
                                                    </div>
                                                </td>

                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>




                    <div class="form-group" style="margin-bottom: 0px" ng-if="columns.length > 0">
                        <br/><br/>
                        <div class="col-md-12">
                            <h4>Configure Fields</h4>
                        </div>
                        <div  class="col-md-12">
                            <table class="table" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th class="col-md-3">{{entity + "Columns"|translate}}</th>
                                        <th class="col-md-2">{{entity + "Column Header"|translate}}</th>
                                        <th class="col-md-1">{{entity + "Show Total"| translate}}</th>
                                        <th class="col-md-6">{{entity + "Column Filter"|translate}}</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                    <!--                <br/>
                                    <h4>{{entity + "Configure Fields"| translate}}</h4>-->
                    <div ng-if="columns.length > 0" ng-form="configureForm">
                        <!--                    <div class="form-group">
                                                <div class="col-md-3">
                                                    <label class="control-label">{{entity + "Columns"| translate}}</label>
                                                </div>
                                                <div class="col-md-2">
                                                    <label class="control-label">{{entity + "Column Header"| translate}}</label>
                                                </div>
                                                                        <div class="col-md-1">
                                                                                                <label>{{entity + "i18n required"| translate}}</label>
                                                                        </div>
                                                <div class="col-md-1">
                                                    <label>{{entity + "Show Total"| translate}}</label>
                                                </div>
                                                                        <div class="col-md-2">
                                                                                                <label class="control-label">{{entity + "Column Format"| translate}}</label>
                                                                        </div>
                                                <div class="col-md-4">
                                                    <label class="control-label">{{entity + "Column Filter"| translate}}</label>
                                                </div>
                        
                                            </div>-->
                        <!--<ng-form name="filterForm">-->
                        <div class="form-group" ng-repeat="col in columns" ng-form="filterForm" ng-show="!isGroupByCheck">
                            <div class="col-md-3">
                                <!--                                <span class="glyphicon glyphicon-arrow-up" ng-click="shiftColUp($index)"/>
                                                                <span class="glyphicon glyphicon-arrow-down" ng-click="shiftColDown($index)"/>-->
                                {{col.fieldLabel}}
                            </div>
                            <div class="col-md-2">
                                <div ng-class="{'has-error': filterForm.alias.$invalid && (filterForm.alias.$dirty || subbmited)}">
                                    <input type="text" id="alias" name="alias" ng-model="col.alias"  ng-blur="doesAliasExists(col, filterForm, $index, filterForm.alias)" class="form-control" ng-change="renameMainList(col); filterForm.alias.$setValidity('exists', true);"/>
                                    <div class="error,help-block" ng-show="(filterForm.alias.$dirty || subbmited) && filterForm.alias.$invalid">
                                        <span class="help-block" ng-show="filterForm.alias.$error.exists">{{ entity + 'Column Header already exists' | translate}}</span>
                                    </div>
                                </div>
                            </div>
                            <!--I18nRequired-->
                            <!--                        <div class="col-md-1">
                                                        <input type="checkbox" ng-model="col.colI18nRequired" ng-if="col.dataType === 'int8'"/>
                                                    </div>-->
                            <!--Show total field-->
                            <div class="col-md-1">
                                <input type="checkbox" ng-model="col.showTotal" ng-if="(col.dataType === 'int8' || col.dataType === 'double precision') && col.componentType !== 'Currency'"/>
                            </div>
                            <!--                        <div class="col-md-2">
                                                        <select class="form-control" 
                                                                ng-model="col.format"
                                                                ng-options="format.format as format.format for format in col.availableColumnFormats" ng-disabled='col.converterDataBeanList.length > 0'>
                                                            <option value="">{{entity + 'Select Format'| translate}}</option>
                                                        </select> 
                                                    </div>-->

                            <div class="col-md-2" ng-class="{'has-error': filterForm.filterType.$invalid}">
                                <select class="form-control" ng-options="filterType.id as filterType.text for filterType in col.availableFilterTypes" ng-model="col.selectedFilterType" name="filterType">
                                    <option value="">{{entity + 'Select Filter'|translate}}</option>
                                </select>
                                <!--<input type="text" class="col-md-12 hkg-nopadding" name="filterType" id="selectFilterTypes" ui-select2="col.availableFilterTypes" ng-model="col.selectedFilterTypes" ng-change="changeFilter(col.selectedFilterTypes, $index)"/>-->
                                <div class="error,help-block" ng-show="(filterForm.filterType.$dirty) && filterForm.filterType.$invalid">
                                    <span class="help-block" ng-show="filterForm.filterType.$error.required">{{entity + "Select filter type"| translate}}</span>
                                </div>
                            </div>
                            <div class="col-md-4" ng-show="col.selectedFilterType != undefined">
                                <div ng-show="col.selectedFilterType !== 'is null' && col.selectedFilterType !== 'is not null'">
                                    <div class="col-md-5" ng-if="col.dataType === 'varchar' && col.componentType !== 'UserMultiSelect'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                        <input type="text" ng-model="col.filterValFirst" class="form-control" name="filterValFirst" placeholder="{{entity + 'Filter Value'| translate}}" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                        <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                            <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                        </div>
                                    </div>
                                    <div class="col-md-7" ng-if="col.dataType === 'varchar' && col.componentType === 'UserMultiSelect'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                        <div class="input-group">
                                            <input type="text" class="col-md-12 hkg-nopadding" name="filterValFirst" ui-select2="col.userMultiSelection" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                            <span class="input-group-addon"><span class="glyphicon glyphicon-info-sign" tooltip-html-unsafe="{{popover}}"  tooltip-trigger="mouseenter" tooltip-placement="right"></span></span>
                                        </div>
                                        <!--<input type="text" ng-model="col.filterValFirst" class="form-control" name="filterValFirst" placeholder="{{entity + 'Filter Value'| translate}}" ng-change="col.filterValFirstInvalid = false;col.filterValFirstMinInvalid = false;"/>-->
                                        <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                            <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                        </div>
                                    </div>
                                    <!--Int or Long Value-->
                                    <div class="col-md-5" ng-if="col.dataType === 'int8'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                        <input type="text" ng-model="col.filterValFirst" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                        <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                            <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                            <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded">{{entity + "Invalid range value"| translate}}</span>
                                        </div>
                                    </div>
                                    <!--Double Value-->
                                    <div class="col-md-5" ng-if="col.dataType === 'double precision'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                        <input type="text" ng-model="col.filterValFirst" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                        <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                            <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                            <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded">{{entity + "Invalid range value"| translate}}</span>
                                        </div>
                                    </div>
                                    <!--Boolean Value-->
                                    <div class="col-md-6" ng-if="col.dataType === 'boolean'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                        <label class="radio-inline">
                                            <input type="radio" id="true" name="filterValFirst{{$index}}" value="true" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;">
                                            {{entity + 'True'| translate}} 
                                        </label>
                                        <label class="radio-inline">

                                            <input type="radio" id="false" name="filterValFirst{{$index}}" value="false" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;">
                                            {{entity + 'False'| translate}}
                                        </label>
                                        <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                            <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                        </div>
                                    </div>
                                    <!--Date Value-->
                                    <div class="col-md-5" ng-class="{'has-error': ((col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded) || filterForm.filterValFirst.$invalid}" ng-if="col.dataType === 'timestamp'">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" name="filterValFirst" ng-model="col.filterValFirst" is-open="col.first_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" ng-click="open($event, col, 'first_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                            </span>
                                        </div>
                                        <div class="error,help-block" ng-show="((col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded) || filterForm.filterValFirst.$invalid">
                                            <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded && filterForm.filterValFirst.$valid">{{entity + "Enter filter value"| translate}}</span>
                                            <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded && filterForm.filterValFirst.$valid">{{entity + "Invalid range value"| translate}}</span>
                                            <span class="help-block" ng-show="filterForm.filterValFirst.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                            <span class="help-block" ng-show="filterForm.filterValFirst.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                            <span class="help-block" ng-show="filterForm.filterValFirst.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                        </div>
                                    </div> 

                                    <!--Second value-->
                                    <!--Int or Long Value-->
                                    <div class="col-md-5" ng-if="col.selectedFilterType === 'between' && col.dataType === 'int8'" ng-class="{'has-error': col.filterValSecondInvalid === true && isGlobalFilterAdded}">
                                        <input type="text" ng-model="col.filterValSecond" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValSecond" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                        <div class="error,help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">
                                            <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                        </div>
                                    </div>
                                    <!--Double Value-->
                                    <div class="col-md-5" ng-if="col.selectedFilterType === 'between' && col.dataType === 'double precision'" ng-class="{'has-error': col.filterValSecondInvalid === true && isGlobalFilterAdded}">
                                        <input type="text" ng-model="col.filterValSecond" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValSecond" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                        <div class="error,help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">
                                            <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                        </div>
                                    </div>
                                    <!--Date Value-->
                                    <div class="col-md-5" ng-class="{'has-error': (col.filterValSecondInvalid === true && isGlobalFilterAdded) || filterForm.filterValSecond.$invalid}" ng-if="col.selectedFilterType === 'between' && col.dataType === 'timestamp'">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" name="filterValSecond" ng-model="col.filterValSecond" is-open="col.second_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" ng-click="open($event, col, 'second_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                            </span>
                                        </div>
                                        <div class="error,help-block" ng-show="(col.filterValSecondInvalid === true && isGlobalFilterAdded) || filterForm.filterValSecond.$invalid">
                                            <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded && filterForm.filterValSecond.$valid">{{entity + "Enter filter value"| translate}}</span>
                                            <span class="help-block" ng-show="filterForm.filterValSecond.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                            <span class="help-block" ng-show="filterForm.filterValSecond.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                            <span class="help-block" ng-show="filterForm.filterValSecond.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div>
                                        <span class="glyphicon glyphicon-plus-sign text-primary" ng-click="addFilter(col, $index, 'columns')"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="row" ng-if="col.selectedFilterTypesList !== undefined && col.selectedFilterTypesList !== null && col.selectedFilterTypesList.length > 0">
                                <div class="col-md-6 pull-right">
                                    <span style="cursor: pointer;" class="accordion-toggle text-info" data-toggle="collapse" data-target="#filterCollapse{{$index}}">
                                        One or More Filters Added&nbsp;<span class="glyphicon glyphicon-eye-open " title="{{entity + 'View Filters'|translate}}"></span>
                                    </span>
                                    <div id="{{'filterCollapse' + $index}}" class="collapse col-md-11 hkg-nopadding">
                                        <table class="table" style="table-layout: fixed">
                                            <thead>
                                                <tr>
                                                    <th class="col-md-4">Filter Type</th>
                                                    <th class="col-md-7">Filter Value</th>
                                                    <th class="col-md-2 text-right">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="filterDetail in col.selectedFilterTypesList">
                                                    <td><span>{{filterDetail.filterLabel}}</span></td>
                                                    <td style="word-wrap: break-word">
                                                        <span ng-if="col.componentType !== 'UserMultiSelect' && col.dataType !== 'timestamp'">{{filterDetail.filterValFirst}}</span>
                                                        <span ng-if="col.dataType === 'timestamp'">{{filterDetail.filterValFirst| date}}</span>
                                                        <span ng-if="col.componentType === 'UserMultiSelect'">{{filterDetail.userMultiSelectLabel}}</span>
                                                        <span ng-if="filterDetail.filter === 'between'">&nbsp;to&nbsp;</span>
                                                        <span ng-if="filterDetail.filter === 'between' && col.dataType !== 'timestamp'">{{filterDetail.filterValSecond}}</span>
                                                        <span ng-if="filterDetail.filter === 'between' && col.dataType === 'timestamp'">{{filterDetail.filterValSecond| date}}</span>
                                                    </td>
                                                    <td><a class="close" href="" ng-click="removeFilter($index, $parent.$index, 'columns')">&times;</a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Group Columns -->
                        <div ng-show="isGroupByCheck">
                            <!--                        <label class="text-hkg" ng-if="groupByColumns.length > 0"><strong>{{'GROUP BY'| translate}}</strong></label>-->
                            <div ng-repeat="levelGroup in groupByColumns" ng-form="groupByLevelFilterForm">
                                <label class="text-hkg"><strong>{{'LEVEL ' + ($index + 1) + ' GROUP BY' | translate}}</strong></label>
                                <div class="form-group" ng-repeat="col in levelGroup.columns" ng-form="groupByFilterForm">
                                    <div class="col-md-3">
<!--                                        <span class="glyphicon glyphicon-arrow-up" ng-click="shiftGroupByLevelColUp($parent.$index, $index)"/>
                                        <span class="glyphicon glyphicon-arrow-down" ng-click="shiftGroupByLevelColDown($parent.$index, $index)"/>-->
                                        {{col.fieldLabel}}
                                    </div>
                                    <div class="col-md-2">
                                        <div ng-class="{'has-error': groupByFilterForm.alias.$invalid && (groupByFilterForm.alias.$dirty || subbmited)}">
                                            <input type="text" id="alias" name="alias" ng-model="col.alias"  ng-blur="doesAliasExists(col, groupByFilterForm, $index, groupByFilterForm.alias)" class="form-control" ng-change="groupByFilterForm.alias.$setValidity('exists', true);"/>
                                            <div class="error,help-block" ng-show="(groupByFilterForm.alias.$dirty || subbmited) && groupByFilterForm.alias.$invalid">
                                                <span class="help-block" ng-show="groupByFilterForm.alias.$error.exists">{{ entity + 'Column Header already exists' | translate}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <!--I18nRequired-->
                                    <!--                            <div class="col-md-1">
                                                                    <input type="checkbox" ng-model="col.colI18nRequired" ng-if="col.dataType === 'int8'"/>
                                                                </div>-->
                                    <!--Show total field-->
                                    <div class="col-md-1">
                                        <input type="checkbox" ng-model="col.showTotal" ng-if="(col.dataType === 'int8' || col.dataType === 'double precision') && col.componentType !== 'Currency'"/>
                                    </div>

                                    <div class="col-md-2" ng-class="{'has-error':groupByFilterForm.filterType.$invalid}">
                                        <select class="form-control" ng-options="filterType.id as filterType.text for filterType in col.availableFilterTypes" ng-model="col.selectedFilterType" name="filterType">
                                            <option value="">{{entity + 'Select Filter'|translate}}</option>
                                        </select>
                                        <!--<input type="text" class="col-md-12 hkg-nopadding" name="filterType" id="selectFilterTypes" ui-select2="col.availableFilterTypes" ng-model="col.selectedFilterTypes" ng-change="changeFilter(col.selectedFilterTypes, $index)"/>-->
                                        <div class="error,help-block" ng-show="(groupByFilterForm.filterType.$dirty) && groupByFilterForm.filterType.$invalid">
                                            <span class="help-block" ng-show="groupByFilterForm.filterType.$error.required">{{entity + "Select filter type"| translate}}</span>
                                        </div>
                                    </div>
                                    <div class="col-md-4" ng-show="col.selectedFilterType != undefined">
                                        <div ng-show="col.selectedFilterType !== 'is null' && col.selectedFilterType !== 'is not null'">
                                            <div class="col-md-5" ng-if="col.dataType === 'varchar' && col.componentType !== 'UserMultiSelect'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValFirst" class="form-control" name="filterValFirst" placeholder="{{entity + 'Filter Value'| translate}}" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-7" ng-if="col.dataType === 'varchar' && col.componentType === 'UserMultiSelect'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <div class="input-group">
                                                    <input type="text" class="col-md-12 hkg-nopadding" name="filterValFirst" ui-select2="col.userMultiSelection" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                    <span class="input-group-addon"><span class="glyphicon glyphicon-info-sign" tooltip-html-unsafe="{{popover}}"  tooltip-trigger="mouseenter" tooltip-placement="right"></span></span>
                                                </div>
                                                <!--<input type="text" ng-model="col.filterValFirst" class="form-control" name="filterValFirst" placeholder="{{entity + 'Filter Value'| translate}}" ng-change="col.filterValFirstInvalid = false;col.filterValFirstMinInvalid = false;"/>-->
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Int or Long Value-->
                                            <div class="col-md-5" ng-if="col.dataType === 'int8'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValFirst" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                    <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded">{{entity + "Invalid range value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Double Value-->
                                            <div class="col-md-5" ng-if="col.dataType === 'double precision'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValFirst" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                    <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded">{{entity + "Invalid range value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Boolean Value-->
                                            <div class="col-md-6" ng-if="col.dataType === 'boolean'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <label class="radio-inline">
                                                    <input type="radio" id="true" name="filterValFirst{{$index}}" value="true" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;">
                                                    {{entity + 'True'| translate}} 
                                                </label>
                                                <label class="radio-inline">

                                                    <input type="radio" id="false" name="filterValFirst{{$index}}" value="false" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;">
                                                    {{entity + 'False'| translate}}
                                                </label>
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Date Value-->
                                            <div class="col-md-5" ng-class="{'has-error': ((col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded) || groupByFilterForm.filterValFirst.$invalid}" ng-if="col.dataType === 'timestamp'">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" name="filterValFirst" ng-model="col.filterValFirst" is-open="col.first_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-click="open($event, col, 'first_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </div>
                                                <div class="error,help-block" ng-show="((col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded) || groupByFilterForm.filterValFirst.$invalid">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded && groupByFilterForm.filterValFirst.$valid">{{entity + "Enter filter value"| translate}}</span>
                                                    <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded && groupByFilterForm.filterValFirst.$valid">{{entity + "Invalid range value"| translate}}</span>
                                                    <span class="help-block" ng-show="groupByFilterForm.filterValFirst.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="groupByFilterForm.filterValFirst.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="groupByFilterForm.filterValFirst.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div> 

                                            <!--Second value-->
                                            <!--Int or Long Value-->
                                            <div class="col-md-5" ng-if="col.selectedFilterType === 'between' && col.dataType === 'int8'" ng-class="{'has-error': col.filterValSecondInvalid === true && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValSecond" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValSecond" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Double Value-->
                                            <div class="col-md-5" ng-if="col.selectedFilterType === 'between' && col.dataType === 'double precision'" ng-class="{'has-error': col.filterValSecondInvalid === true && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValSecond" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValSecond" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Date Value-->
                                            <div class="col-md-5" ng-class="{'has-error': (col.filterValSecondInvalid === true && isGlobalFilterAdded) || groupByFilterForm.filterValSecond.$invalid}" ng-if="col.selectedFilterType === 'between' && col.dataType === 'timestamp'">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" name="filterValSecond" ng-model="col.filterValSecond" is-open="col.second_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-click="open($event, col, 'second_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </div>
                                                <div class="error,help-block" ng-show="(col.filterValSecondInvalid === true && isGlobalFilterAdded) || groupByFilterForm.filterValSecond.$invalid">
                                                    <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded && groupByFilterForm.filterValSecond.$valid">{{entity + "Enter filter value"| translate}}</span>
                                                    <span class="help-block" ng-show="groupByFilterForm.filterValSecond.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="groupByFilterForm.filterValSecond.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="groupByFilterForm.filterValSecond.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div>
                                                <span class="glyphicon glyphicon-plus-sign text-primary" ng-click="addGroupByLevelFilter(col, $index)"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-if="col.selectedFilterTypesList !== undefined && col.selectedFilterTypesList !== null && col.selectedFilterTypesList.length > 0">
                                        <div class="col-md-6 pull-right">
                                            <span style="cursor: pointer;" class="accordion-toggle text-info" data-toggle="collapse" data-target="#filterGroupByCollapse{{$index}}">
                                                One or More Filters Added&nbsp;<span class="glyphicon glyphicon-eye-open " title="{{entity + 'View Filters'|translate}}"></span>
                                            </span>
                                            <div id="{{'filterGroupByCollapse' + $index}}" class="collapse col-md-11">
                                                <table class="table" style="table-layout: fixed">
                                                    <thead>
                                                        <tr>
                                                            <th class="col-md-4">Filter Type</th>
                                                            <th class="col-md-7">Filter Value</th>
                                                            <th class="col-md-2 text-right">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="filterDetail in col.selectedFilterTypesList">
                                                            <td><span>{{filterDetail.filterLabel}}</span></td>
                                                            <td style="word-wrap: break-word">
                                                                <span ng-if="col.componentType !== 'UserMultiSelect' && col.dataType !== 'timestamp'">{{filterDetail.filterValFirst}}</span>
                                                                <span ng-if="col.dataType === 'timestamp'">{{filterDetail.filterValFirst| date}}</span>
                                                                <span ng-if="col.componentType === 'UserMultiSelect'">{{filterDetail.userMultiSelectLabel}}</span>
                                                                <span ng-if="filterDetail.filter === 'between'">&nbsp;to&nbsp;</span>
                                                                <span ng-if="filterDetail.filter === 'between' && col.dataType !== 'timestamp'">{{filterDetail.filterValSecond}}</span>
                                                                <span ng-if="filterDetail.filter === 'between' && col.dataType === 'timestamp'">{{filterDetail.filterValSecond| date}}</span>
                                                            </td>
                                                            <td><a class="close" href="" ng-click="removeGroupByLevelFilter($index, $parent.$index, col)">&times;</a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div ng-repeat="group in groupsColumns" ng-form="groupFilterForm">
                                <label class="text-hkg"><strong>{{group.groupName}}</strong></label>
                                <div class="form-group" ng-repeat="col in group.groupColumns" ng-form="groupItemFilterForm">
                                    <div class="col-md-3">
                                        <span class="glyphicon glyphicon-arrow-up" ng-click="shiftGroupColUp($parent.$index, $index)"/>
                                        <span class="glyphicon glyphicon-arrow-down" ng-click="shiftGroupColDown($parent.$index, $index)"/>
                                        {{col.fieldLabel}}
                                    </div>
                                    <div class="col-md-2">
                                        <div ng-class="{'has-error': groupItemFilterForm.alias.$invalid && (groupItemFilterForm.alias.$dirty || subbmited)}">
                                            <input type="text" id="alias" name="alias" ng-model="col.alias"  ng-blur="doesAliasExists(col, groupItemFilterForm, $index, groupItemFilterForm.alias)" class="form-control" ng-change="groupItemFilterForm.alias.$setValidity('exists', true);"/>
                                            <div class="error,help-block" ng-show="(groupItemFilterForm.alias.$dirty || subbmited) && groupItemFilterForm.alias.$invalid">
                                                <span class="help-block" ng-show="groupItemFilterForm.alias.$error.exists">{{ entity + 'Column Header already exists' | translate}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <!--I18nRequired-->
                                    <!--                                <div class="col-md-1">
                                                                        <input type="checkbox" ng-model="col.colI18nRequired" ng-if="col.dataType === 'int8'"/>
                                                                    </div>-->
                                    <!--Show total field-->
                                    <div class="col-md-1">
                                        <input type="checkbox" ng-model="col.showTotal" ng-if="(col.dataType === 'int8' || col.dataType === 'double precision') && col.componentType !== 'Currency'"/>
                                    </div>

                                    <div class="col-md-2" ng-class="{'has-error': groupItemFilterForm.filterType.$invalid}">
                                        <select class="form-control" ng-options="filterType.id as filterType.text for filterType in col.availableFilterTypes" ng-model="col.selectedFilterType" name="filterType">
                                            <option value="">{{entity + 'Select Filter'|translate}}</option>
                                        </select>
                                        <!--<input type="text" class="col-md-12 hkg-nopadding" name="filterType" id="selectFilterTypes" ui-select2="col.availableFilterTypes" ng-model="col.selectedFilterTypes" ng-change="changeFilter(col.selectedFilterTypes, $index)"/>-->
                                        <div class="error,help-block" ng-show="(groupItemFilterForm.filterType.$dirty) && groupItemFilterForm.filterType.$invalid">
                                            <span class="help-block" ng-show="groupItemFilterForm.filterType.$error.required">{{entity + "Select filter type"| translate}}</span>
                                        </div>
                                    </div>
                                    <div class="col-md-4" ng-show="col.selectedFilterType != undefined">
                                        <div ng-show="col.selectedFilterType !== 'is null' && col.selectedFilterType !== 'is not null'">
                                            <div class="col-md-5" ng-if="col.dataType === 'varchar' && col.componentType !== 'UserMultiSelect'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValFirst" class="form-control" name="filterValFirst" placeholder="{{entity + 'Filter Value'| translate}}" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-7" ng-if="col.dataType === 'varchar' && col.componentType === 'UserMultiSelect'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <div class="input-group">
                                                    <input type="text" class="col-md-12 hkg-nopadding" name="filterValFirst" ui-select2="col.userMultiSelection" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                    <span class="input-group-addon"><span class="glyphicon glyphicon-info-sign" tooltip-html-unsafe="{{popover}}"  tooltip-trigger="mouseenter" tooltip-placement="right"></span></span>
                                                </div>
                                                <!--<input type="text" ng-model="col.filterValFirst" class="form-control" name="filterValFirst" placeholder="{{entity + 'Filter Value'| translate}}" ng-change="col.filterValFirstInvalid = false;col.filterValFirstMinInvalid = false;"/>-->
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Int or Long Value-->
                                            <div class="col-md-5" ng-if="col.dataType === 'int8'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValFirst" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                    <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded">{{entity + "Invalid range value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Double Value-->
                                            <div class="col-md-5" ng-if="col.dataType === 'double precision'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValFirst" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                    <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded">{{entity + "Invalid range value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Boolean Value-->
                                            <div class="col-md-6" ng-if="col.dataType === 'boolean'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                                <label class="radio-inline">
                                                    <input type="radio" id="true" name="filterValFirst{{$index}}" value="true" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;">
                                                    {{entity + 'True'| translate}} 
                                                </label>
                                                <label class="radio-inline">

                                                    <input type="radio" id="false" name="filterValFirst{{$index}}" value="false" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;">
                                                    {{entity + 'False'| translate}}
                                                </label>
                                                <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Date Value-->
                                            <div class="col-md-5" ng-class="{'has-error': ((col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded) || groupItemFilterForm.filterValFirst.$invalid}" ng-if="col.dataType === 'timestamp'">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" name="filterValFirst" ng-model="col.filterValFirst" is-open="col.first_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-click="open($event, col, 'first_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </div>
                                                <div class="error,help-block" ng-show="((col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded) || groupItemFilterForm.filterValFirst.$invalid">
                                                    <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded && groupItemFilterForm.filterValFirst.$valid">{{entity + "Enter filter value"| translate}}</span>
                                                    <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded && groupItemFilterForm.filterValFirst.$valid">{{entity + "Invalid Range value"| translate}}</span>
                                                    <span class="help-block" ng-show="groupItemFilterForm.filterValFirst.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="groupItemFilterForm.filterValFirst.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="groupItemFilterForm.filterValFirst.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div> 

                                            <!--Second value-->
                                            <!--Int or Long Value-->
                                            <div class="col-md-5" ng-if="col.selectedFilterType === 'between' && col.dataType === 'int8'" ng-class="{'has-error': col.filterValSecondInvalid === true && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValSecond" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValSecond" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Double Value-->
                                            <div class="col-md-5" ng-if="col.selectedFilterType === 'between' && col.dataType === 'double precision'" ng-class="{'has-error': col.filterValSecondInvalid === true && isGlobalFilterAdded}">
                                                <input type="text" ng-model="col.filterValSecond" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValSecond" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <div class="error,help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">
                                                    <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <!--Date Value-->
                                            <div class="col-md-5" ng-class="{'has-error': (col.filterValSecondInvalid === true && isGlobalFilterAdded) || groupItemFilterForm.filterValSecond.$invalid}" ng-if="col.selectedFilterType === 'between' && col.dataType === 'timestamp'">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" name="filterValSecond" ng-model="col.filterValSecond" is-open="col.second_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-click="open($event, col, 'second_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </div>
                                                <div class="error,help-block" ng-show="(col.filterValSecondInvalid === true && isGlobalFilterAdded) || groupItemFilterForm.filterValSecond.$invalid">
                                                    <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded && groupItemFilterForm.filterValSecond.$valid">{{entity + "Enter filter value"| translate}}</span>
                                                    <span class="help-block" ng-show="groupItemFilterForm.filterValSecond.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="groupItemFilterForm.filterValSecond.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="groupItemFilterForm.filterValSecond.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div>
                                                <span class="glyphicon glyphicon-plus-sign text-primary" ng-click="addGroupFilter(col, $index)"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-if="col.selectedFilterTypesList !== undefined && col.selectedFilterTypesList !== null && col.selectedFilterTypesList.length > 0">
                                        <div class="col-md-6 pull-right">
                                            <span style="cursor: pointer;" class="accordion-toggle text-info" data-toggle="collapse" data-target="#filterGroupsCollapse{{group.sequence}}{{$index}}">
                                                One or More Filters Added &nbsp;<span class="glyphicon glyphicon-eye-open " title="{{entity + 'View Filters'|translate}}"></span>
                                            </span>
                                            <div id="{{'filterGroupsCollapse' + group.sequence + $index}}" class="collapse col-md-11">
                                                <table class="table" style="table-layout: fixed">
                                                    <thead>
                                                        <tr>
                                                            <th class="col-md-4">Filter Type</th>
                                                            <th class="col-md-7">Filter Value</th>
                                                            <th class="col-md-2 text-right">Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="filterDetail in col.selectedFilterTypesList">
                                                            <td><span>{{filterDetail.filterLabel}}</span></td>
                                                            <td style="word-wrap: break-word">
                                                                <span ng-if="col.componentType !== 'UserMultiSelect' && col.dataType !== 'timestamp'">{{filterDetail.filterValFirst}}</span>
                                                                <span ng-if="col.dataType === 'timestamp'">{{filterDetail.filterValFirst| date}}</span>
                                                                <span ng-if="col.componentType === 'UserMultiSelect'">{{filterDetail.userMultiSelectLabel}}</span>
                                                                <span ng-if="filterDetail.filter === 'between'">&nbsp;to&nbsp;</span>
                                                                <span ng-if="filterDetail.filter === 'between' && col.dataType !== 'timestamp'">{{filterDetail.filterValSecond}}</span>
                                                                <span ng-if="filterDetail.filter === 'between' && col.dataType === 'timestamp'">{{filterDetail.filterValSecond| date}}</span>
                                                            </td>
                                                            <td><a class="close" href="" ng-click="removeGroupFilter($index, $parent.$index, col)">&times;</a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <label class="text-hkg" ng-if="otherColumns.length > 0"><strong>{{'Other Fields'| translate}}</strong></label>
                            <div class="form-group" ng-repeat="col in otherColumns" ng-form="otherFilterForm">
                                <div class="col-md-3">
<!--                                    <span class="glyphicon glyphicon-arrow-up" ng-click="shiftOtherColUp($index)"/>
                                    <span class="glyphicon glyphicon-arrow-down" ng-click="shiftOtherColDown($index)"/>-->
                                    {{col.fieldLabel}}
                                </div>
                                <div class="col-md-2">
                                    <div ng-class="{'has-error': otherFilterForm.alias.$invalid && (otherFilterForm.alias.$dirty || subbmited)}">
                                        <input type="text" id="alias" name="alias" ng-model="col.alias"  ng-blur="doesAliasExists(col, otherFilterForm, $index, otherFilterForm.alias)" class="form-control" ng-change="otherFilterForm.alias.$setValidity('exists', true);"/>
                                        <div class="error,help-block" ng-show="(otherFilterForm.alias.$dirty || subbmited) && otherFilterForm.alias.$invalid">
                                            <span class="help-block" ng-show="otherFilterForm.alias.$error.exists">{{ entity + 'Column Header already exists' | translate}}</span>
                                        </div>
                                    </div>
                                </div>
                                <!--I18nRequired-->
                                <!--                            <div class="col-md-1">
                                                                <input type="checkbox" ng-model="col.colI18nRequired" ng-if="col.dataType === 'int8'"/>
                                                            </div>-->
                                <!--Show total field-->
                                <div class="col-md-1">
                                    <input type="checkbox" ng-model="col.showTotal" ng-if="(col.dataType === 'int8' || col.dataType === 'double precision') && col.componentType !== 'Currency'"/>
                                </div>

                                <div class="col-md-2" ng-class="{'has-error': otherFilterForm.filterType.$invalid}">
                                    <select class="form-control" ng-options="filterType.id as filterType.text for filterType in col.availableFilterTypes" ng-model="col.selectedFilterType" name="filterType">
                                        <option value="">{{entity + 'Select Filter'|translate}}</option>
                                    </select>
                                    <!--<input type="text" class="col-md-12 hkg-nopadding" name="filterType" id="selectFilterTypes" ui-select2="col.availableFilterTypes" ng-model="col.selectedFilterTypes" ng-change="changeFilter(col.selectedFilterTypes, $index)"/>-->
                                    <div class="error,help-block" ng-show="(otherFilterForm.filterType.$dirty) && otherFilterForm.filterType.$invalid">
                                        <span class="help-block" ng-show="otherFilterForm.filterType.$error.required">{{entity + "Select filter type"| translate}}</span>
                                    </div>
                                </div>
                                <div class="col-md-4" ng-show="col.selectedFilterType != undefined">
                                    <div ng-show="col.selectedFilterType !== 'is null' && col.selectedFilterType !== 'is not null'">
                                        <div class="col-md-5" ng-if="col.dataType === 'varchar' && col.componentType !== 'UserMultiSelect'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                            <input type="text" ng-model="col.filterValFirst" class="form-control" name="filterValFirst" placeholder="{{entity + 'Filter Value'| translate}}" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                            <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                            </div>
                                        </div>
                                        <div class="col-md-7" ng-if="col.dataType === 'varchar' && col.componentType === 'UserMultiSelect'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                            <div class="input-group">
                                                <input type="text" class="col-md-12 hkg-nopadding" name="filterValFirst" ui-select2="col.userMultiSelection" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <span class="input-group-addon"><span class="glyphicon glyphicon-info-sign" tooltip-html-unsafe="{{popover}}"  tooltip-trigger="mouseenter" tooltip-placement="right"></span></span>
                                            </div>
                                            <!--<input type="text" ng-model="col.filterValFirst" class="form-control" name="filterValFirst" placeholder="{{entity + 'Filter Value'| translate}}" ng-change="col.filterValFirstInvalid = false;col.filterValFirstMinInvalid = false;"/>-->
                                            <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                            </div>
                                        </div>
                                        <!--Int or Long Value-->
                                        <div class="col-md-5" ng-if="col.dataType === 'int8'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                            <input type="text" ng-model="col.filterValFirst" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                            <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded">{{entity + "Invalid range value"| translate}}</span>
                                            </div>
                                        </div>
                                        <!--Double Value-->
                                        <div class="col-md-5" ng-if="col.dataType === 'double precision'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                            <input type="text" ng-model="col.filterValFirst" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                            <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                                <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded">{{entity + "Invalid range value"| translate}}</span>
                                            </div>
                                        </div>
                                        <!--Boolean Value-->
                                        <div class="col-md-6" ng-if="col.dataType === 'boolean'" ng-class="{'has-error': (col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded}">
                                            <label class="radio-inline">
                                                <input type="radio" id="true" name="filterValFirst{{$index}}" value="true" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;">
                                                {{entity + 'True'| translate}} 
                                            </label>
                                            <label class="radio-inline">

                                                <input type="radio" id="false" name="filterValFirst{{$index}}" value="false" ng-model="col.filterValFirst" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;">
                                                {{entity + 'False'| translate}}
                                            </label>
                                            <div class="error,help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded">
                                                <span class="help-block" ng-show="col.filterValFirstInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                            </div>
                                        </div>
                                        <!--Date Value-->
                                        <div class="col-md-5" ng-class="{'has-error': ((col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded) || otherFilterForm.filterValFirst.$invalid}" ng-if="col.dataType === 'timestamp'">
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" name="filterValFirst" ng-model="col.filterValFirst" is-open="col.first_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close" ng-change="col.filterValFirstInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" ng-click="open($event, col, 'first_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                </span>
                                            </div>
                                            <div class="error,help-block" ng-show="((col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded) || otherFilterForm.filterValFirst.$invalid">
                                                <span class="help-block" ng-show="(col.filterValFirstInvalid === true || col.filterValFirstMinInvalid === true) && isGlobalFilterAdded && otherFilterForm.filterValFirst.$valid">{{entity + "Enter filter value"| translate}}</span>
                                                <span class="help-block" ng-show="col.filterValFirstMinInvalid === true && isGlobalFilterAdded && otherFilterForm.filterValFirst.$valid">{{entity + "Invalid range value"| translate}}</span>
                                                <span class="help-block" ng-show="otherFilterForm.filterValFirst.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                <span class="help-block" ng-show="otherFilterForm.filterValFirst.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                <span class="help-block" ng-show="otherFilterForm.filterValFirst.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                            </div>
                                        </div> 

                                        <!--Second value-->
                                        <!--Int or Long Value-->
                                        <div class="col-md-5" ng-if="col.selectedFilterType === 'between' && col.dataType === 'int8'" ng-class="{'has-error': col.filterValSecondInvalid === true && isGlobalFilterAdded}">
                                            <input type="text" ng-model="col.filterValSecond" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValSecond" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                            <div class="error,help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">
                                                <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                            </div>
                                        </div>
                                        <!--Double Value-->
                                        <div class="col-md-5" ng-if="col.selectedFilterType === 'between' && col.dataType === 'double precision'" ng-class="{'has-error': col.filterValSecondInvalid === true && isGlobalFilterAdded}">
                                            <input type="text" ng-model="col.filterValSecond" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValSecond" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                            <div class="error,help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">
                                                <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded">{{entity + "Enter filter value"| translate}}</span>
                                            </div>
                                        </div>
                                        <!--Date Value-->
                                        <div class="col-md-5" ng-class="{'has-error': (col.filterValSecondInvalid === true && isGlobalFilterAdded) || otherFilterForm.filterValSecond.$invalid}" ng-if="col.selectedFilterType === 'between' && col.dataType === 'timestamp'">
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" name="filterValSecond" ng-model="col.filterValSecond" is-open="col.second_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close" ng-change="col.filterValSecondInvalid = false; col.filterValFirstMinInvalid = false;"/>
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" ng-click="open($event, col, 'second_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                </span>
                                            </div>
                                            <div class="error,help-block" ng-show="(col.filterValSecondInvalid === true && isGlobalFilterAdded) || otherFilterForm.filterValSecond.$invalid">
                                                <span class="help-block" ng-show="col.filterValSecondInvalid === true && isGlobalFilterAdded && otherFilterForm.filterValSecond.$valid">{{entity + "Enter filter value"| translate}}</span>
                                                <span class="help-block" ng-show="otherFilterForm.filterValSecond.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                <span class="help-block" ng-show="otherFilterForm.filterValSecond.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                <span class="help-block" ng-show="otherFilterForm.filterValSecond.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-1">
                                        <div>
                                            <span class="glyphicon glyphicon-plus-sign text-primary" ng-click="addFilter(col, $index, 'otherColumns')"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" ng-if="col.selectedFilterTypesList !== undefined && col.selectedFilterTypesList !== null && col.selectedFilterTypesList.length > 0">
                                    <div class="col-md-6 pull-right">
                                        <span style="cursor: pointer;" class="accordion-toggle text-info" data-toggle="collapse" data-target="#filterOthersCollapse{{$index}}">
                                            One or More Filters Added&nbsp;<span class="glyphicon glyphicon-eye-open " title="{{entity + 'View Filters'|translate}}"></span>
                                        </span>
                                        <div id="{{'filterOthersCollapse' + $index}}" class="collapse col-md-11">
                                            <table class="table" style="table-layout: fixed">
                                                <thead>
                                                    <tr>
                                                        <th class="col-md-4">Filter Type</th>
                                                        <th class="col-md-7">Filter Value</th>
                                                        <th class="col-md-2 text-right">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="filterDetail in col.selectedFilterTypesList">
                                                        <td><span>{{filterDetail.filterLabel}}</span></td>
                                                        <td style="word-wrap: break-word">
                                                            <span ng-if="col.componentType !== 'UserMultiSelect' && col.dataType !== 'timestamp'">{{filterDetail.filterValFirst}}</span>
                                                            <span ng-if="col.dataType === 'timestamp'">{{filterDetail.filterValFirst| date}}</span>
                                                            <span ng-if="col.componentType === 'UserMultiSelect'">{{filterDetail.userMultiSelectLabel}}</span>
                                                            <span ng-if="filterDetail.filter === 'between'">&nbsp;to&nbsp;</span>
                                                            <span ng-if="filterDetail.filter === 'between' && col.dataType !== 'timestamp'">{{filterDetail.filterValSecond}}</span>
                                                            <span ng-if="filterDetail.filter === 'between' && col.dataType === 'timestamp'">{{filterDetail.filterValSecond| date}}</span>
                                                        </td>
                                                        <td><a class="close" href="" ng-click="removeFilter($index, $parent.$index, 'otherColumns')">&times;</a></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <!--<hr/>-->
                            <br/>
                            <div class="col-xs-12">
                                <div>
                                    <h4> <input type="checkbox" name="groupByCheck" id="groupByCheck" ng-model="isGroupByCheck" ng-change="updateGroupConfig(isGroupByCheck)"/>&nbsp;
                                        {{entity + "Configure Group By"| translate}}</h4>
                                </div>
                                <br/>
                                <div ng-if="isGroupByCheck">
                                    <div class="form-group row required">
                                        <label for="groupByFields" class="col-md-3 control-label">{{entity + 'Level ' + (groupByLevels.length + 1) + ' Group By Fields ' | translate}}</label>
                                        <div class="col-md-3" ng-class="{'has-error': configureForm.groupByFields.$invalid && (configureForm.groupByFields.$dirty || subbmited)}">
                                            <input type="text" class="col-md-12 hkg-nopadding" ng-required="groupByLevels.length === 0" name="groupByFields" id="groupByFields" ui-select2="selectGroupByFields" ng-model="groupInfo.groupByColumns"/>
                                            <div class="error,help-block" ng-show="(configureForm.groupByFields.$dirty || subbmited) && configureForm.groupByFields.$invalid">
                                                <span class="help-block" ng-show="configureForm.groupByFields.$error.required">{{entity + 'Select Group By Fields'| translate }}</span>
                                            </div>
                                        </div>
                                        <div class="col-md-1 text-right">
                                            <a href="" class="glyphicon glyphicon-plus-sign text-primary" ng-click="addGroupByLevel()"></a>
                                        </div>
                                    </div>
                                    <div class="form-group row" ng-if="groupByLevels.length > 0">
                                        <div class="col-md-9">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th class="col-md-2">
                                                            {{"Level"| translate}}
                                                        </th>
                                                        <th class="col-md-3">
                                                            {{"Group By Items"| translate}}
                                                        </th>
                                                        <th class="col-md-1 text-left">
                                                            {{"Remove"| translate}}
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tr ng-repeat="level in groupByLevels">
                                                    <td>
                                                        <span>Level {{$index + 1}}</span>
                                                    </td>
                                                    <td>
                                                        <span>{{level.groupByItemLabels}}</span>
                                                    </td>
                                                    <td><a class="close" style="float: left" href="" ng-click="removeGroupByLevel($index)">&times;</a></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
<!--                                    <div class="form-group row">
                                        <div class="col-md-9">
                                            <table class="table">
                                                <thead>
                                                    <tr ng-form="groupForm">
                                                        <th class="col-md-1">
                                                            {{"Order"| translate}}
                                                        </th>
                                                        <th class="col-md-1">
                                                            {{entity + "Sr.No."| translate}}
                                                        </th>
                                                        <th class="col-md-3 text-center">
                                                            {{entity + "Grouped Items"| translate}}
                                                        </th>
                                                        <th class="col-md-3 text-center">
                                                            {{entity + "Group Name"| translate}}
                                                        </th>
                                                        <th class="col-md-1"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-form="groupForm">
                                                        <td class="col-md-1"></td>
                                                        <td class="col-md-1">
                                                            {{"Group " + (groups.length + 1)}}
                                                        </td>
                                                        <td class="col-md-3" ng-class="{'has-error': groupInfo.isGroupAdded && groupInfo.isGroupFieldsEmpty}">
                                                            <input type="text" class="col-md-10 hkg-nopadding pull-right" name="groupFields" id="groupFields" ui-select2="selectGroups" ng-model="groupInfo.selectedGroup" ng-change="groupInfo.isGroupFieldsEmpty = false;"/>
                                                            <div class="error,help-block col-md-10 pull-right" ng-show="groupInfo.isGroupAdded && groupInfo.isGroupFieldsEmpty">
                                                                <span class="help-block" ng-show="groupInfo.isGroupFieldsEmpty">{{entity + 'Select Fields for group'| translate }}</span>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-3">
                                                            <div class="col-md-12" ng-class="{'has-error': groupInfo.isGroupAdded && (groupInfo.isGroupNameEmpty || groupInfo.isGroupNameDuplicate)}" ng-if="groups.length > 0">
                                                                <input type="text" ng-model="groupInfo.groupName" maxlength="20" class="form-control" id="groupName" name="groupName" placeholder="{{entity + 'Group Name'| translate}}" ng-blur="checkGroupNameExists(groupInfo.groupName, groupForm.groupName, false, null)" ng-change="groupInfo.isGroupNameDuplicate = false; groupInfo.isGroupNameEmpty = false;"/>
                                                                <div class="error,help-block" ng-show="groupInfo.isGroupAdded && (groupInfo.isGroupNameEmpty || groupInfo.isGroupNameDuplicate)">
                                                                    <span class="help-block" ng-show="groupInfo.isGroupNameEmpty">{{entity + "Enter group name"| translate}}</span>
                                                                    <span class="help-block" ng-show="groupInfo.isGroupNameDuplicate">{{entity + "Duplicate name"| translate}}</span>
                                                                    <span class="help-block" ng-show="groupInfo.groupName.$error.maxlength">{{ entity + "Maximum 20 characters" | translate }}</span>
                                                                </div>
                                                            </div>
                                                            <div ng-if="groups.length === 0">
                                                                <label class="col-md-12 text-center">N/A</label>
                                                            </div>
                                                        </td>
                                                        <td class="col-md-1">
                                                            <a href="" class="glyphicon glyphicon-plus-sign text-primary" ng-click="addGroup(groupForm)"></a>
                                                        </td>
                                                    </tr>

                                                    <tr ng-repeat="group in groups">
                                                        <td class="col-md-1">
                                                            <span class="glyphicon glyphicon-arrow-up" ng-click="shiftGroupUp($index)"/>
                                                            <span class="glyphicon glyphicon-arrow-down" ng-click="shiftGroupDown($index)"/>
                                                        </td>
                                                        <td class="col-md-1"><span>Group {{$index + 1}}</span></td>
                                                        <td class="col-md-3"><span>{{group.groupItemLabels}}</span></td>
                                                        <td class="col-md-3">
                                                            <span ng-if="$index > 0 && groups.length > 1" class="col-md-12">{{group.groupName}}</span>
                                                            <span ng-if="groups.length > 1 && $index === 0" class="col-md-12">
                                                                <div ng-class="{'has-error': configureForm.cmpGroupName.$invalid && (configureForm.cmpGroupName.$dirty || subbmited)}">
                                                                    <input type="text" class="form-control" maxlength="20" required name="cmpGroupName" id="cmpGroupName" ng-model="group.groupName" ng-blur="checkGroupNameExists(group.groupName, configureForm.cmpGroupName, true, $index);" ng-change="configureForm.cmpGroupName.$setValidity('exists', true);"/>
                                                                    <div class="error,help-block" ng-show="(configureForm.cmpGroupName.$dirty || subbmited) && configureForm.cmpGroupName.$invalid">
                                                                        <span class="help-block" ng-show="configureForm.cmpGroupName.$error.required">{{entity + 'Select Group Name'| translate }}</span>
                                                                        <span class="help-block" ng-show="configureForm.cmpGroupName.$error.exists">{{entity + 'Group name exists'| translate }}</span>
                                                                    </div>
                                                                </div>
                                                            </span>
                                                        </td>
                                                        <td class="col-md-1"><a class="close" style="float: left" href="" ng-click="removeGroup($index)">&times;</a></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>-->
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-xs-12">
                                <div class="row">
                                    <hr/>
                                    <div class="col-xs-12 pull-right text-right">
                                        <a href="" ng-click="resetReport(reportDesignerForm)">
                                            {{ entity + 'Cancel' | translate}}
                                        </a>
                                        <button class="btn btn-hkg" ng-click="persistGroupChanges(); tabs[0].active = true">{{entity + "Back"| translate}}</button>
                                        <button class="btn btn-hkg" ng-click="tabs[2].disabled = false;
                                                    tabs[2].active = true;
                                                    navigateToComponent();
                                                    submitColumnConfigurations(configureForm, tabs)">{{entity + "Next"| translate}}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--</ng-form>-->
                    </div>
                    <!--                <div ng-if="columns.length === 0">
                                        <div class="form-group">
                                            <div class="col-md-2">
                                                <label class="control-label">{{entity + "Columns"| translate}}</label>
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label">{{entity + "Column Alias"| translate}}</label>
                                            </div>
                                            <div class="col-md-1">
                                                <label>{{entity + "i18n required"| translate}}</label>
                                            </div>
                                            <div class="col-md-2">
                                                <label class="control-label">{{entity + "Column Format"| translate}}</label>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="control-label">{{entity + "Column Filter"| translate}}</label>
                                            </div>
                                        </div>
                                        <ng-form name="filterForm">
                                            <div class="form-group" ng-repeat="cols in columnNameForAlias">
                                                <div class="col-md-2">
                                                    <span class="glyphicon glyphicon-arrow-up" ng-click="shiftColUp($index)"/>
                                                    <span class="glyphicon glyphicon-arrow-down" ng-click="shiftColDown($index)"/>
                                                    {{cols.text}}
                                                </div>
                                                <div class="col-md-2">
                                                    <input type="text" ng-model="cols.alias" class="form-control input-sm"/>
                                                </div>
                                                <div class="col-md-1">
                                                    <input type="checkbox" ng-model="cols.colI18nRequired"/>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control" 
                                                            ng-model="cols.format"
                                                            ng-options="format.format as format.format for format in col.availableColumnFormats" ng-disabled='cols.converterDataBeanList.length > 0'>
                                                        <option value="">{{entity + 'Select Format'| translate}}</option>
                                                    </select> 
                                                </div>
                    
                                                <div class="col-md-2" ng-class="{'has-error': filterForm.filterType.$invalid}">
                                                    <select class="form-control" ng-options="filterType for filterType in col.availableFilterTypes" ng-model="cols.selectedFilterType" name="filterType">
                                                        <option value="">{{entity + 'Select Filter'|translate}}</option>
                                                    </select>
                                                    <div class="error,help-block" ng-show="(filterForm.filterType.$dirty) && filterForm.filterType.$invalid">
                                                        <span class="help-block" ng-show="filterForm.filterType.$error.required">{{entity + "Select filter type"| translate}}</span>
                                                    </div>
                                                </div>
                                                <div ng-if="cols.selectedFilterType !== undefined && cols.selectedFilterType !== null">
                                                    First Value
                                                    String Value
                                                    <div class="col-md-2" ng-if="cols.dataType === 'varchar'" ng-class="{'has-error': filterForm.filterValFirst.$invalid}">
                                                        <div class="form-control hkg-nopadding">
                                                            <input type="text" ng-model="cols.filterValFirst" ui-select2="col.availableFilterValueSelect" class="col-md-12 hkg-nopadding" name="filterValFirst" required ng-minlength="1"/>
                                                        </div>
                                                        <div class="error,help-block" ng-show="(filterForm.filterValFirst.$dirty) && filterForm.filterValFirst.$invalid">
                                                            <span class="help-block" ng-show="filterForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                        </div>
                                                    </div>
                                                    Int or Long Value
                                                    <div class="col-md-2" ng-if="cols.dataType !== 'varchar' && col.dataType !== 'timestamp'" ng-class="{'has-error': filterForm.filterValFirst.$invalid}">
                                                        <input type="text" ng-model="cols.filterValFirst" class="form-control" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" required/>
                                                        <div class="error,help-block" ng-show="(filterForm.filterValFirst.$dirty) && filterForm.filterValFirst.$invalid">
                                                            <span class="help-block" ng-show="filterForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                        </div>
                                                    </div>
                                                    Date Value
                                                    <div class="col-md-2" ng-class="{'has-error': filterForm.filterValFirst.$invalid}" ng-if="cols.dataType === 'timestamp'">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control" datepicker-popup="{{format}}" name="filterValFirst" required ng-model="cols.filterValFirst" is-open="dt.first_dt_inp_opnd" datepicker-options="dateOptions" ng-required="true" close-text="Close"/>
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-default" ng-click="open($event, 'first_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                            </span>
                                                        </div>
                                                        <div class="error,help-block" ng-show="(filterForm.filterValFirst.$dirty) && filterForm.filterValFirst.$invalid">
                                                            <span class="help-block" ng-show="filterForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                        </div>
                                                    </div>   
                                                    Second value
                                                    Int or Long Value
                                                    <div class="col-md-2" ng-if="cols.selectedFilterType === 'between' && cols.dataType !== 'timestamp'" ng-class="{'has-error': filterForm.filterValSecond.$invalid}">
                                                        <input type="text" ng-model="cols.filterValSecond" class="form-control" placeholder="{{entity + 'Filter Value'| translate}}" required name="filterValSecond"/>
                                                        <div class="error,help-block" ng-show="(filterForm.filterValSecond.$dirty) && filterForm.filterValSecond.$invalid">
                                                            <span class="help-block" ng-show="filterForm.filterValSecond.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                        </div>
                                                    </div>
                                                    Date Value
                                                    <div class="col-md-2" ng-class="{'has-error': filterForm.filterValSecond.$invalid}" ng-if="cols.selectedFilterType === 'between' && cols.dataType === 'timestamp'">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control" datepicker-popup="{{format}}" name="filterValSecond" required ng-model="cols.filterValSecond" is-open="dt.second_dt_inp_opnd" datepicker-options="dateOptions" ng-required="true" close-text="Close"/>
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-default" ng-click="open($event, 'second_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                            </span>
                                                        </div>
                                                        <div class="error,help-block" ng-show="(filterForm.filterValSecond.$dirty) && filterForm.filterValSecond.$invalid">
                                                            <span class="help-block" ng-show="filterForm.filterValSecond.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                        </div>
                                                    </div>   
                                                </div>
                    
                                                <div class="col-md-2">
                                                    <a href="" ng-if="cols.format === null" ng-click="addConverterForColumn($index)">{{entity + "Add Converter"| translate}}</a>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-xs-12">
                                                    <div class="row">
                                                        <hr/>
                                                        <div class="col-xs-12 pull-right text-right">
                                                            <a href="" ng-click="resetReport()">
                                                                {{ entity + 'Cancel' | translate}}
                                                            </a>
                                                            <button class="btn btn-hkg" ng-click="tabs[0].active = true">{{entity + "Back"| translate}}</button>
                                                            <button class="btn btn-hkg" ng-click="tabs[2].disabled = false;
                                                                tabs[2].active = true;
                                                                navigateToComponent();
                                                                submitColumnConfigurations()" ng-disabled="filterForm.$invalid">{{entity + "Next"| translate}}</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-form>
                                    </div>-->
                    <!--Add Converter popup-->
                    <div class="modal fade bs" role="dialog" id="addConverter" tabindex="-1" aria-hidden="true">
                        <div class="modal-dialog modal-sm">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <a class="close" href="" data-dismiss="modal">&times;</a>
                                    <h4 class="modal-title" id="myModalLabel">{{entity + "Add Converter"| translate}}</h4>
                                </div >
                                <div class="modal-body">
                                    <div class="col-md-12">
                                        <div class="col-md-5">
                                            {{entity + "Key"| translate}}
                                        </div>
                                        <div class="col-md-5">
                                            {{entity + "Value"| translate}}
                                        </div>
                                    </div>
                                    <div class="col-md-12 form-group" ng-repeat="converter in selectedColumnConverter.converterDataBeanList">
                                        <ng-form name="converterForm">
                                            <div class="col-md-5" ng-class="{'has-error': converterForm.converterKey.$invalid}">
                                                <input type="text" ng-model="converter.key" class="form-control input-sm" name="converterKey" required/>
                                                <div class="error,help-block" ng-show="(converterForm.converterKey.$dirty || converterSaved) && converterForm.converterKey.$invalid">
                                                    <span class="help-block small" ng-show="converterForm.converterKey.$error.required">{{entity + "Enter key"| translate}}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-5" ng-class="{'has-error': converterForm.converterValue.$invalid}">
                                                <input type="text" ng-model="converter.value" class="form-control input-sm" name="converterValue" required/>
                                                <div class="error,help-block" ng-show="(converterForm.converterValue.$dirty || converterSaved) && converterForm.converterValue.$invalid">
                                                    <span class="help-block small" ng-show="converterForm.converterValue.$error.required">{{entity + "Enter value"| translate}}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <a class="close" href="" ng-click="removeConverterKeyValue($index)">&times;</a>
                                            </div>
                                        </ng-form>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-xs-12">
                                            <div class="row">
                                                <hr/>
                                                <div class="col-xs-12 pull-right text-right">
                                                    <button class="btn btn-hkg" ng-click="addConverterKeyValue()">{{entity + "Add"| translate}}</button>
                                                    <button class="btn btn-hkg" ng-click="saveConverterKeyValue()">{{entity + "Save"| translate}}</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </tab>

                <!--Preview report tab-->
                <tab active="tabs[2].active" disabled="tabs[2].disabled" id="previewReportTab">
                    <tab-heading>
                        {{entity + "Preview Report"| translate}}
                    </tab-heading>
                    <br/>
                    <div ng-form="colorConfigForm">
                        <div class="row">
                            <div class="col-md-2 text-right">
                                <h5>{{ entity + "Color Combination: " | translate}}</h5>
                            </div>
                        </div>
                        <div ng-if="colorConfigData.length > 0">
                            <div class="row" ng-repeat="colorCombination in colorConfigData" ng-form="colorCombinationForm">
                                <div class="col-md-8 col-md-offset-2">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <select class="form-control" ng-model="colorCombination.combinationType" ng-options="combinationType.id as combinationType.text for combinationType in colorCombination.combinationTypes" name="colorCombination" data-placeholder="{{entity + 'Select Combination'| translate}}">
                                                    </select>
                                                </div>
                                                <div class="col-md-4">
                                                    <select class="form-control" ng-change="updateColorColumnFilter(colorCombination.currentColumn, $index)" ng-model="colorCombination.currentColumn" ng-options="colorColumn as colorColumn.label for colorColumn in colorCombination.colorColumns" name="colorColumn" data-placeholder="{{entity + 'Select Column'| translate}}">
                                                        <option value="">Select Column</option>
                                                    </select>
                                                </div>
                                                <!--                                        <div class="col-md-1" ng-if="colorConfig.currentColumn !== undefined">
                                                                                            <span class="glyphicon glyphicon-plus-sign text-primary"></span>&nbsp;<a class="pull-right" ></a>
                                                                                        </div>-->
                                                <div class="col-md-4" ng-class="{'has-error': colorCombinationForm.colorName.$invalid}">
                                                    <input colorpicker colorpicker-position="bottom" ng-style="{'background-color' : (colorCombination.colorName === undefined ? 'white' : colorCombination.colorName)}" type="text" ng-model="colorCombination.colorName" class="form-control" placeholder="{{entity + 'Color Name'| translate}}" ng-required="colorCombination.columns.length > 0" name="colorName"/>
                                                    <div class="error,help-block" ng-show="colorCombinationForm.colorName.$invalid">
                                                        <span class="help-block" ng-show="colorCombinationForm.colorName.$error.required">{{entity + "Enter color name"| translate}}</span>
                                                    </div>
                                                </div>
                                                <div class="col-md-1">
                                                    <a class="close pull-right" href="" ng-click="removeColorCombination($index)" title="Remove All Filters">&times;</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel-body">
                                            <div ng-if="colorCombination.columns.length > 0">
                                                <div>
                                                    <table class="table table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th class="col-md-3">{{entity + "Column Name"| translate}}</th>
                                                                <th class="col-md-4">{{entity + "Selection Operator"| translate}}</th>
                                                                <th class="col-md-4">{{entity + "Selection Value"| translate}}</th>
                                                                <th class="col-md-1">{{entity + "Action"| translate}}</th>
                                                            </tr>
                                                        </thead>
                                                        <tr ng-repeat="colorConfig in colorCombination.columns" ng-form="colorForm">
                                                            <td>{{colorConfig.label}}</td>
                                                            <td>
                                                                <div ng-class="{'has-error': colorForm.colorFilterOperator.$invalid}">
                                                                    <select class="form-control" ng-model="colorConfig.operator" ng-options="colorFilterOperator.id as colorFilterOperator.text for colorFilterOperator in colorConfig.filters" name="colorFilterOperator" data-placeholder="{{entity + 'Select Operator'| translate}}" required>
                                                                        <option value="">Select Operator</option>
                                                                    </select>
                                                                    <div class="error,help-block" ng-show="colorForm.colorFilterOperator.$invalid">
                                                                        <span class="help-block" ng-show="colorForm.colorFilterOperator.$error.required">{{entity + "Enter selection operator"| translate}}</span>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div ng-if="colorConfig.operator !== undefined && colorConfig.operator !== 'is null' && colorConfig.operator !== 'is not null'">
                                                                    <!--First Value-->
                                                                    <!--String Value-->
                                                                    <div ng-if="colorConfig.type === 'varchar' && colorConfig.operator === '='" ng-class="{'has-error': colorForm.filterValFirst.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValue" ui-select2="colorConfig.availableFilterValueSelectEqual" class="col-md-12 hkg-nopadding" name="filterValFirst" required/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValFirst.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div ng-if="colorConfig.type === 'varchar' && colorConfig.operator === '!='" ng-class="{'has-error': colorForm.filterValFirst.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValue" ui-select2="colorConfig.availableFilterValueSelectNotEqual" class="col-md-12 hkg-nopadding" name="filterValFirst" required/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValFirst.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div ng-if="colorConfig.type === 'varchar' && colorConfig.operator === 'in'" ng-class="{'has-error': colorForm.filterValFirst.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValue" ui-select2="colorConfig.availableFilterValueSelectIn" class="col-md-12 hkg-nopadding" name="filterValFirst" required/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValFirst.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div ng-if="colorConfig.type === 'varchar' && colorConfig.operator === 'not in'" ng-class="{'has-error': colorForm.filterValFirst.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValue" ui-select2="colorConfig.availableFilterValueSelectNotIn" class="col-md-12 hkg-nopadding" name="filterValFirst" required/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValFirst.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div ng-if="colorConfig.type === 'varchar' && colorConfig.operator === 'like'" ng-class="{'has-error': colorForm.filterValFirst.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValue" class="form-control" name="filterValFirst" required placeholder="{{entity + 'Filter Value'| translate}}"/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValFirst.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <!--Int or Long Value-->
                                                                    <div ng-if="colorConfig.type === 'int8' && colorConfig.operator !== undefined" ng-class="{'has-error': colorForm.filterValFirst.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValue" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" required ng-change="checkValidColorRange('between', 'int8', colorConfig.filterValue, colorConfig.filterValueSecond, colorForm.filterValFirst, colorForm.filterValSecond)"/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValFirst.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.invalidRange">{{entity + "Invalid Range value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <!--Double Value-->
                                                                    <div ng-if="colorConfig.type === 'double precision' && colorConfig.operator !== undefined" ng-class="{'has-error': colorForm.filterValFirst.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValue" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" name="filterValFirst" required ng-change="checkValidColorRange('between', 'double precision', colorConfig.filterValue, colorConfig.filterValueSecond, colorForm.filterValFirst, colorForm.filterValSecond)"/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValFirst.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.invalidRange">{{entity + "Invalid Range value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <!--Boolean Value-->
                                                                    <div ng-if="colorConfig.type === 'boolean'" ng-class="{'has-error': colorForm.colorFilterValFirst{{$index}}.$invalid}">
                                                                        <label class="radio-inline">
                                                                            <input type="radio" name="colorFilterValFirst{{$index}}" value="true" ng-model="colorConfig.filterValue">
                                                                            {{entity + 'True'| translate}} 
                                                                        </label>
                                                                        <label class="radio-inline">

                                                                            <input type="radio" name="colorFilterValFirst{{$index}}" value="false" ng-model="colorConfig.filterValue">
                                                                            {{entity + 'False'| translate}}
                                                                        </label>
                                                                        <div class="error,help-block" ng-show="colorForm.colorFilterValFirst{{$index}}.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.colorFilterValFirst{{$index}}.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <!--Date Value-->
                                                                    <div ng-class="{'has-error': colorForm.filterValFirst.$invalid}" ng-if="colorConfig.type === 'timestamp' && colorConfig.operator !== undefined">
                                                                        <div class="input-group">
                                                                            <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" id="filterValFirst" name="filterValFirst" required ng-model="colorConfig.filterValue" is-open="colorConfig.first_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close"ng-change="checkValidColorRange('between', 'timestamp', colorConfig.filterValue, colorConfig.filterValueSecond, colorForm.filterValFirst, colorForm.filterValSecond)"/>
                                                                            <span class="input-group-btn">
                                                                                <button class="btn btn-default" ng-click="open($event, colorConfig, 'first_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                            </span>
                                                                        </div>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValFirst.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.required && !(colorForm.filterValFirst.$error.date || colorForm.filterValFirst.$error.min || colorForm.filterValFirst.$error.max)">
                                                                                {{ entity + "Enter filter value" | translate }}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.invalidRange">{{entity + "Invalid Range value"| translate}}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValFirst.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div ng-if="colorConfig.operator === 'between'" class="text-center">
                                                                    &nbsp;To&nbsp;<br/>
                                                                </div>
                                                                <div>
                                                                    <!--Second value-->
                                                                    <!--Int or Long Value-->
                                                                    <div ng-if="colorConfig.operator === 'between' && colorConfig.type === 'int8'" ng-class="{'has-error': colorForm.filterValSecond.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValueSecond" class="form-control" numbers-only="numbers-only" placeholder="{{entity + 'Filter Value'| translate}}" required name="filterValSecond" ng-change="checkValidColorRange('between', 'int8', colorConfig.filterValue, colorConfig.filterValueSecond, colorForm.filterValFirst, colorForm.filterValSecond)"/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValSecond.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.invalidRange">{{entity + "Invalid Range value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <!--Double Value-->
                                                                    <div ng-if="colorConfig.operator === 'between' && colorConfig.type === 'double precision'" ng-class="{'has-error': colorForm.filterValSecond.$invalid}">
                                                                        <input type="text" ng-model="colorConfig.filterValueSecond" class="form-control" numbers-only="numbers-only" decimalallowed ="true" placeholder="{{entity + 'Filter Value'| translate}}" required name="filterValSecond" ng-change="checkValidColorRange('between', 'double precision', colorConfig.filterValue, colorConfig.filterValueSecond, colorForm.filterValFirst, colorForm.filterValSecond)"/>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValSecond.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.required">{{entity + "Enter filter value"| translate}}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.invalidRange">{{entity + "Invalid Range value"| translate}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <!--Date Value-->
                                                                    <div ng-class="{'has-error': colorForm.filterValSecond.$invalid}" ng-if="colorConfig.operator === 'between' && colorConfig.type === 'timestamp'">
                                                                        <div class="input-group">
                                                                            <input type="text" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" id="filterValSecond" name="filterValSecond" required ng-model="colorConfig.filterValueSecond" is-open="colorConfig.second_dt_inp_opnd" datepicker-options="dateOptions" close-text="Close"ng-change="checkValidColorRange('between', 'timestamp', colorConfig.filterValue, colorConfig.filterValueSecond, colorForm.filterValFirst, colorForm.filterValSecond)"/>
                                                                            <span class="input-group-btn">
                                                                                <button class="btn btn-default" ng-click="open($event, colorConfig, 'second_dt_inp_opnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                            </span>
                                                                        </div>
                                                                        <div class="error,help-block" ng-show="colorForm.filterValSecond.$invalid">
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.required && !(colorForm.filterValSecond.$error.date || colorForm.filterValSecond.$error.min || colorForm.filterValSecond.$error.max)">
                                                                                {{ entity + "Enter filter value" | translate }}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.invalidRange">{{entity + "Invalid Range value"| translate}}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                                            <span class="help-block" ng-show="colorForm.filterValSecond.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <a class="close pull-right" href="" ng-click="removeColor($index, $parent.$index)" title="Remove Filter">&times;</a>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                            <div ng-if="colorCombination.columns.length === 0" class="text-center">
                                                No columns are selected.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-8 col-md-offset-2 text-right">
                                    <a href="" class="glyphicon glyphicon-plus-sign text-primary" title="Add Color Combination" ng-click="addColorCombination()"></a>
                                </div>
                            </div>
                        </div>
                        <div ng-if="colorConfigData.length > 0" class="row">
                            <div class="col-xs-12 pull-right text-right"> 
                                <button class="btn btn-hkg" ng-click="applyColor(colorConfigForm, false)">
                                    <span ng-bind="entity + 'Apply Color' | translate"></span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 row">
                        <div class="row">
                            <div ng-repeat="(zone, list) in resultModels.dropzones" class="col-md-12">
                                <div class="dropzone  box-grey">
                                    <!-- The dropzone also uses the list template -->
                                    <div ng-include="'list.html'" id="exportZones" class='export-table'></div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!--                    <div>
                                            <div class="table-responsive" ng-if="false">
                                                <table ag-data-table="previewData" class="table table-bordered">
                                                    <thead ng-if="isGroupByCheck && groups.length > 1">
                                                        <tr>
                                                            <th rowspan="2">Sr No.</th>
                                                            <th ng-repeat='col in modifiedColumns' class="text-center" rowspan="{{(col.isGroup === undefined|| col.isGroup === false)? 2 : 1}}" colspan="{{(col.isGroup !== undefined && col.isGroup === true) ? col.groupItems.length : 1}}">
                                                                <span ng-if="col.isGroup === undefined || col.isGroup === false">
                                                                    <span ng-if="col.alias !== undefined || col.alias !== ''">{{col.alias}}</span>
                                                                    <span ng-if="col.alias == undefined || col.alias == ''">{{col.fieldLabel}}</span>
                                                                </span>
                                                                <span ng-if="col.isGroup !== undefined && col.isGroup === true">
                                                                    {{col.groupName}}
                                                                </span>
                                                            </th>
                                                        </tr>
                                                        <tr>
                                                            <th ng-repeat="grpItem in groupItemListForPreviw">
                                                                <span>{{grpItem}}</span>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <thead ng-if="!(isGroupByCheck && groups.length > 1)">
                                                        <tr>
                                                            <th>Sr No.</th>
                                                            <th ng-repeat='col in modifiedCurrencyColumns'>
                                                                <span ng-if="col.alias !== undefined || col.alias !== ''">{{col.alias}}</span>
                                                                <span ng-if="col.alias == undefined || col.alias == ''">{{col.fieldLabel}}</span>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody ng-if="!isGroupByCheck">
                                                        <tr ng-repeat="row in UIPreviewData">
                                                            <td ng-style="{'background-color' : (row.rowColor === undefined ? 'white' : row.rowColor)}">{{((currentPage - 1) * 10) + ($index + 1)}}</td>
                                                            <td ng-repeat="col in modifiedCurrencyColumns" ng-style="{'background-color': row[col.alias].color}" ng-show="(col.isHide === undefined || col.isHide === false)" ng-class="{'text-right': (col.dataType === 'int8' || col.dataType === 'double precision')}">
                                                                <span class="wordRap" ng-if="(col.dataType !== 'timestamp' && col.componentType !== 'Percent' && col.componentType !== 'Angle' && col.componentType !== 'Currency')">{{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value}}</span>
                                                                <span class="wordRap" ng-if="(col.dataType === 'timestamp')"> {{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value | date : 'dd/MM/yyyy'}}</span>
                                                                <span class="wordRap" ng-if="(col.componentType === 'Percent')">{{row[col.alias].value === undefined|| row[col.alias].value === null ? 'N/A' : row[col.alias].value | number:2}} %</span>
                                                                <span class="wordRap" ng-if="(col.componentType === 'Angle')">{{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value | number:2}} °</span>
                                                                <span class="wordRap" ng-if="(col.componentType === 'Currency')">{{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value | formatCurrency: col.format}}{{' ' + col.currencySymbol}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-center"></td>
                                                            <td ng-repeat="col in modifiedCurrencyColumns" class="text-center" ng-show="(col.isHide === undefined || col.isHide === false)">
                                                                <span ng-if="col.showTotal === true">Total: {{col.total|number:2}}</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                    
                                                    <tbody ng-if="isGroupByCheck" ng-repeat="group in UIPreviewData">
                                                        <tr ng-repeat="row in group.groupRows">
                                                            <td ng-style="{'background-color' : (row.rowColor === undefined ? 'white' : row.rowColor)}" ng-if="$index === 0" style="vertical-align: middle" rowspan="{{group.rowCount}}">{{((currentPage - 1) * 10) + group.index}}</td>
                                                            <td ng-repeat="col in modifiedCurrencyColumns" ng-show="(checkToRender(group, row, col.level, $parent.$index) && (col.isHide === undefined || col.isHide === false))" rowspan="{{checkRowSpan(group, row, col.level, $parent.$index)}}" style="vertical-align: middle" ng-style="{'background-color': row[col.alias].color}"
                                                                ng-class="{'text-right': (col.dataType === 'int8' || col.dataType === 'double precision')}">
                                                                <span>
                                                                    <span class="wordRap" ng-if="(col.dataType !== 'timestamp' && col.componentType !== 'Percent' && col.componentType !== 'Angle' && col.componentType !== 'Currency')">{{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value}}</span>
                                                                    <span class="wordRap" ng-if="(col.dataType === 'timestamp')"> {{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value | date : 'dd/MM/yyyy'}}</span>
                                                                    <span class="wordRap" ng-if="(col.componentType === 'Percent')">{{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value | number:2}} %</span>
                                                                    <span class="wordRap" ng-if="(col.componentType === 'Angle')">{{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value | number:2}} °</span>
                                                                    <span class="wordRap" ng-if="(col.componentType === 'Currency')">{{row[col.alias].value === undefined|| row[col.alias].value === null? 'N/A' : row[col.alias].value | formatCurrency: col.format}}{{' ' + col.currencySymbol}}</span>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                    <tbody ng-if="isGroupByCheck">
                                                        <tr>
                                                            <td class="text-center"></td>
                                                            <td ng-repeat="col in modifiedCurrencyColumns" class="text-center" ng-show="(col.isHide === undefined || col.isHide === false)">
                                                                <span ng-if="col.showTotal === true">Total: {{col.total|number:2}}</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                    
                                                </table>
                                                <div>
                                                    <pagination class="pagination-sm" boundary-links="true" max-size="5" total-items="totalItems" ng-model="currentPage" ng-click="setPage(currentPage)"></pagination>
                                                </div>
                                            </div>
                    -->                                            
                    <!--<div class="report-grid" ng-if="registerGrid && isAnyRecordsExist === true">
                                                                    <div class="grid" ui-grid="gridOptions" ui-grid-pagination ui-grid-auto-resize></div>
                                                                </div>-->
                    <!--
                                                                <div class="table-responsive" ng-if="isAnyRecordsExist === false">
                                                                    <div class="col-lg-12 col-md-12 col-xs-12">
                                                                        <table class="table table-bordered" >
                                                                            <tr>
                                                                                <td class="col-md-12">
                                                                                    {{entity + 'No Report Data Available'|translate}}
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>-->

                    <div class="form-group">
                        <div class="col-xs-12">
                            <div class="row">
                                <hr/>
                                <div class="col-xs-12 pull-right text-right">
                                    <a href="" ng-click="resetReport(reportDesignerForm)">
                                        {{ entity + 'Cancel' | translate}}
                                    </a>
                                    <button class="btn btn-hkg" ng-click="tabs[1].active = true">{{entity + "Back"| translate}}</button>
                                    <button class="btn btn-hkg" ng-click="saveReport(reportDesignerForm)">{{entity + "Save"| translate}}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </tab>

                <!--            Save report tab
                                <tab active="tabs[3].active" disabled="tabs[3].disabled">
                                    <tab-heading>
                                        Save Report
                                    </tab-heading>
                                    <br/>
                                    <div class="form-group">
                                        <div class="checkbox col-md-6 col-md-offset-1">
                                            <label>
                                                <input type="checkbox" ng-model="report.viewHtml"> View as HTML
                                            </label>
                                        </div>
                                        <div class="checkbox col-md-6 col-md-offset-1">
                                            <label>
                                                <input type="checkbox" ng-model="report.downloadExcel"> Download as Excel
                                            </label>
                                        </div>
                                        <div class="checkbox col-md-6 col-md-offset-1">
                                            <label>
                                                <input type="checkbox" ng-model="report.downloadPdf"> Download as PDF
                                            </label>
                                        </div>
                                    </div>
                                    <br/><br/><br/><br/>
                                    <div class="form-group">
                                        <div class="col-md-offset-3 col-md-12">
                                            <button class="btn btn-default" ng-click="tabs[2].active = true">Back</button>
                                            <button class="btn btn-default" >Save</button>
                                            <button class="btn btn-default" >Save and Download</button>
                                        </div>
                                    </div>
                            </tab>-->
            </tabset>

    </form>
</div>
<div class="modal fade" id="removePopup" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a class="close" ng-click="updateCancel()">&times;</a>
                <h4 class="modal-title">
                    {{ entity + "InActive Report" | translate }}
                </h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <div>
                        <span>{{ entity + "Do you want to remove the report ?" | translate }}</span><br/>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a ng-click="updateCancel()">{{ entity + "Cancel" | translate }}</a>
                <button class="btn btn-hkg" ng-click="updateOk()">
                    {{ entity + "Remove" | translate }}
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="renameElements" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <form name="renameTableForm" novalidate>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <a class="close" ng-click="cancelRenamePopup(renameTableForm)">&times;</a>
                    <h4 class="modal-title">
                        {{ entity + "Rename Fields" | translate }}
                    </h4>
                </div>
                <div class="modal-body">

                    <div class="form-group">
                        <label for="changeName" class="col-md-2 control-label" style="padding-right: 0px;padding-top: 5px">{{entity + "Field Name"| translate}}</label>
                        <div class="col-md-4 hkg-nopadding" ng-class="{'has-error': renameTableForm.changeName.$invalid && (renameTableForm.changeName.$dirty || renameSubmitted)}">
                            <input type="text" ng-model="changeText" ng-pattern="/^[^.]+$/" ng-required="true" required ng-blur="doesTableNameExists(changeText, renameTableForm)" ng-change="renameTableForm.changeName.$setValidity('exists', true)" class="form-control" id="changeName" name="changeName" required maxlength="50">
                            <div class="error,help-block" ng-show="(renameTableForm.changeName.$dirty || renameSubmitted) && renameTableForm.changeName.$invalid">
                                <span class="help-block" ng-show="renameTableForm.changeName.$error.required">{{ entity + 'Table Name not entered' | translate}}</span>
                                <span class="help-block" ng-show="renameTableForm.changeName.$error.exists">{{ entity + 'Table Name already exists' | translate}}</span>
                                <span class="help-block" ng-show="renameTableForm.changeName.$error.pattern">{{ entity + 'Table Name is invalid ' | translate}}</span>
                            </div>
                        </div>
                    </div>

                    <br/><br/>
                </div>
                <div class="modal-footer">
                    <a ng-click="cancelRenamePopup(renameTableForm)">{{ entity + "Cancel" | translate }}</a>
                    <button class="btn btn-hkg" ng-click="renameOk(renameTableForm)">
                        {{ entity + "Rename" | translate }}
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>


<!--------------------------------------------------->
<!-- Markup for lists inside the dropzone. It's inside a seperate template
     because it will be used recursively. The dnd-list directive enables
     to drop elements into the referenced array. The dnd-draggable directive
     makes an element draggable and will transfer the object that was
     assigned to it. If an element was dragged away, you have to remove
     it from the original list yourself using the dnd-moved attribute -->

<script type="text/ng-template" id="container.html">
    <div class="container-element">
    <h5>Table {{item.text}}<br><br></h5>
    <!--      <span>Ordered By: {{orderByField}}, Reverse Sort: {{reverseSort}}</span><br><br>-->
    <div style="min-width: 530px !important;overflow-x: scroll;" id="tableDiv">
    <table id="input" border=1 class='table container-element
    table-hover' style='width:98%;height:90px;border: 1px solid #ddd;'>
    <thead style="background-color: #b19acc;color: #fff"
    dnd-drop="dropColumnCallback(event, index, item, external, type,
    'itemType')" dnd-callback="dropColumnCallbackAfterSave(event, index, item, external, type,
    'itemType')"
    ng-repeat="list in item.columns" ng-include="'column.html'"
    dnd-list="list" dnd-allowed-types="item.allowedTypes">
    </thead>
    <tbody ng-repeat="list in item.searchData" dnd-list="list" dnd-allowed-types="['row']"
    dnd-drop="dropRowCallback(event, index, item, external, type,
    'itemType')" ng-include="'row.html'" >

    </tbody>
    </table>
    </div>
    </div>
</script>
<script type="text/ng-template" id="row.html">
    <tr ng-repeat-start="searchData in item.searchData[0]" ng-init="sectionIndex = $index"
    dnd-draggable="searchData" style="height:40px;"
    dnd-effect-allowed="move"
    dnd-moved="list.splice($index, 1)"
    dnd-type="'row'"
    >
    <td ng-style="{'background-color': searchData[colObj.text].color}" ng-repeat="colObj in item.columns[0]" class="text-center"
    >
    <div   ng-if="!searchData[colObj.text].grp" >
    <span type="text" style="border:none;height:30px;" 
    ng-if="!colObj.grpElement">{{searchData[colObj.text].value}}</span>
    </div>
    <span dnd-draggable="" dnd-nodrag dnd-selected="toggle(tableIndex,sectionIndex)" dnd-nodrag id="tblExpand{{$parent.$index + 1}}" ng-if="colObj.grpElement" style="font-size: 25px;cursor:pointer;color:#2165a3;vertical-align: middle;" 
    class="accordion-toggle" data-toggle="collapse" data-target=".tblFeatureId{{$parent.$index + 1}}"
    >
    <i class="fa fa-plus-circle" ng-if='(expandedFeatures.indexOf(("tblFeatureId"+tableIndex+"T"+(sectionIndex+1))) < 0)'>&nbsp;</i>
    <i class="fa fa-minus-circle" ng-if='(expandedFeatures.indexOf(("tblFeatureId"+tableIndex+"T"+(sectionIndex+1))) > -1)'>&nbsp;</i>

    </span>
    </td>
    </tr>

    <tr class="accordian-body collapse tblFeatureId{{(tableIndex+'T')+($index + 1)}}" ng-repeat-end=""
    >
    <td  ng-repeat="s in item.columns[0][sectionIndex + 1]" class="text-center"  style="height:40px !important;"
    >{{s.grpElement.values}}
    </td>
    </tr>
</script>
<script type="text/ng-template" id="column.html">

    <th height="35" ng-repeat="item in list" class=" text-center"
    dnd-draggable="item"
    dnd-type="item.type"
    dnd-effect-allowed="move"
    dnd-moved="list.splice($index, 1)"
    dnd-selected="models.selected = item;sort(tableIndex,item.text)"
    ng-class="{colselected: models.selected === item}">{{item.text}}
    <i class="fa fa-sort pull-right" >&nbsp;</i>
    <!--    <span ng-show="orderByField == item.colField" class="pull-right"><span ng-show="!reverseSort">^&nbsp;</span><span ng-show="reverseSort">v&nbsp;</span></span>-->
    </th>
</script>


<script type="text/ng-template" id="list.html">
    <ul style="list-style-type: none;" dnd-list="list" dnd-allowed-types="['container']">
    <li ng-repeat="item in list" ng-init="tableIndex = $index"
    dnd-draggable="item"
    dnd-effect-allowed="move"
    dnd-moved="list.splice($index, 1)"
    dnd-selected="models.selected = item"
    dnd-type="item.type"
    ng-class="{selected: models.selected === item}"
    ng-include="item.type + '.html'">
    </li>
    </ul>
</script>
<!--Template for a normal list item /-->
<script type="text/ng-template" id="item.html">
    <div class="item">Item {{item.id}}</div>
</script>