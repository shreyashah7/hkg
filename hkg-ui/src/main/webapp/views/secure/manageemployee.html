

<div class="row">
    <div class="col-xs-12"> 
        <div id='pageTop'></div>
        <div class="col-xs-12 breadcrumb-bg" >
            <div class="col-xs-12  col-lg-8" >
                <ol class="breadcrumb">
                    <li>{{entity + 'You are here'| translate}}</li>
                    <li>{{entity + 'Manage'| translate}}</li>
                    <li >{{entity + 'EMPLOYEE'|translate}} </li>
                    <li class="active" ng-show="isCreate && isAccessAddEmployee">{{entity + 'ADD EMPLOYEE'|translate}}</li>
                    <li class="active" ng-show="!isCreate && isAccessUpdateEmployee">{{entity + 'EDIT EMPLOYEE'|translate}}</li>                    
                </ol>
            </div>
            <div class="col-xs-12 col-lg-4 text-right context-menu" ng-show="!isCreate && isAccessAddEmployee"> 
                <span class="glyphicon glyphicon-plus-sign text-primary" title="{{entity + 'Add '|translate}}" ></span>&nbsp;
                <a style="cursor: pointer" class="pull-right" ng-click="openPage('C');">{{entity + 'ADD EMPLOYEE'|translate}}</a>
            </div>
        </div>

        <div class="col-xs-10 new-panel" id="mainPanel">
            <div class="row">
                <div class="col-xs-12" >
                    <form class="form-horizontal" role="form">
                        <div class="col-xs-12 col-lg-12 well well-sm">
                            <div class="input-group">
                                <div id="scrollable-dropdown-menu">
                                    <input class="typeahead" type="text" ng-model="searchtext" placeholder="Search for employees by name, IDs, designations" 
                                           ag-search="{{apipath}}employee/search" 
                                           result-format="empName,department" 
                                           on-select="retrieveEmployeeById" 
                                           on-enter="getSearchedEmployee"
                                           search-list-array='searchedEmployeeList'
                                           id="scrollable-dropdown-menu"/>
                                </div>
                                <span class="input-group-btn">
                                    <button class="btn btn-default btn-hkg" ng-click="getSearchedEmployee(searchedEmployeeList)" type="button" tooltip-html-unsafe="{{searchpopover}}"><span class="glyphicon glyphicon-search"></span></button>
                                </span>
                            </div>   
                            <span ng-show="isInValidSearch">{{entity + 'No matching results'| translate }}</span>   
                        </div>
                        <div class="clearfix"></div>
                        <div id="messages" ng-include src="'templates/messages.html'"></div>
                        <div ng-include src="'views/secure/searchedemployee.html'" ng-if="displayEmployeeFlag === 'search'"></div>

                    </form>
                </div>

                <div class="col-xs-12" ng-if="displayEmployeeFlag !== 'search' && ((isCreate && isAccessAddEmployee) || (!isCreate && isAccessUpdateEmployee))">
                    <div>
                        <form class="form-horizontal" role="form" name="add_employee_form" novalidate>

                            <div class="row " ng-class="{'is-disabled': isEmployeeRelieved}">
                                <div class="form-group" ng-init="registerLocationChangeEvent(add_employee_form)";>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="select_franchise" class="col-md-6 control-label">{{entity + 'Select Previous Franchise,If Any'|translate}}</label>
                                            <div class="col-md-6">
                                                <select class="form-control"  id="select_franchise" ng-model="employee.previousfranchiseId" ng-options="franchise.value as franchise.label for franchise in franchiseList" ng-change="searchEmployeeInPrevious(employee.previousfranchiseId)">
                                                    <option value="">{{entity + 'Select franchise'|translate}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6">
                                                <a ng-click="openChangePassword()" ng-show="!isCreate" title="Click to change password">{{entity + 'Change Password'|translate}}</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="isCreate && generalreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="generaldbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="generaltemplate" 
                                                   ng-model="generalData" ng-if="generaltemplate"  submit-flag-name="submitted" edit-flag="{{!isCreate}}"  is-diamond="false" no-of-field-per-row = "1">
                                    </dynamic-form> 
                                </div>
                                <div ng-if="!isCreate && generalreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="generaldbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="generaltemplate" 
                                                   ng-model="generalData" ng-if="generaltemplate"  submit-flag-name="submitted" edit-flag="{{isCreate}}"  is-diamond="false" no-of-field-per-row = "1">
                                    </dynamic-form> 
                                </div>
                            </div>
                            <div class="row" ng-if="employee.previousfranchiseId && isCreate">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="select_transferred_employee" class="col-md-6 control-label">{{entity + 'Select Employee,If Any'|translate}}</label>
                                        <div class="col-xs-6  input-group" style="padding-left: 7px;padding-right: 14px">
                                            <div id="scrollable-dropdown-menus">
                                                <input class="typeahead" type="text" ng-model="searchtext" placeholder="Search for employees by name, IDs, designations" 
                                                       ag-search="{{apipath}}employee/search" 
                                                       ag-extraparam ="{{previousFranchise}}"
                                                       result-format="empName,department" 
                                                       on-select="retrieveTransferredEmployee" 
                                                       on-enter="getSearchedEmployee"
                                                       search-list-array='searchedEmployeeList'
                                                       id="scrollable-dropdown-menus"/>
                                            </div>
                                            <span class="input-group-btn">
                                                <button class="btn btn-default btn-hkg" ng-click="getSearchedEmployee(searchedEmployeeList)" type="button" tooltip-html-unsafe="{{searchpopover}}"><span class="glyphicon glyphicon-search"></span></button>
                                            </span>
                                        </div>   
                                        <span ng-show="isInValidSearch">{{entity + 'No matching results'| translate }}</span>   
                                    </div>
                                </div>
                            </div>

                            <div id="personal" data-expand ng-class="{'is-disabled': isEmployeeRelieved}">
                                <h4>

                                    {{ entity + 'Personal Details' | translate}}
                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label for="input_emptype" class="col-md-6 control-label">{{entity + 'Employee Type'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_emptype.$invalid && submitted}">
                                                <div class="hkg-nopadding" ng-if="isCreate" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">

                                                    <select class="form-control" id="input_emptype" ng-readonly="isEmployeeRelieved" name="input_emptype" ng-model="employee.empType" required ng-options="emptype.value as (emptype.shortcutCode+'-'+emptype.label) for emptype in empTypes" ng-change="setEmployeeCode()"  >
                                                        <option value="">{{entity + 'Select'|translate}}</option>
                                                    </select>
                                                </div>
                                                <div ng-show="!isCreate">
                                                    <select class="form-control" id="input_emptype" ng-readonly="isEmployeeRelieved" name="input_emptype"  ng-model="employee.empType" required ng-options="emptype.value as (emptype.shortcutCode+'-'+emptype.label) for emptype in editempTypes" ng-change="setEmployeeCode()"  >
                                                        <option value="">{{entity + 'Select'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut') && isCreate" class="col-md-2" records="empTypes" model-value="employee.empType" master-code="EMPTYPE" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.input_emptype.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_emptype.$error.required">{{entity + ' Employee type not selected'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-show="!isCreate">
                                            <label class="col-md-6 text-right">{{entity + 'Employee Code'|translate}}</label>
                                            <span class="col-md-6">{{employee.employeeCode}}</span>
                                        </div>
                                        <div class="form-group" ng-show="!isCreate">
                                            <label class="col-md-6 text-right">{{entity + 'User Id'|translate}}</label>
                                            <span class="col-md-6">{{employee.userId}}</span>
                                        </div>
                                        <div class="form-group required">
                                            <label for="input_empfullname" class="col-md-6 control-label">{{entity + 'Employee Name'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': (add_employee_form.input_empfullname.$invalid && submitted) || notUniqueEmpname || invalidname}">

                                                <input ng-pattern="/^[^.]+$/" type="text" maxlength="255" ng-readonly="isEmployeeRelieved" class="form-control" id="input_empfullname" name="input_empfullname" ng-model="employee.empName" placeholder="Firstname middlename lastname" required ng-change="empNameFormat(employee.empName);
                                                        changeholdername();"/>

                                                <div class="error,help-block" ng-show="(add_employee_form.input_empfullname.$invalid && submitted) || notUniqueEmpname || invalidname">
                                                    <span class="help-block"  ng-show="add_employee_form.input_empfullname.$error.required">{{entity + ' Employee name not entered'|translate}}</span>
                                                    <span class="help-block" ng-show="!invalidname && add_employee_form.input_empfullname.$error.pattern">{{ entity + 'Employee name is invalid ' | translate}}</span>
                                                    <!--<span class="help-block"  ng-show="notUniqueEmpname">{{ entity + " Employee name already exisits" | translate }}</span>-->
                                                    <span class="help-block" ng-show="invalidname && !add_employee_form.input_empfullname.$error.required">{{ entity + " Format is not valid" | translate }}</span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div flow-init="uploadFile" flow-file-added="profileFileAdded($file, $flow)" flow-file-success="profileFileUploaded($file,$flow,addEventForm,$message)" flow-files-submitted="$flow.upload()">
                                            <div name='profileImage'>
                                                <div class='row'>
                                                    <div class='col-md-4'>
                                                        <div ng-if="employee.profileImageName == null || employee.profileImageName.length === 0">
                                                            <!--<img src="images/add-employee/add_pict.png" height="130" width="130"/>-->
                                                            <img ng-src="{{retrieveAvatar()}}" height="130" width="130"/>
                                                        </div>
                                                        <div ng-if="employee.profileImageName != null && employee.profileImageName.length > 0">

                                                            <img ng-src="{{getProfileImageEmployee(true)}}" id='templateModal' height="130" width="130" ng-click='getProfileImageEmployee(false)'/>
                                                            <span class="glyphicon glyphicon-remove text-danger" style="vertical-align: top;cursor: pointer;" ng-click="$flow.files.splice($index, 1);
                                                                profileFileRemove()"></span>
                                                        </div>
                                                    </div>       
                                                    <div class='col-md-1'> 
                                                        <span title="Upload from drive" class="glyphicon glyphicon-folder-open text-info" style="font-size: 18px;cursor: pointer;" ng-hide="isEmployeeRelieved" flow-btn></span><!--{{entity + 'Click To Add Picture'|translate}} -->                        
                                                        <camera style="display:inline;" ng-hide="isEmployeeRelieved" model-name="Franchise" model-value="employee.profileImageName" feature-name="USER" field-type="PROFILE" is-custom="false" is-thumbnail="true" unique-id="profilePic"></camera>
                                                    </div>
                                                </div>
                                                <!--                                                <div class='row'>
                                                                                                    <div class='col-md-12'>
                                                                                                        <div class="text-right" style="width: 130px;">
                                                                                                            <span title="Upload from drive" class="glyphicon glyphicon-folder-open text-info" style="font-size: 18px;cursor: pointer;" ng-hide="isEmployeeRelieved" flow-btn></span>{{entity + 'Click To Add Picture'|translate}}                         
                                                                                                            <camera style="display:inline;" ng-hide="isEmployeeRelieved" model-name="Franchise" model-value="employee.profileImageName" feature-name="USER" field-type="PROFILE" is-custom="false" is-thumbnail="true" unique-id="profilePic"></camera>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>-->
                                                <ul class="list-group" style="margin-bottom: 0px;">    
                                                    <li class="list-group-item" ng-if="profileImg.invalidFileFlag">
                                                        <span class="text-danger"> {{profileImg.fileName}} {{entity + 'not image file'| translate}} </span>
                                                        <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="profileImg.invalidFileFlag = false"></span>
                                                    </li>
                                                    <li class="list-group-item" ng-if="profileImg.invalidFileSizeFlag">
                                                        <span class="text-danger"> {{entity + 'File size too large'| translate}} </span>
                                                        <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="profileImg.invalidFileSizeFlag = false"></span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6 control-label">
                                                <label for="male">{{entity + 'Gender'|translate}}</label>
                                            </div>
                                            <div class="form-group col-md-6 col-lg-6 col-sm-12">
                                                <label class="radio-inline">
                                                    <input type="radio" ng-readonly="isEmployeeRelieved" id="male" name="male" value="male" ng-model="employee.gender">
                                                    {{entity + 'Male'| translate}} 
                                                </label>
                                                <label class="radio-inline">

                                                    <input type="radio" ng-readonly="isEmployeeRelieved" id="female" name="female" value="female" ng-model="employee.gender">
                                                    {{entity + 'Female'| translate}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" >
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label for="input_empdob" class="col-md-6 control-label">{{entity + 'DOB'|translate}}</label>
                                            <div class="col-md-6" id="dob_emp" ng-if="initDate">
                                                <div ng-class="{'has-error': add_employee_form.input_empdob.$invalid && submitted}">

                                                    <span class="input-group">
                                                        <input type="text" id="input_empdob"   min="mindobDate" max="maxdobDate" ng-change="setYearOfPassing();
                                                                setJoiningDate();" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" ng-model="employee.dob" datepicker-options="dateOptions" is-open="emp_dob_opened" ng-required="true" close-text="Close" name="input_empdob"/>
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                                emp_dob_opened = true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                        </span>
                                                    </span>
                                                    <div class="error,help-block" ng-show="add_employee_form.input_empdob.$invalid && submitted">
                                                        <span class="help-block" ng-show="add_employee_form.input_empdob.$error.required && !(add_employee_form.input_empdob.$error.date || add_employee_form.input_empdob.$error.min || add_employee_form.input_empdob.$error.max)">
                                                            {{ entity + "Date of birth not entered" | translate }}</span>
                                                        <span class="help-block" ng-show="add_employee_form.input_empdob.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                        <span class="help-block" ng-show="add_employee_form.input_empdob.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                        <span class="help-block" ng-show="add_employee_form.input_empdob.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label for="input_otherdetails_maritalstatus" class="col-md-6 control-label"> {{entity + 'Other Details'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_otherdetails_maritalstatus.$invalid && submitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select id="input_otherdetails_maritalstatus" ng-readonly="isEmployeeRelieved" class="form-control" required name="input_otherdetails_maritalstatus" ng-model="employee.maritalstatus" ng-options="maritalStatus.value as (maritalStatus.shortcutCode+'-'+maritalStatus.label) for maritalStatus in maritalStatusList">
                                                        <option value="">{{entity + 'Marital status'| translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="maritalStatusList" model-value="employee.maritalstatus" master-code="MS" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.input_otherdetails_maritalstatus.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_otherdetails_maritalstatus.$error.required">{{entity + 'Marital status not selected'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_empCaste.$invalid && submitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select class="form-control" ng-readonly="isEmployeeRelieved" required name="input_empCaste" id="input_empCaste" ng-model="employee.caste" ng-options="caste.value as  (caste.shortcutCode+'-'+caste.label) for caste in casteList">
                                                        <option  class="wordRap"  value="">{{entity + 'Caste'| translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="casteList" model-value="employee.caste" master-code="CASTE" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.input_empCaste.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_empCaste.$error.required">{{entity + 'Caste not selected'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-6" ng-class="{'has-error': add_employee_form.select_nationality.$invalid && submitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select class="form-control" ng-readonly="isEmployeeRelieved" required name="select_nationality" id="select_nationality" ng-model="employee.nationality" ng-options="nationality.value as (nationality.shortcutCode+'-'+nationality.label) for nationality in nationalityMap">
                                                        <option value="">{{entity + 'Nationality'| translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="nationalityMap" model-value="employee.nationality" master-code="NTNLTY" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.select_nationality.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.select_nationality.$error.required">{{entity + 'Nationality not selected'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_empbloodGrp.$invalid && submitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select class="form-control" ng-readonly="isEmployeeRelieved" required name="input_empbloodGrp" id="input_empbloodGrp" ng-model="employee.bloodGrp" ng-options="bloodGroup.value as (bloodGroup.shortcutCode+'-'+bloodGroup.label) for bloodGroup in bloodGroups">
                                                        <option value="">{{entity + 'Blood Group'| translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="bloodGroups" model-value="employee.bloodGrp" master-code="BG" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.input_empbloodGrp.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_empbloodGrp.$error.required">{{entity + 'Blood group not selected'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                                <div ng-if="isCreate && personalreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="personaldbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="personalTemplate" 
                                                   ng-model="personalData" ng-if="personalTemplate"  submit-flag-name="submitted" view-only="{{isEmployeeRelieved}}" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  
                                </div>
                                <div ng-if="!isCreate && personalreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="personaldbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="personalTemplate" 
                                                   ng-model="personalData" ng-if="personalTemplate"  submit-flag-name="submitted" view-only="{{isEmployeeRelieved}}" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  
                                </div>
                            </div>

                            <div id="contact" ng-class="{'is-disabled': isEmployeeRelieved}">
                                <h4>


                                    {{entity + 'Contact details'|translate}}


                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label for="input_empcurrentaddress" class="col-md-6 control-label">{{entity + 'Current Address'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_empcurrentaddress.$invalid && submitted}">
                                                <input type="text" id="input_empcurrentaddress" ng-readonly="isEmployeeRelieved" name="input_empcurrentaddress" class="col-md-12 hkg-nopadding form-control" ui-select2="multiLocations" ng-model="employee.currentaddress" placeholder="city,district,state,country" required />
                                                <div class="error,help-block" ng-show="submitted && add_employee_form.input_empcurrentaddress.$invalid">
                                                    <span class="help-block" ng-show="add_employee_form.input_empcurrentaddress.$error.required">{{ entity + "Location not selected" | translate }}</span>                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6 col-md-offset-6" ng-class="{'has-error': add_employee_form.fulladdress.$invalid && submitted}">
                                                <textarea rows="3" maxlength="500" class="form-control" ng-readonly="isEmployeeRelieved" required name="fulladdress" id="fulladdress" placeholder="Full address.." ng-model="employee.fulladdress"></textarea>
                                                <div class="error,help-block" ng-show="add_employee_form.fulladdress.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.fulladdress.$error.required">{{entity + 'Address not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.pincode.$invalid && submitted}">
                                                <input type="text" maxlength="6" class="form-control" ng-readonly="isEmployeeRelieved" numbers-only="numbers-only" required name="pincode" id="pincode" placeholder="Pin code" ng-model="employee.pincode"/>
                                                <div class="error,help-block" ng-show="add_employee_form.pincode.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.pincode.$error.required">{{entity + 'Pincode not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label for="input_phnno" class="col-md-6 control-label"> {{entity + 'Phone Number'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': (add_employee_form.input_phnno.$invalid || !isPhoneValidate) && (add_employee_form.input_phnno.$dirty || submitted)}">
                                                <input id="input_phnno" type="text" maxlength="10" ng-readonly="isEmployeeRelieved" class="form-control" numbers-only="numbers-only" required name="input_phnno" ng-model="employee.phnno" placeholder="Primary number" ng-blur="phoneValidate()"/>
                                                <div class="error,help-block" ng-show="(add_employee_form.input_phnno.$dirty || submitted) && (add_employee_form.input_phnno.$invalid || !isPhoneValidate)">
                                                    <span class="help-block" ng-show="add_employee_form.input_phnno.$error.required">{{entity + 'Primary phone number not entered'|translate}}</span>
                                                    <span class="help-block" ng-show="!isPhoneValidate && !add_employee_form.input_phnno.$error.required">{{ entity + "Primary phone number not valid" | translate }}</span>                
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6" ng-class="{'has-error': (add_employee_form.input_altphnno.$invalid || isAltPhoneInvalid) && (add_employee_form.input_altphnno.$dirty || submitted)}">
                                                <input type="text" maxlength="10" class="form-control" ng-readonly="isEmployeeRelieved" numbers-only="numbers-only" id="input_altphnno" name="input_altphnno" ng-model="employee.altphnno" placeholder="Alternate number" ng-blur="altphoneValidate()"/>
                                                <div class="error,help-block" ng-show="(add_employee_form.input_altphnno.$dirty || submitted) && (add_employee_form.input_altphnno.$invalid || isAltPhoneInvalid)">
                                                    <span class="help-block"  ng-show="isAltPhoneInvalid">{{ entity + "Alternate number not valid" | translate }}</span>                
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="emailAddress" class="col-md-6 control-label">{{entity + 'Personal Email'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': (add_employee_form.emailAddress.$dirty || submitted) && (add_employee_form.emailAddress.$invalid || isEmailInvalid)}">
                                                <span class="input-group">
                                                    <input type="text" maxlength="255"  ng-readonly="isEmployeeRelieved" class="form-control" ng-model="employee.email" id="emailAddress" name="emailAddress" placeholder="Personal email ID" ng-blur="validateEmail(employee.email)"/>
                                                </span>
                                                <div class="error,help-block" ng-show="(add_employee_form.emailAddress.$dirty || submitted) && (add_employee_form.emailAddress.$invalid || isEmailInvalid)">
                                                    <span class="help-block" ng-show="add_employee_form.emailAddress.$error.required">{{ entity + "Email id is not entered" | translate }}</span>                    
                                                    <span class="help-block"  ng-show="isEmailInvalid">{{ entity + "Email id is not valid" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6 control-label">
                                            </div>
                                            <div class="col-md-6">
                                                <input type="checkbox" value="checkbox"  ng-readonly="isEmployeeRelieved" ng-checked="employee.isNativeAddressSame" ng-click="openNativeAddressModal($event)"/>{{entity + 'Native Address Same As Current Address'|translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6">
                                                <a ng-click="showNativeAddressModal()" ng-show="!employee.isNativeAddressSame && employee.nativefulladdress !== null && employee.nativefulladdress.length > 0">View native address</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="isCreate && contactreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="contactdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="contactTemplate" 
                                                   ng-model="contactData" ng-if="contactTemplate" submit-flag-name="submitted" view-only="{{isEmployeeRelieved}}" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  
                                </div>
                                <div ng-if="!isCreate && contactreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="contactdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="contactTemplate" 
                                                   ng-model="contactData" ng-if="contactTemplate" submit-flag-name="submitted" view-only="{{isEmployeeRelieved}}" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  
                                </div>
                            </div>

                            <div id="identification" ng-class="{'is-disabled': isEmployeeRelieved}">
                                <h4>

                                    {{entity + 'Identification Details'|translate}}

                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_id_card_num" class="col-md-6 control-label">{{entity + 'ID Card Number'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_id_card_num.$invalid}">
                                                <input type='text' ng-readonly="isEmployeeRelieved"  maxlength="25" class="form-control" name="input_id_card_num" id='input_id_card_num' ng-model="employee.empIdCardNum"  ng-pattern="/^[a-zA-Z0-9]+$/" placeholder="ID card number"/>
                                                <div class="error,help-block" ng-show="add_employee_form.input_id_card_num.$invalid">                                                    
                                                    <span class="help-block">{{entity + 'Enter valid ID card number'| translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_adhar_num" class="col-md-6 control-label">{{entity + 'Adhaar Number'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_adhar_num.$invalid}">
                                                <input type='text'  ng-readonly="isEmployeeRelieved" maxlength="25" class="form-control" id='input_adhar_num' name="input_adhar_num" ng-model="employee.empAdhaarCardNum" placeholder="Adhaar number" ng-trim="false" ng-pattern="/^[a-zA-Z0-9]+$/"/>
                                                <div class="error,help-block" ng-show="add_employee_form.input_adhar_num.$invalid">                                                    
                                                    <span class="help-block" >{{entity + 'Enter valid Adhaar number'| translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <label for="input_pan_num" class="col-md-6 control-label">{{entity + 'PAN Number'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_pan_num.$invalid}">
                                                <input type='text' ng-readonly="isEmployeeRelieved" maxlength="25" class="form-control" id='input_pan_num' name="input_pan_num" ng-model="employee.empPanNum" placeholder="PAN number" ng-trim="false" ng-pattern="/^[a-zA-Z0-9]+$/"/>
                                                <div class="error,help-block" ng-show="add_employee_form.input_pan_num.$invalid">                                                    
                                                    <span class="help-block" >{{entity + 'Enter valid PAN number'| translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-md-6" > 
                                        <!--ng-class="{'has-error': add_employee_form.input_License_num.$invalid}">-->
                                        <div class="form-group">
                                            <label for="input_License_num" class="col-md-6 control-label">{{entity + 'License Number'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_License_num.$invalid}">
                                                <input type='text'  ng-readonly="isEmployeeRelieved" maxlength="25" class="form-control" id='input_License_num' name="input_License_num" ng-model="employee.empLicenceNum" placeholder="License number" ng-trim="false" ng-pattern="/^[a-zA-Z0-9/]+$/"/>
                                                <div class="error,help-block" ng-show="add_employee_form.input_License_num.$invalid">                                                    
                                                    <span class="help-block" >{{entity + 'Enter valid License number'| translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" ng-show="employee.empLicenceNum.length > 0">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_vehical_num" class="col-md-6 control-label">{{entity + 'Vehicle Number'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_vehical_num.$invalid}">
                                                <input type='text'  ng-readonly="isEmployeeRelieved" maxlength="25" class="form-control" id='input_vehical_num' name="input_vehical_num" ng-model="employee.empVehicalNum" placeholder="Vehicle number"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <label for="date_puc_expires" class="col-md-6 control-label">{{entity + 'PUC Expiry'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.date_puc_expires.$invalid}">
                                                <span class="input-group">
                                                    <input type="text" name="date_puc_expires"   id="date_puc_expires"  placeholder="{{format}}" class="form-control" datepicker-popup="{{format}}" ng-model="employee.empPucExpiresOn" is-open="opened_puc_expires" close-text="Close" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                            opened_puc_expires = true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </span>
                                                <div class="error,help-block" ng-show="add_employee_form.date_puc_expires.$invalid">
                                                    <span class="help-block" ng-show="add_employee_form.date_puc_expires.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.date_puc_expires.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.date_puc_expires.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6" > 
                                        <!--ng-class="{'has-error': add_employee_form.input_License_num.$invalid}">-->
                                        <div class="form-group">
                                            <label for="input_passport_num" class="col-md-6 control-label">{{entity + 'Passport Number'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_passport_num.$invalid}">
                                                <input type='text'maxlength="25"  ng-readonly="isEmployeeRelieved" class="form-control" id='input_passport_num' name="input_passport_num" ng-model="employee.empPassportNum" placeholder="Passport number" ng-trim="false" ng-pattern="/^[a-zA-Z0-9]+$/"/>
                                                <div class="error,help-block" ng-show="add_employee_form.input_passport_num.$invalid">                                                    
                                                    <span class="help-block" >{{entity + 'Enter valid Passport number'| translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row"ng-show="employee.empPassportNum.length > 0">
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label for="date_passport_issue" class="col-md-6 control-label">{{entity + 'Issued On'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_passportissue.$invalid && submitted}">
                                                <span class="input-group">
                                                    <input id="input_passportissue"   name="input_passportissue" type="text"  placeholder="{{format}}" class="form-control" 
                                                           datepicker-popup="{{format}}" ng-model="employee.empPassportIssueOn" 
                                                           max="employee.empPassportExpiresOn?employee.empPassportExpiresOn:today"                                                           
                                                           min="employee.dob"
                                                           is-open="opened_passport_issue" ng-required="employee.empPassportNum.length > 0" close-text="Close" ng-change="setPassportExpiryDate()"/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                            opened_passport_issue = true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </span>
                                                <div class="error,help-block" ng-show="add_employee_form.input_passportissue.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_passportissue.$error.required && !(add_employee_form.input_passportissue.$error.date || add_employee_form.input_passportissue.$error.min || add_employee_form.input_passportissue.$error.max)">
                                                        {{ entity + "Passport issue date not entered" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_passportissue.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_passportissue.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_passportissue.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group required">
                                            <label for="date_passport_expires" class="col-md-6 control-label">{{entity + 'Expires On'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_passportexpire.$invalid && submitted}">
                                                <span class="input-group">
                                                    <input id="input_passportexpire"  name="input_passportexpire" type="text"  placeholder="{{format}}"
                                                           class="form-control" datepicker-popup="{{format}}" ng-model="employee.empPassportExpiresOn" 
                                                           min="employee.empPassportIssueOn?employee.empPassportIssueOn:employee.dob" 
                                                           is-open="opened_passport_expires" ng-required="employee.empPassportNum.length > 0" close-text="Close" />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                            opened_passport_expires = true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </span> 
                                                <div class="error,help-block" ng-show="add_employee_form.input_passportexpire.$invalid && submitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_passportexpire.$error.required && !(add_employee_form.input_passportexpire.$error.date || add_employee_form.input_passportexpire.$error.min || add_employee_form.input_passportexpire.$error.max)">
                                                        {{ entity + "Passport expiry date not entered" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_passportexpire.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_passportexpire.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_passportexpire.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!--
                                                                <div class="col-md-6" ng-show="employee.empPassportNum.length > 0">
                                                                    <div class="form-group required">
                                                                        <label for="date_passport_issue" class="col-md-2 control-label">{{entity + 'Issued on'|translate}}</label>
                                                                        <div class="col-md-4" ng-class="{'has-error': add_employee_form.input_passportissue.$invalid && submitted}">
                                                                            <span class="input-group">
                                                                                <input name="input_passportissue" type="text" id="date_passport_issue" placeholder="mm/dd/yyyy" class="form-control" 
                                                                                       datepicker-popup="{{format}}" ng-model="employee.empPassportIssueOn" 
                                                                                       max="employee.empPassportExpiresOn?employee.empPassportExpiresOn:today"                                                           
                                                                                       min="employee.dob"
                                                                                       is-open="opened_passport_issue" ng-required="employee.empPassportNum.length > 0" close-text="Close" />
                                                                                <span class="input-group-btn">
                                                                                    <button class="btn btn-default" ng-click="open($event, 'opened_passport_issue')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                                </span>
                                                                            </span>
                                                                            <div class="error,help-block" ng-show="add_employee_form.input_passportissue.$invalid && submitted">
                                                                                <span class="help-block" ng-show="add_employee_form.input_passportissue.$error.required">{{entity + 'Passport issue date not entered'|translate}}</span>
                                                                            </div>
                                                                        </div>
                                
                                                                        <label for="date_passport_expires" class="col-md-2 control-label">{{entity + 'Expires on'|translate}}</label>
                                                                        <div class="col-md-4" ng-class="{'has-error': add_employee_form.input_passportexpire.$invalid && submitted}">
                                                                            <span class="input-group">
                                                                                <input name="input_passportexpire" type="text" id="date_passport_expires" placeholder="mm/dd/yyyy"
                                                                                       class="form-control" datepicker-popup="{{format}}" ng-model="employee.empPassportExpiresOn" 
                                                                                       min="employee.empPassportIssueOn?employee.empPassportIssueOn:employee.dob" max="today"
                                                                                       is-open="opened_passport_expires" ng-required="employee.empPassportNum.length > 0" close-text="Close" />
                                                                                <span class="input-group-btn">
                                                                                    <button class="btn btn-default" ng-click="open($event, 'opened_passport_expires')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                                </span>
                                                                            </span>       
                                                                            <div class="error,help-block" ng-show="add_employee_form.input_passportexpire.$invalid && submitted">
                                                                                <span class="help-block" ng-show="add_employee_form.input_passportexpire.$error.required">{{entity + 'Passport expiry date not entered'|translate}}</span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>-->
                                <!--</div>-->
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_acnt_num" class="col-md-6 control-label">{{entity + 'Bank Account Number'|translate}}</label>
                                            <div class="col-md-6 " ng-class="{'has-error': add_employee_form.input_acnt_num.$invalid}">
                                                <input id="input_acnt_num"  ng-readonly="isEmployeeRelieved" type='text' maxlength="25" class="form-control" id='input_acnt_num' name="input_acnt_num" ng-model="employee.empAccountNum" placeholder="Bank account number" ng-trim="false" ng-pattern="/^[a-zA-Z0-9]+$/"/>
                                                <div class="error,help-block" ng-show="add_employee_form.input_acnt_num.$invalid">                                                    
                                                    <span class="help-block" >{{entity + 'Enter valid Account number'| translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="isCreate && identificationreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="identificationdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="identificationTemplate" 
                                                   ng-model="identificationData" ng-if="identificationTemplate" submit-flag-name="submitted" view-only="{{isEmployeeRelieved}}" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div ng-if="!isCreate && identificationreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="identificationdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="identificationTemplate" 
                                                   ng-model="identificationData" ng-if="identificationTemplate" submit-flag-name="submitted" view-only="{{isEmployeeRelieved}}" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                            </div>
                            <div id="education" ng-class="{'is-disabled': isEmployeeRelieved}">
                                <h4>

                                    {{entity + 'Educational Details'|translate}}

                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-md-6 control-label" for="select_edu_degree">{{entity + 'Educational Degree'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.select_edu_degree.$invalid && edusubmitted}">

                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select id="select_edu_degree"  ng-readonly="isEmployeeRelieved" name="select_edu_degree" class="form-control" ng-required="degreeReq" ng-model="employee.edu[educationIndex].degree" ng-options="edu_degree.value as (edu_degree.shortcutCode+'-'+edu_degree.label) for edu_degree in educationDegreeMap" ng-change="eduDegreeOnChange()">
                                                        <option value="">{{entity + 'Select degree'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="educationDegreeMap" model-value="employee.edu[educationIndex].degree" master-code="EDUDEG" is-shortcut-required="true"></add-master-value>

                                                <div class="error,help-block" ng-show="add_employee_form.select_edu_degree.$invalid && edusubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.select_edu_degree.$error.required">{{entity + 'Select degree'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">

                                        <div class="form-group" ng-class="{'has-error': add_employee_form.select_edu_year.$invalid && edusubmitted}">
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.select_edu_year.$invalid && edusubmitted}">

                                                <select id="select_edu_year"  ng-readonly="isEmployeeRelieved" name="select_edu_year" class="form-control" ng-required="employee.edu[educationIndex].degree.toString().length > 0" ng-model="employee.edu[educationIndex].passingYear" ng-options="year for year in yearOfPassing" >

                                                    <option value="">{{entity + 'Year of passing'|translate}}</option>

                                                </select>
                                                <div class="error,help-block" ng-show="add_employee_form.select_edu_year.$invalid && edusubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.select_edu_year.$error.required">{{entity + 'Select passing year'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-md-6 control-label" for="input_university">{{entity + 'Educational School/University'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_university.$invalid && edusubmitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select id="input_university" ng-readonly="isEmployeeRelieved" name="input_university" class="form-control" ng-required="employee.edu[educationIndex].degree.toString().length > 0"  ng-model="employee.edu[educationIndex].university" ng-options="university.value as (university.shortcutCode+'-'+university.label) for university in universityList" >
                                                        <option value="">{{entity + 'Select university'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="universityList" model-value="employee.edu[educationIndex].university" master-code="UNI" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.input_university.$invalid && edusubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_university.$error.required">{{entity + 'Select University'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.select_medium.$invalid && edusubmitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select id="select_medium"  ng-readonly="isEmployeeRelieved" name="select_medium" class="form-control" ng-model="employee.edu[educationIndex].medium" ng-required="employee.edu[educationIndex].degree.toString().length > 0"  ng-options="medium.value as  (medium.shortcutCode+'-'+medium.label) for medium in mediumMap"  >
                                                        <option value="">{{entity + 'Medium of passing'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="mediumMap" model-value="employee.edu[educationIndex].medium" master-code="MDIUM" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.select_medium.$invalid && edusubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.select_medium.$error.required">{{entity + 'Select medium'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-md-6 control-label" for="input_percentage">{{entity + 'Percentage'|translate}}</label>
                                            <div class="col-md-6"  ng-class="{'has-error': add_employee_form.input_percentage.$invalid && edusubmitted }">
                                                <input type="text" max=100  ng-readonly="isEmployeeRelieved" name="input_percentage" id="input_percentage"  class="form-control" ng-pattern="/^((0|[1-9]\d?)(\.\d{1,3})?|100(\.00?)?)$/" ng-required="employee.edu[educationIndex].degree.toString().length > 0"  ng-model="employee.edu[educationIndex].empPercentage" />                                                                                                


                                                <div class="error,help-block" ng-show="add_employee_form.input_percentage.$invalid && edusubmitted">  
                                                    <span class="help-block"  ng-show="add_employee_form.input_percentage.$error.max">{{entity + 'Percentage cannot be more than 100'|translate}}</span>   
                                                    <span class="help-block"  ng-show="add_employee_form.input_percentage.$error.pattern">{{entity + 'Percentage is invalid'|translate}}</span>        
                                                    <span class="help-block" ng-show="add_employee_form.input_percentage.$error.required">{{entity + 'Enter percentage'|translate}}</span>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                                <div ng-if="isCreate && tempeducationflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="educationdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="educationTemplate" 
                                                   ng-model="tempeducationData" ng-if="educationTemplate" submit-flag-name="edusubmitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div ng-if="!isCreate && tempeducationflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="educationdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="educationTemplate" 
                                                   ng-model="tempeducationData" ng-if="educationTemplate" submit-flag-name="edusubmitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div class="row">
                                    <div class="col-md-3"></div>
                                    <div class="col-md-6">
                                        <a class="glyphicon glyphicon-plus-sign"  ng-hide="isEmployeeRelieved" title="{{entity + 'Add Another'|translate}}" ng-click="eduAddAnother(true)"></a>
                                        &nbsp;
                                        <a class="glyphicon glyphicon-eye-open " ng-show ="hasAnyEdu" title="{{entity + 'View All'|translate}}" ng-click="viewAllEduDetails()"></a>
                                    </div>
                                </div>
                            </div>

                            <div id="experience" ng-class="{'is-disabled': isEmployeeRelieved}">
                                <h4>

                                    {{entity + 'Experience Details'|translate}}

                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_company"  ng-readonly="isEmployeeRelieved" class="col-md-6 control-label">{{entity + 'Company Name'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_company.$invalid && expsubmitted}">
                                                <input type="text"  ng-readonly="isEmployeeRelieved" maxlength="255" class="form-control" id="input_company" name="input_company" ng-required="prevCmpnyReq" ng-model="employee.exp[expIndex].company" ng-blur="expComapnyOnBlur();" ng-pattern="/^[a-zA-Z0-9\s]+$/"/>
                                                <span class="help-block" ng-show="add_employee_form.input_company.$error.pattern">{{entity + 'Enter valid company name'|translate}}</span>
                                                <div class="error,help-block" ng-show="add_employee_form.input_company.$invalid && expsubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_company.$error.required">{{entity + 'Previous company not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_empDeg.$invalid && expsubmitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select class="form-control"  ng-readonly="isEmployeeRelieved" id="input_empDeg" name="input_empDeg" ng-model="employee.exp[expIndex].designation" ng-required="employee.exp[expIndex].company.length>0" ng-options="dep.value as (dep.shortcutCode+'-'+dep.label) for dep in expDepList" >
                                                        <option value="">{{entity + 'Select or add designation'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="expDepList" model-value="employee.exp[expIndex].designation" master-code="DEG" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.input_empDeg.$invalid && expsubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_empDeg.$error.required">{{entity + ' Previous desgination not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="input_started_from" class="col-md-3 control-label">{{entity + 'Work Duration'|translate}}</label>
                                            <div class="col-md-6">
                                                <div class="row">
                                                    <div class="col-md-5" ng-class="{'has-error': add_employee_form.input_started_from.$invalid && expsubmitted}">
                                                        <span class="input-group">
                                                            <input type="text"  id="input_started_from" name="input_started_from" max="employee.exp[expIndex].workedTill?startExperienceRange:today" min="employee.dob" class="form-control"  placeholder="{{format}}" datepicker-popup="{{format}}" datepicker-options="dateOptions" ng-required="employee.exp[expIndex].company.length>0" ng-model="employee.exp[expIndex].startedFrom" is-open="opened_started_from" close-text="Close" ng-change="setWorkExperienceEndDate(employee.exp[expIndex].startedFrom)"/>
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                                    opened_started_from = true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                            </span>
                                                        </span> 
                                                        <div class="error,help-block" ng-show="add_employee_form.input_started_from.$invalid && expsubmitted">
                                                            <span class="help-block" ng-show="add_employee_form.input_started_from.$error.required && !(add_employee_form.input_started_from.$error.date || add_employee_form.input_started_from.$error.min || add_employee_form.input_started_from.$error.max)">
                                                                {{ entity + "Start date not selected" | translate }}</span>
                                                            <span class="help-block" ng-show="add_employee_form.input_started_from.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                            <span class="help-block" ng-show="add_employee_form.input_started_from.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                            <span class="help-block" ng-show="add_employee_form.input_started_from.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <div class="text-center">to</div>
                                                    </div>
                                                    <div class="col-md-5" ng-class="{'has-error': add_employee_form.input_worked_till.$invalid && expsubmitted}">
                                                        <span class="input-group">
                                                            <input type="text"   id="input_worked_till" name="input_worked_till" max="today" min="employee.exp[expIndex].startedFrom?endExperienceInitrange:employee.dob" class="form-control"  placeholder="{{format}}" datepicker-popup="{{format}}" ng-required="employee.exp[expIndex].company.length>0" ng-model="employee.exp[expIndex].workedTill" is-open="opened_worked_till" ng-required="true" close-text="Close" ng-change="setWorkExperienceStartDate(employee.exp[expIndex].workedTill);
                                                                    setMonthsWorkedFor()" />
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                                    opened_worked_till = true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                            </span>
                                                        </span>  
                                                        <div class="error,help-block" ng-show="add_employee_form.input_worked_till.$invalid && expsubmitted">
                                                            <span class="help-block" ng-show="add_employee_form.input_worked_till.$error.required && !(add_employee_form.input_worked_till.$error.date || add_employee_form.input_worked_till.$error.min || add_employee_form.input_worked_till.$error.max)">
                                                                {{ entity + "End date not selected" | translate }}</span>
                                                            <span class="help-block" ng-show="add_employee_form.input_worked_till.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                            <span class="help-block" ng-show="add_employee_form.input_worked_till.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                            <span class="help-block" ng-show="add_employee_form.input_worked_till.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_Annual_Salary" class="col-md-6 control-label">{{entity + 'Annual Salary'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_Annual_Salary.$invalid && expsubmitted}">
                                                <div class="input-group">
                                                    <input type="text"  ng-readonly="isEmployeeRelieved" class="form-control" numbers-only="numbers-only" maxlength="9" id="input_Annual_Salary" name="input_Annual_Salary" ng-required="employee.exp[expIndex].company.length>0" ng-model="employee.exp[expIndex].salary"  />
                                                    <span class="input-group-addon">{{entity + 'INR'|translate}}</span>
                                                </div>
                                                <div class="error,help-block" ng-show="add_employee_form.input_Annual_Salary.$invalid && expsubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_Annual_Salary.$error.required">{{entity + 'Annual salary of previous employment not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="file_uplodDocs" class="col-md-3 control-label">{{entity + 'Upload Salary Slip'|translate}}</label>

                                            <!--<div class="col-md-6">-->
                                            <div flow-init="uploadFile" ng-app=""flow-file-added="salaryslipFileAdded($file, $flow)" flow-file-success="salaryslipFileUploaded($file,$flow,addEventForm,$message,false)"  flow-files-submitted="$flow.upload()">

                                                <div name='salaryslipImage'>
                                                    <div class='row'>
                                                        <div class='col-md-6'>
                                                            <button class="btn btn-hkg" flow-btn  ng-disabled="isEmployeeRelieved">{{entity + 'Choose File'|translate}}</button>                        
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--</div>-->
                                        </div>
                                    </div>
                                </div>
                                <div class='row'>
                                    <div class='col-md-3'></div>
                                    <div id="wordRap" class='col-md-6'>
                                        <ul class="list-group">    
                                            <li class="list-group-item" ng-if="employee.exp[expIndex].salaryslipImageName.length > 0">
                                                <a ng-href='{{appendAuthToken(apipath + "employee/download?filename=" + employee.exp[expIndex].salaryslipImageName)}}'>{{employee.exp[expIndex].salaryslipImageName.substring(employee.exp[expIndex].salaryslipImageName.indexOf('~~') + 1, employee.exp[expIndex].salaryslipImageName.length)}}</a>
                                                <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="$flow.files.splice($index, 1);
                                                    salaryslipRemove(expIndex);"></span>
                                            </li>
                                            <li class="list-group-item" ng-show="salaryslipImg.invalidFileFlag">
                                                <span class="text-danger"> {{salaryslipImg.fileName}} {{entity + 'is not valid file'| translate}} </span>
                                                <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="salaryslipImg.invalidFileFlag = false"></span>
                                            </li>
                                            <li class="list-group-item" ng-show="salaryslipImg.invalidFileSizeFlag">
                                                <span class="text-danger"> {{entity + 'File size too large'| translate}} </span>
                                                <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="salaryslipImg.invalidFileSizeFlag = false"></span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="input_reason_leaving" class="col-md-3 control-label">{{entity + 'Reason Of Leaving'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_reason_leaving.$invalid && expsubmitted}">
                                                <textarea class="form-control"  ng-readonly="isEmployeeRelieved" id="input_reason_leaving" name="input_reason_leaving" ng-model="employee.exp[expIndex].reasonOfLeaving" ng-required="employee.exp[expIndex].company.length>0"  ></textarea>
                                                <div class="error,help-block" ng-show="add_employee_form.input_reason_leaving.$invalid && expsubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_reason_leaving.$error.required">{{entity + 'Reason for leaving previous employment  not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="isCreate && tempexperienceflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="experiencedbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="experienceTemplate" 
                                                   ng-model="tempexperienceData" ng-if="experienceTemplate"  entity="EmployeeExperience"
                                                   submit-flag-name="expsubmitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div ng-if="!isCreate && tempexperienceflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="experiencedbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="experienceTemplate" 
                                                   ng-model="tempexperienceData" ng-if="experienceTemplate"  entity="EmployeeExperience"
                                                   submit-flag-name="expsubmitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div class="row">
                                    <div class="col-md-3"></div>
                                    <div class="col-md-6">

                                        <a class="glyphicon glyphicon-plus-sign" ng-hide="isEmployeeRelieved" title="{{entity + 'Add Another'|translate}}"  ng-click="expAddAnother(true)"></a>
                                        &nbsp;
                                        <a class="glyphicon glyphicon-eye-open " title="{{entity + 'View All'|translate}}"  ng-show ="hasAnyExp" ng-click="viewAllExpDetails()"></a>
                                    </div>
                                </div>
                            </div>

                            <div id="family" ng-class="{'is-disabled': isEmployeeRelieved}">
                                <h4>

                                    {{entity + 'Family Details'|translate}}

                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_member_fname" class="col-md-6 control-label">{{entity + 'Member Name'|translate}}</label>
                                            <div class="col-md-6"  ng-class="{'has-error': add_employee_form.input_member_fname.$invalid && familysubmitted || !isfamilyNameDuplicate }">
                                                <input type="text"  ng-readonly="isEmployeeRelieved" maxlength="255" class="form-control" id="input_member_fname" name="input_member_fname" placeholder="Firstname middlename lastname" ng-model="employee.family[familyIndex].firstName" ng-required="familynameReq" ng-change="checkMemberName(employee.family[familyIndex].firstName)"/>

                                                <div class="error,help-block" ng-show="(add_employee_form.input_member_fname.$dirty || submitted || familynameReq) && (add_employee_form.input_member_fname.$invalid || !isfamilyNameDuplicate)">
                                                    <span class="help-block" ng-show="add_employee_form.input_member_fname.$error.required">{{entity + 'Family member name not entered'|translate}}</span>
                                                    <span class="help-block"  ng-show="!isfamilyNameDuplicate || !add_employee_form.input_member_fname.$error.required">{{ entity + "Member already exist" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.select_relation.$invalid && familysubmitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select id="select_relation"  ng-readonly="isEmployeeRelieved" name="select_relation" class="form-control" ng-model="employee.family[familyIndex].relation" ng-options="relation.value as (relation.shortcutCode+'-'+relation.label) for relation in relationList" ng-required="employee.family[familyIndex].firstName.length>0" >
                                                        <option value="">{{entity + 'Relation with employee'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="relationList" model-value="employee.family[familyIndex].relation" master-code="RELESN" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.select_relation.$invalid && familysubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.select_relation.$error.required">{{entity + 'Relation with member not selected'|translate}}</span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_family_mem_dob" class="col-md-6 control-label">{{entity + 'DOB'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_family_mem_dob.$invalid && familysubmitted}">
                                                <span class="input-group">
                                                    <input type="text" id="input_family_mem_dob" max=today name="input_family_mem_dob" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" ng-model="employee.family[familyIndex].dateOfBirth" is-open="opened_family_mem_dob" ng-required="employee.family[familyIndex].firstName.length>0" close-text="Close"  />
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                            opened_family_mem_dob = true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </span>
                                                <div class="error,help-block" ng-show="add_employee_form.input_family_mem_dob.$invalid && familysubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_family_mem_dob.$error.required && !(add_employee_form.input_family_mem_dob.$error.date || add_employee_form.input_family_mem_dob.$error.min || add_employee_form.input_family_mem_dob.$error.max)">
                                                        {{ entity + "Date of birth of member not entered" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_family_mem_dob.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_family_mem_dob.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_family_mem_dob.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.select_member_bld_grp.$invalid && familysubmitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select  ng-readonly="isEmployeeRelieved" id="select_member_bld_grp" name="select_member_bld_grp" class="form-control" ng-model="employee.family[familyIndex].bloodGroup" ng-options="bloodGroup.value as (bloodGroup.shortcutCode+'-'+bloodGroup.label) for bloodGroup in bloodGroups" ng-required="employee.family[familyIndex].firstName.length>0" >
                                                        <option value="">{{entity + 'Blood group'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" modal-name="select_member_bld_grp" records="bloodGroups" model-value="employee.family[familyIndex].bloodGroup" master-code="BG" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.select_member_bld_grp.$invalid && familysubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.select_member_bld_grp.$error.required">{{entity + 'Blood group of member not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="select_occupation" class="col-md-6 control-label">{{entity + 'Other Details'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.select_occupation.$invalid && familysubmitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select id="select_occupation"  ng-readonly="isEmployeeRelieved" name="select_occupation" class="form-control" ng-model="employee.family[familyIndex].occupation" ng-options="occupation.value as (occupation.shortcutCode+'-'+occupation.label)  for occupation in occupationList" ng-required="employee.family[familyIndex].firstName.length>0"  >
                                                        <option value="">{{entity + 'Select occupation'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="occupationList" model-value="employee.family[familyIndex].occupation" master-code="OCCUPSN" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.select_occupation.$invalid && familysubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.select_occupation.$error.required">{{entity + ' Occupation of member not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div flow-init="uploadFile" flow-file-added="familyFileAdded($file, $flow)" flow-file-success="familyFileUploaded($file,$flow,addEventForm,$message,false)" flow-files-submitted="$flow.upload()">

                                                <div class="col-md-12" name='familyImage'>
                                                    <div class='row'>
                                                        <div class='col-md-4'>
                                                            <div ng-if="employee.family[familyIndex].familyImageName == null || employee.family[familyIndex].familyImageName.length === 0">
                                                                <img ng-src="{{retrieveAvatar()}}" height="130" width="130"/>
                                                            </div>
                                                            <div ng-if="employee.family[familyIndex].familyImageName != null && employee.family[familyIndex].familyImageName.length > 0">
                                                                <img ng-src="{{getProfileImageContact(familyIndex, false, true)}}" id='templateModal' height="130" width="130" ng-click='getProfileImageContact(familyIndex, false, false)'/>
                                                                <span class="glyphicon glyphicon-remove text-danger" style="vertical-align: top;cursor: pointer;" ng-click="$flow.files.splice($index, 1);
                                                                    familyFileRemove(familyIndex)"></span>
                                                            </div>
                                                        </div>
                                                        <div class='col-md-1'>
                                                            <span title="Upload from drive" class="glyphicon glyphicon-folder-open text-info" style="font-size: 18px;cursor: pointer;" ng-hide="isEmployeeRelieved" flow-btn></span><!--{{entity + 'Click To Add Picture'|translate}} -->                        
                                                            <camera style="display:inline;" ng-hide="isEmployeeRelieved" model-name="Franchise" model-value="employee.family[familyIndex].familyImageName" feature-name="USER" field-type="PROFILE" is-custom="false" is-thumbnail="true" unique-id="familyPic"></camera>
                                                        </div>
                                                    </div>
                                                    <!--                                                    <div class='row'>
                                                                                                            <div class='col-md-12'>
                                                                                                                <div class="text-right" style="width: 130px;">
                                                                                                                    <button class="btn btn-hkg" flow-btn  ng-disabled="isEmployeeRelieved">{{entity + 'Click To Add Picture'|translate}}</button>                        
                                                                                                                    <span title="Upload from drive" class="glyphicon glyphicon-folder-open text-info" style="font-size: 18px;cursor: pointer;" ng-hide="isEmployeeRelieved" flow-btn></span>{{entity + 'Click To Add Picture'|translate}}                         
                                                                                                                    <camera style="display:inline;" ng-hide="isEmployeeRelieved" model-name="Franchise" model-value="employee.family[familyIndex].familyImageName" feature-name="USER" field-type="PROFILE" is-custom="false" is-thumbnail="true" unique-id="familyPic"></camera>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>-->
                                                    <ul class="list-group" style="margin-bottom: 0px;">    
                                                        <li class="list-group-item" ng-if="familyImg.invalidFileFlag">
                                                            <span class="text-danger"> {{familyImg.fileName}} {{entity + 'not image file'| translate}} </span>
                                                            <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="familyImg.invalidFileFlag = false"></span>
                                                        </li>
                                                        <li class="list-group-item" ng-if="familyImg.invalidFileSizeFlag">
                                                            <span class="text-danger"> {{entity + 'File size too large'| translate}} </span>
                                                            <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="familyImg.invalidFileSizeFlag = false"></span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">

                                            <label for="input_family_mem_contact" class="col-md-3 control-label">{{entity + 'Contact'|translate}}</label>
                                            <div class="col-md-3" ng-class="{'has-error': add_employee_form.input_family_mem_contact.$invalid || !isfamilyContact}">
                                                <input type="text"  ng-readonly="isEmployeeRelieved" maxlength="10" numbers-only="numbers-only" class="form-control" name="input_family_mem_contact" id="input_family_mem_contact" ng-model="employee.family[familyIndex].mobileNumber" ng-trim="false"  ng-change="familyPhoneValidate(employee.family[familyIndex].mobileNumber)"/>
                                                <span class="help-block" ng-show="!isfamilyContact">{{entity + 'Enter valid contact'|translate}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="isCreate && familyreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="familydbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="familyTemplate" 
                                                   ng-model="tempfamilyData" ng-if="familyTemplate" submit-flag-name="familysubmitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div ng-if="!isCreate && familyreload === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="familydbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="familyTemplate" 
                                                   ng-model="tempfamilyData" ng-if="familyTemplate" submit-flag-name="familysubmitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div class="row">
                                    <div class="col-md-3"></div>
                                    <div class="col-md-6">
                                        <a class="glyphicon glyphicon-plus-sign" ng-hide="isEmployeeRelieved" title="{{entity + 'Add Another'|translate}}"  ng-click="familyAddAnother(true)"></a>
                                        &nbsp;
                                        <a class="glyphicon glyphicon-eye-open " title="{{entity + 'View All'|translate}}"  ng-show ="hasAnyFamily" ng-click="openModal()"></a>

                                    </div>
                                </div>
                            </div>

                            <div id="policy" ng-class="{'is-disabled': isEmployeeRelieved}">
                                <h4>

                                    {{entity + 'Policy Details'|translate}}

                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="select_policy_holder" class="col-md-6 control-label">{{entity + 'Policy Holder'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.select_policy_holder.$invalid && policysubmitted}">
                                                <select id="select_policy_holder"  ng-readonly="isEmployeeRelieved" name="select_policy_holder" class="form-control" ng-required="policynameReq" ng-model="employee.policy[policyIndex].contactUser" ng-options="policyHolderId as policyHolderVal for (policyHolderId,policyHolderVal) in policyHoldersMap">
                                                    <option value="">{{entity + 'Select member'|translate}}</option>
                                                </select>
                                                <div class="error,help-block" ng-show="add_employee_form.select_policy_holder.$invalid && policysubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.select_policy_holder.$error.required">{{entity + 'Policy holder not selected'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_emppolicycompany" class="col-md-6 control-label">{{entity + 'Company'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_emppolicycompany.$invalid && policysubmitted}">
                                                <div class="hkg-nopadding" ng-class="{'col-md-10':canAccess('addMasterValueShortcut'),'col-md-12':!canAccess('addMasterValueShortcut')}">
                                                    <select class="form-control"  ng-readonly="isEmployeeRelieved" id="input_emppolicycompany" name="input_emppolicycompany" ng-model="employee.policy[policyIndex].company" ng-options="policyCompany.value as (policyCompany.shortcutCode+'-'+policyCompany.label) for policyCompany in policyCompanyList" ng-required="employee.policy[policyIndex].contactUser.toString().length > 0" >
                                                        <option value="">{{entity + 'Select policy company'|translate}}</option>
                                                    </select>
                                                </div>
                                                <add-master-value ng-show="canAccess('addMasterValueShortcut')" class="col-md-2" records="policyCompanyList" model-value="employee.policy[policyIndex].company" master-code="POLICYCMPNY" is-shortcut-required="true"></add-master-value>
                                                <div class="error,help-block" ng-show="add_employee_form.input_emppolicycompany.$invalid && policysubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_emppolicycompany.$error.required">{{entity + 'Policy company not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="select_policy_status" class="col-md-4 control-label">{{entity + 'Policy Status'|translate}}</label>
                                            <div class="col-md-6">
                                                <select ng-model="employee.policy[policyIndex].status"  ng-readonly="isEmployeeRelieved" id="select_policy_status" name="select_policy_status" class="form-control">
                                                    <option value="Active">{{entity + 'Active'|translate}}</option>
                                                    <option value="Inactive">{{entity + 'Inactive'|translate}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_policy_num" class="col-md-6 control-label">{{entity + 'Policy Number'|translate}}</label>
                                            <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_policy_num.$invalid && policysubmitted}">
                                                <input type="text"  ng-readonly="isEmployeeRelieved" class="form-control" id="input_policy_num" name="input_policy_num" ng-model="employee.policy[policyIndex].policyNumber"  ng-required="employee.policy[policyIndex].contactUser.toString().length > 0" />
                                                <div class="error,help-block" ng-show="add_employee_form.input_policy_num.$invalid && policysubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_policy_num.$error.required">{{entity + 'Policy number not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input_policy_name" class="col-md-4 control-label">{{entity + 'Policy Name'|translate}}</label>
                                            <div class="col-md-6"  ng-readonly="isEmployeeRelieved" ng-class="{'has-error': add_employee_form.input_policy_name.$invalid && policysubmitted}">
                                                <input type="text"  ng-readonly="isEmployeeRelieved" maxlength="25" class="form-control" id="input_policy_name" name="input_policy_name" ng-model="employee.policy[policyIndex].policyName"  ng-required="employee.policy[policyIndex].contactUser.toString().length > 0" />
                                                <div class="error,help-block" ng-show="add_employee_form.input_policy_name.$invalid && policysubmitted">
                                                    <span class="help-block" ng-show="add_employee_form.input_policy_name.$error.required">{{entity + 'Policy name not entered'|translate}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="isCreate && temppolicyflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="policydbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="policyTemplate" 
                                                   ng-model="temppolicyData" ng-if="policyTemplate"  submit-flag-name="policysubmitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div ng-if="!isCreate && temppolicyflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="policydbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="policyTemplate" 
                                                   ng-model="temppolicyData" ng-if="policyTemplate"  submit-flag-name="policysubmitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form>  </div>
                                <div class="row">
                                    <div class="col-md-3"></div>
                                    <div class="col-md-6">
                                        <a class="glyphicon glyphicon-plus-sign" ng-hide="isEmployeeRelieved" title="{{entity + 'Add Another'|translate}}"  ng-click="policyAddAnother(true)"></a>
                                        &nbsp;
                                        <a class="glyphicon glyphicon-eye-open " title="{{entity + 'View All'|translate}}" ng-show ="hasAnyPolicy" ng-click="viewAllPolicyDetails()"></a>

                                    </div>
                                </div>
                            </div>

                            <div id="other" ng-class="{'is-disabled': isEmployeeRelieved}">
                                <h4>

                                    {{entity + 'Miscellaneous Details'|translate}}

                                </h4>
                                <div ng-if="otherDetailsEmpMap.length === 0" class="row">
                                    <div class="col-lg-12 col-md-12 col-xs-12">
                                        <table class="table table-bordered" >
                                            <tr>
                                                <td class="col-md-12">
                                                    {{entity + 'No values in \'Other details of Employee\'. Contact Admin.'|translate}}
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-offset-3">  
                                        <div class="col-md-4"  ng-repeat="otherDetailsOfEmp in otherDetailsEmpMap">
                                            <div >
                                                <span class="checkbox"><label class="wordRap"><input type="checkbox"  ng-model="otherDetailsOfEmp.isActive">{{entity + otherDetailsOfEmp.label| translate}}</label></span>
                                            </div>
                                            <div ng-if="(($index + 1) % 3) === 0">&nbsp;</div>
                                        </div>

                                    </div>
                                </div>
                                <div class="row" ng-show="canAccess('addMasterValueShortcut')">
                                    <div class="col-md-offset-3">
                                        <div class="col-md-4">
                                            <add-master-value records="otherDetailsEmpMap" master-code="EMPOTHRDTILS" is-shortcut-required="true" is-check-box="true"></add-master-value>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="isCreate && otherDataflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="otherdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="otherTemplate" 
                                                   ng-model="otherData" ng-if="otherTemplate" edit-flag="{{!isCreate}}">
                                    </dynamic-form> </div> 
                                <div ng-if="!isCreate && otherDataflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="otherdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="otherTemplate" 
                                                   ng-model="otherData" ng-if="otherTemplate" edit-flag="{{!isCreate}}">
                                    </dynamic-form> </div> 
                            </div>
                            <div ng-class="{'is-disabled': isEmployeeRelieved}">
                                <div id="hkgwork" >
                                    <h4>

                                        {{entity + 'HKG Work Details'|translate}}

                                    </h4>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group ">
                                                <label for="input_emp_joinDate" class="col-md-6 control-label"> {{entity + 'Joining Date'|translate}}</label>
                                                <div class="col-md-6" ng-class="{'has-error': add_employee_form.input_emp_joinDate.$invalid && submitted}">
                                                    <span class="input-group">
                                                        <input type="text" id="input_emp_joinDate" name="input_emp_joinDate" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" min="minJoiningDate" max="{{joiningdate}}" ng-model="employee.joiningDate" is-open="opened_emp_joinDate"  close-text="Close" />
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                                opened_emp_joinDate = true;"  ><i class="glyphicon glyphicon-calendar"></i></button>
                                                        </span>
                                                    </span>
                                                    <div class="text-center">
                                                        <span>{{joiningDuration}}</span>
                                                    </div>
                                                    <div class="error,help-block" ng-show="add_employee_form.input_emp_joinDate.$invalid && submitted">
                                                        <span class="help-block" ng-show="add_employee_form.input_emp_joinDate.$error.required && !(add_employee_form.input_emp_joinDate.$error.date || add_employee_form.input_emp_joinDate.$error.min || add_employee_form.input_emp_joinDate.$error.max)">
                                                            {{ entity + "Joining date not selected" | translate }}</span>
                                                        <span class="help-block" ng-show="add_employee_form.input_emp_joinDate.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                        <span class="help-block" ng-show="add_employee_form.input_emp_joinDate.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                        <span class="help-block" ng-show="add_employee_form.input_emp_joinDate.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label for="input_empstatus" class="col-md-3 control-label">{{entity + 'Status'|translate}}</label>
                                                <div class="col-md-9" ng-class="{'has-error': add_employee_form.input_empstatus.$invalid && submitted}">
                                                    <div ng-if="!isCreate">
                                                        <select class="form-control"  ng-readonly="isEmployeeRelieved" id="input_empstatus" name="input_empstatus" ng-disabled="isEmployeeRelieved"  ng-model="employee.workstatus" ng-options="empstatus.value as empstatus.label for empstatus in statusList" ng-click="beforeStatus()" ng-change="getStatusValue()" required>
                                                            <option value="">{{entity + 'Select '| translate}}</option>
                                                        </select>
                                                    </div>
                                                    <div ng-if="isCreate">
                                                        <select class="form-control"  ng-readonly="isEmployeeRelieved" id="input_empstatus" name="input_empstatus" ng-model="employee.workstatus" ng-options="empstatus.value as empstatus.label for empstatus in statusListCreate" required>
                                                            <option value="">{{entity + 'Select '| translate}}</option>
                                                        </select>
                                                    </div>
                                                    <div class="error,help-block" ng-show="add_employee_form.input_empstatus.$invalid && submitted">
                                                        <span class="help-block" ng-show="add_employee_form.input_empstatus.$error.required">{{entity + 'Status not selected'|translate}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3"  ng-show="isResigned">
                                            <div ng-class="{'has-error': add_employee_form.input_relieving_from.$error.required }"> 
                                                <span class="input-group">
                                                    <input type="text"  id="input_relieving_from" name="input_relieving_from" placeholder="Relieving date" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" ng-required="isResigned" ng-model="employee.relievingDate" is-open="opened_relieving_from" close-text="Close" min="employee.joiningDate?employee.joiningDate:today"/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-disabled="isEmployeeRelieved" ng-click="open($event);
                                                            opened_relieving_from = true;"><i class="glyphicon glyphicon-calendar"></i></button>
                                                    </span>
                                                </span> 
                                                <div class="error,help-block" ng-show="add_employee_form.input_relieving_from.$invalid">
                                                    <span class="help-block" ng-show="add_employee_form.input_relieving_from.$error.required && !(add_employee_form.input_relieving_from.$error.date || add_employee_form.input_relieving_from.$error.min || add_employee_form.input_relieving_from.$error.max)">
                                                        {{ entity + "Relieving date not selected" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_relieving_from.$error.date">{{ entity + "Invalid date format" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_relieving_from.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
                                                    <span class="help-block" ng-show="add_employee_form.input_relieving_from.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group required">
                                                <label for="input_empDepartment" class="col-md-6 control-label wordRap"> {{entity + 'Works At'|translate}}<br> </label>

                                                <div class="col-md-6" ng-class="{'has-error': isDepInvalid === true && submitted}">
                                                    <div class="dropdown ">
                                                        <button class="dropdown-toggle form-control" data-toggle="dropdown"  ng-readonly="isEmployeeRelieved">
                                                            <span class="pull-left" ng-show="selectedParent.displayName.length > 0" ng-bind="selectedParent.displayName"></span>
                                                            <span ng-hide="selectedParent.displayName.length > 0" class="pull-left">Department</span>
                                                            <span class="caret pull-right no-margin"></span>
                                                        </button>
                                                        <div class="dropdown-menu " style="width:280px">
                                                            <div ng-if="departmentListDropdown" ng-click='setSelectedParent(selectedDepartmentDropdown);
                                                                setDesignationForDept(selectedDepartmentDropdown, true)'
                                                                 data-angular-treeview="true"
                                                                 data-tree-id="selectedDepartmentDropdown"
                                                                 ag-treemodel="departmentListDropdown"
                                                                 entity-name="DPT_NM."
                                                                 search-id="parentId">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="error,help-block" ng-show="isDepInvalid && submitted">
                                                        <span class="help-block">{{ entity + ' Department not selected' | translate }}</span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-md-3" >
                                            <div class="form-group required" >
                                                <label for="input_empDesignation" class="col-md-3 control-label">{{entity + 'As'|translate}}</label>
                                                <div class="col-md-9" ng-class="{'has-error': add_employee_form.input_empDesignation.$invalid && submitted}">

                                                    <!--                                                    <select multiple ng-multiple="true" ng-readonly="isEmployeeRelieved" class="form-control" required id="input_empDesignation" name="input_empDesignation" ng-model="employee.workdeg" ng-options="designation.id as designation.displayName for designation in designationList">
                                                                                                            <option value="">{{entity + 'Select designation'| translate}}</option>
                                                                                                        </select>-->

                                                    <div >


                                                        <div  ng-if="designationListForWorkAs.length > 0" id="mult" multi-select output-model="modelName" input-model="designationListForWorkAs" button-label="designationName" item-label="designationName" 
                                                              tick-property="ticked" orientation="vertical" helper-elements="filter" group-property="multiSelectGroup" max-height="200px" on-button on-item-click="setDesignation(modelName);">
                                                        </div>
                                                        <div  ng-if="designationListForWorkAs.length === 0"> 
                                                            <select class="form-control"   id="select_shift" name="select_shift" ng-disabled="true">
                                                                <option value="">{{ entity + 'None' | translate }}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="error,help-block" ng-show="add_employee_form.input_empDesignation.$invalid && submitted">
                                                        <span class="help-block" ng-show="add_employee_form.input_empDesignation.$error.required">{{entity + 'Designation not selected'|translate}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="col-md-10"  ng-class="{'has-error': add_employee_form.select_shift.$invalid && submitted}">
                                                    <select class="form-control"  ng-readonly="isEmployeeRelieved" id="select_shift" name="select_shift" required ng-model="employee.workshift" ng-options="shift.value as shift.label for shift in shiftList">
                                                        <option value="">{{ entity + 'Shift' | translate }}</option>
                                                    </select>
                                                    <div class="error,help-block" ng-show="add_employee_form.select_shift.$invalid && submitted">
                                                        <span class="help-block" ng-show="add_employee_form.select_shift.$error.required">{{entity + 'Shift not selected'|translate}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group ">
                                                <label for="input_emp_emailId" class="col-md-6 control-label">{{entity + 'HK Email ID'|translate}}</label>


                                                <div class="col-md-6" ng-class="{'has-error': (add_employee_form.input_emp_emailId.$dirty || submitted) && (add_employee_form.input_emp_emailId.$invalid || !isWorkEmailValidate) }">
                                                    <input type="text"  ng-readonly="isEmployeeRelieved" class="form-control" name="input_emp_emailId" id="input_emp_emailId" ng-model="employee.workemailId"   placeholder="abc@diamondbyhk.com" ng-blur="validateWorkEmailId(employee.workemailId)"/>

                                                    <div class="error,help-block" ng-show="(add_employee_form.input_emp_emailId.$dirty || submitted) && (add_employee_form.input_emp_emailId.$invalid || !isWorkEmailValidate)">
                                                        <span class="help-block" ng-show="!isWorkEmailValidate && !add_employee_form.input_emp_emailId.$error.required">{{ entity + "Work email ID is not valid" | translate }}</span>
                                                        <span class="help-block" ng-show="add_employee_form.input_emp_emailId.$error.required">{{entity + 'Work email ID not entered'|translate}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label for="input_IP_Address" class="col-md-3 control-label">{{entity + 'IP'|translate}}</label>
                                                <div class="col-md-9" ng-class="{'has-error': (add_employee_form.input_IP_Address.$dirty || submitted) && (add_employee_form.input_IP_Address.$invalid || (!ipValidate && employee.ipaddress))}">
                                                    <input type="text"  ng-readonly="isEmployeeRelieved" maxlength="25" class="form-control" id="input_IP_Address" name="input_IP_Address" ng-model="employee.ipaddress" placeholder="192.1.200.56" ng-blur="ValidateIPaddress(employee.ipaddress)"/>
                                                    <div class="error,help-block" ng-trim="false" ng-show="(add_employee_form.input_IP_Address.$dirty || submitted) && (add_employee_form.input_IP_Address.$invalid || !ipValidate)">
                                                        <span class="help-block"ng-show="!ipValidate && employee.ipaddress">{{ entity + "IP is invalid" | translate }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--                                <div class="row">
                                                                        <div class="col-md-6">
                                                                            <div class="form-group">
                                                                                <label for="input_empReportsTo" class="col-md-6 control-label">{{entity + 'Reports to'|translate}}</label>
                                                                                <div class="col-md-6">
                                                                                    <div class="input-group">
                                                                                        <input  type="text" id="input_empReportsTo" name="input_empReportsTo" class="col-md-12 hkg-nopadding" ui-select2="autoCompleteApprover" ng-model="employee.reportsToId" ng-if="autoCompleteApprover"/>
                                                                                        <span class="input-group-addon"><span class="glyphicon glyphicon-info-sign" tooltip-html-unsafe="{{popover}}"  tooltip-trigger="mouseenter" tooltip-placement="right"></span></span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>-->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label for="input_empReportsTo" class="col-md-3 control-label">{{entity + 'Reports To'|translate}}</label>
                                                <div class="col-md-6">
                                                    <div class="input-group">
                                                        <!--<input type="text" class="col-xs-12 hkg-nopadding" name="recipients" id="recipients" ui-select2="autoCompleteIssueTo" ng-model="issueasset.issueTo"/>-->
                                                        <input type="text"  ng-readonly="isEmployeeRelieved" id="input_empReportsTo" name="input_empReportsTo" class="col-xs-12 hkg-nopadding" ui-select2="autoCompleteApprover" ng-model="employee.reportsToId"/>
                                                        <span class="input-group-addon"><span class="glyphicon glyphicon-info-sign" tooltip-html-unsafe="{{popover}}"  tooltip-trigger="mouseenter" tooltip-placement="right"></span>
                                                            <!--
                                                            <!--                                                    <input type="text" id="input_empReportsTo" name="input_empReportsTo" class="col-md-12 hkg-nopadding" ui-select2="autoCompleteApprover" ng-model="employee.reportsToId"/>
                                                                                                                <span class="input-group-addon"><span class="glyphicon glyphicon-info-sign" tooltip-html-unsafe="{{popover}}"  tooltip-trigger="mouseenter" tooltip-placement="right"></span></span>-->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <!--                                <div class="row">
                                                                        <div class="col-md-6">
                                                                            <div class="form-group">
                                                                                <label for="radio_generatebarcode" class="col-md-6 control-label">{{entity + 'Generate barcode?'|translate}}</label>
                                                                                <div class="col-md-6">
                                                                                    <div class="col-md-6 radio">
                                                                                        <label><input type="radio" name="grp_generatebarcode" ng-model="employee.generatebarcode" value="Yes"> {{entity + 'Yes'|translate}}</label>
                                                                                    </div>
                                                                                    <div class="col-md-6 radio">
                                                                                        <label><input type="radio" name="grp_generatebarcode" ng-model="employee.generatebarcode" value="No"> {{entity + 'No'|translate}}</label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="file_uplodDocs" class="col-md-6 control-label">{{entity + 'Upload Documents'|translate}}</label>

                                                <!--<div class="col-md-6">-->
                                                <div flow-init="otheruploadFile" flow-file-added="otherdocsFileAdded($file, $flow)" flow-file-success="otherdocsFileUploaded($file,$flow,addEventForm,$message)" flow-files-submitted="$flow.upload()">

                                                    <div name='otherdocsImage'>
                                                        <div class='form-group'>
                                                            <div class='col-md-6'>
                                                                <button class="btn btn-hkg"  ng-disabled="isEmployeeRelieved" flow-btn>{{entity + 'Choose File'|translate}}</button>                        
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <!--</div>-->
                                            </div>
                                        </div>
                                    </div>
                                    <div class='row'>
                                        <div class='col-md-3'></div>
                                        <div id="wordRap" class='col-md-6'>
                                            <ul class="list-group">     
                                                <li class="list-group-item" ng-repeat="file in employee.otherdocs" ng-if="hasAnyDoc && file !== null">
                                                    <a ng-href='{{appendAuthToken(apipath + "employee/download?filename=" + file)}}'>{{file.substring(file.indexOf('~~') + 1, file.length)}}</a>
                                                    <a class="glyphicon glyphicon-remove pull-right text-danger" title="{{entity + 'Remove'| translate}}"  ng-click="$flow.files.splice($index, 1);
                                                            otherdocRemove($index);"></a>

                                                </li>
                                                <li class="list-group-item" ng-if="otherdocsImg.invalidFileFlag">
                                                    <span class="text-danger"> {{otherdocsImg.fileName}} {{entity + 'is not valid file'| translate}} </span>
                                                    <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="otherdocsImg.invalidFileFlag = false"></span>
                                                </li>
                                                <li class="list-group-item" ng-if="otherdocsImg.invalidFileSizeFlag">
                                                    <span class="text-danger"> {{entity + 'File size too large'| translate}} </span>
                                                    <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="otherdocsImg.invalidFileSizeFlag = false"></span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <div class="col-md-3 col-md-offset-6">
                                                    <a ng-click="openViewDocs()" ng-show="hasAnyDoc">View All</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="isCreate && hkgworkDataflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="hkgworkdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="hkgworkTemplate" 
                                                   ng-model="hkgworkData" ng-if="hkgworkTemplate" submit-flag-name="submitted" edit-flag="{{!isCreate}}" is-diamond="falase">
                                    </dynamic-form></div>
                                <div ng-if="!isCreate && hkgworkDataflag === true">
                                    <dynamic-form  input-css ="col-md-3" label-css="col-md-3 control-label" db-map="hkgworkdbType" 
                                                   internationalization-label="{{i18DynamicForm}}" form-name="form2" template="hkgworkTemplate" 
                                                   ng-model="hkgworkData" ng-if="hkgworkTemplate" submit-flag-name="submitted" edit-flag="{{!isCreate}}">
                                    </dynamic-form></div>
                            </div>
                            <div class="col-xs-12" ng-class="{'is-disabled': isEmployeeRelieved}">
                                <div class="row">
                                    <hr/>
                                    <div class="col-xs-12 pull-right text-right">                     
                                        <a ng-click="resetPage();"> {{entity + 'Cancel'| translate}}</a>&nbsp;
                                        <button class="btn btn-hkg" ng-disabled="!isFranchiseConfigured" ng-show="isCreate" ng-click="checkIsUpdate();
                                            addEmployee(add_employee_form)">{{entity + 'Add Employee'| translate}}</button>
                                        <button class="btn btn-hkg" ng-disabled="isEmployeeRelieved" ng-show="!isCreate" ng-click="checkIsUpdate();
                                            updateEmployee(add_employee_form);">{{entity + 'Update Employee'| translate}}</button>
                                    </div>
                                    <br/>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xs-2 col-lg-2 tree-bg" id="sidemenu" style="height: 700px;">
            <div class="row affix fit-content" id="myNav">
                <ul class="nav nav-stacked" >
                    <li><a ng-click="scrollTo('personal')"> {{ entity + 'Personal Details' | translate}}</a></li>
                    <li><a ng-click="scrollTo('contact')">{{ entity + 'Contact Details' | translate}}</a></li>
                    <li><a ng-click="scrollTo('identification')">{{ entity + 'Identification details' | translate}}</a></li>
                    <li><a ng-click="scrollTo('education')">{{ entity + 'Educational Details' | translate}}</a></li>
                    <li><a ng-click="scrollTo('experience')">{{ entity + 'Experience Details' | translate}}</a></li>
                    <li><a ng-click="scrollTo('family')">{{ entity + 'Family Details' | translate}}</a></li>
                    <li><a ng-click="scrollTo('policy')">{{ entity + 'Policy Details' | translate}}</a></li>
                    <li><a ng-click="scrollTo('other')">{{ entity + 'Miscellaneous Details' | translate}}</a></li>
                    <li><a ng-click="scrollTo('hkgwork')">{{ entity + 'HKG Work Details' | translate}}</a></li>    
                </ul>
            </div>
        </div>
    </div>
</div>

<!--                                                        Modal                                           -->

<!--Native Address modal-->
<script type="text/ng-template" id="nativeAddTmpl.html">
    <div class="modal-content" >
    <form class="form-horizontal" role="form" name="native_address_modal" novalidate>
    <div class="modal-header">
    <button type="button" class="close" ng-click="cancelNativeAddress()" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="nativeAddressModalLabel"> {{entity + 'Native Address'| translate }}</h4>
    </div>
    <div class="modal-body">
    <div class="row">
    <div class="form-group">
    <label for="edit_input_empnativeaddress" class="col-md-4 control-label">{{entity + 'Native Address'|translate}}</label>
    <div class="col-md-7" ng-class="{'has-error': native_address_modal.input_empnativeaddress.$invalid && nativesubmitted}">
    <input type="text" id="edit_input_empnativeaddress" name="input_empnativeaddress" class="col-md-12 hkg-nopadding" ui-select2="multiLocations1" ng-model="employee.nativeaddress" placeholder="district,state,country" required  />
    <div class="error,help-block" ng-show="nativesubmitted && native_address_modal.input_empnativeaddress.$invalid">
    <span class="help-block" ng-show="native_address_modal.input_empnativeaddress.$error.required">{{ entity + "Select native address" | translate }}</span>                    
    </div>
    </div>
    </div>
    </div>
    <div class="row">
    <div class="form-group">
    <div class="col-md-7 col-md-offset-4" ng-class="{'has-error': native_address_modal.fulladdress.$invalid && nativesubmitted}">
    <textarea rows="3" maxlength="500" class="form-control" required name="fulladdress" placeholder="Full address.." ng-model="employee.nativefulladdress"></textarea>
    <div class="error,help-block" ng-show="native_address_modal.fulladdress.$invalid && nativesubmitted">
    <span class="help-block" ng-show="native_address_modal.fulladdress.$error.required">{{entity + 'Enter full address'|translate}}</span>
    </div>
    </div>
    </div>

    </div>
    <div class="row">
    <div class="form-group">
    <div class="col-md-7 col-md-offset-4" ng-class="{'has-error': native_address_modal.pincode.$invalid && nativesubmitted}">
    <input type="text" maxlength="6" class="form-control" numbers-only="numbers-only" required name="pincode" placeholder="Pin code" ng-model="employee.nativepincode"/>
    <div class="error,help-block" ng-show="native_address_modal.pincode.$invalid && nativesubmitted">
    <span class="help-block" ng-show="native_address_modal.pincode.$error.required">{{entity + 'Enter pin code'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="modal-footer" >
    <a ng-click="resetNativeAddress()">{{ entity + 'Reset' | translate }}</a>&nbsp;
    <a ng-click="cancelNativeAddress()">{{entity + 'Cancel'| translate }}</a>
    <button type="button" class="btn btn-hkg" ng-click="okNativeAddress(native_address_modal)"> {{entity + 'Ok'| translate }}</button>
    </div>
    </form>
    </div>
</script>
<!--Native address ends-->

<!--Education detail modal-->
<script type="text/ng-template" id="eduViewAllTmpl.html">
    <div class="modal-content " >
    <div class="modal-header">
    <button type="button" class="close" ng-click="closeViewAllEdu()" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewAllEducationModalLabel"> {{entity + 'View All'| translate }}</h4>
    </div>
    <div class="modal-body" >
    <div class="table-responsive">
    <table class="table table-striped table-responsive" cellspacing="0" width="100%" ag-data-table="viewAllEdu">
    <thead ng-show="viewAllEdu.length > 0">
    <tr>
    <th width="20%" style=" white-space: nowrap;"> {{ entity + 'Education Degree' | translate}}</th>
    <th  width="20%"  style=" white-space: nowrap;"> {{ entity + 'Passing Year' | translate}}</th>
    <th  width="20%" style=" white-space: nowrap;"> {{ entity + 'Educational School/University' | translate}}</th>
    <th  width="20%" style=" white-space: nowrap;"> {{ entity + 'Medium Of Passing ' | translate}}</th>
    <th  width="10%" > {{ entity + 'Percentage ' | translate}}</th>
    <th  width="10%" > <span ng-hide="isEmployeeRelieved">{{ entity + 'Action ' | translate}}</span></th>
    </tr>
    </thead>
    <tbody ng-show="viewAllEdu.length > 0">
    <tr ng-repeat="edudetail in viewAllEdu" >
    <td><span class="wordRap" ng-bind="edudetail.degreename"></span></td>
    <td><span class="wordRap" ng-bind="edudetail.passingYear"></span></td>
    <td><span class="wordRap" ng-bind="edudetail.universityname"></span></td>
    <td><span class="wordRap" ng-bind="edudetail.mediumname"></span></td>
    <td>{{edudetail.empPercentage}}</td>
    <td>
    <a ng-hide="isEmployeeRelieved" ng-click="openEditEduModal(edudetail)"><i class="glyphicon glyphicon-edit" title="Edit"></i></a>
    <a ng-hide="isEmployeeRelieved" ng-click="removeEdu(edudetail)"><i class="text-danger glyphicon glyphicon-remove" title="Remove"></i></a>
    </td>
    </tr>
    </tbody>
    </table> 
    </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="editEduTmpl.html">
    <div class="modal-content" >
    <form class="form-horizontal" role="form" name="edit_edu_form" novalidate>
    <div class="modal-header">
    <button type="button" class="close" ng-click="hideEduViewAll()" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewAllEducationModalLabel"> {{entity + 'Edit Education Detail'| translate }}</h4>
    </div>
    <div class="modal-body">
    <div class="row">
    <div class="col-md-6">
    <div class="form-group">
    <label class="col-md-6 control-label" for="edit_select_edu_degree">{{entity + 'Educational Degree'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_edu_form.select_edu_degree.$invalid && editedusubmitted}">
    <select id="edit_select_edu_degree" required name="select_edu_degree" class="form-control" ng-model="editedu.degree" ng-options="edu_degree.value as (edu_degree.shortcutCode+'-'+edu_degree.label) for edu_degree in educationDegreeMap">
    <option value="">{{ entity + 'Select degree' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_edu_form.select_edu_degree.$invalid && editedusubmitted">
    <span class="help-block" ng-show="edit_edu_form.select_edu_degree.$error.required">{{entity + 'Select degree'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    <div class="col-md-6">
    <div class="form-group" ng-class="{'has-error': edit_edu_form.select_edu_year.$invalid && editedusubmitted}">
    <div class="col-md-6" ng-class="{'has-error': edit_edu_form.select_edu_year.$invalid && editedusubmitted}">
    <select id="select_edu_year" name="select_edu_year" class="form-control" required ng-model="editedu.passingYear" ng-options="year for year in yearOfPassing">
    <option value="">{{ entity + 'Year of passing ' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_edu_form.select_edu_year.$invalid && editedusubmitted">
    <span class="help-block" ng-show="edit_edu_form.select_edu_year.$error.required">{{entity + 'Select passing year'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="row">
    <div class="col-md-6">
    <div class="form-group">
    <label class="col-md-6 control-label" for="edit_input_university">{{entity + 'Educational School/University'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_edu_form.input_university.$invalid && editedusubmitted}">
    <select id="edit_input_university" name="input_university" class="form-control" required ng-model="editedu.university" ng-options="university.value as (university.shortcutCode+'-'+university.label) for university in universityList">
    <option value="">{{ entity + 'Select university' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_edu_form.input_university.$invalid && editedusubmitted">
    <span class="help-block" ng-show="edit_edu_form.input_university.$error.required">{{entity + 'Select University'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    <div class="col-md-6">
    <div class="form-group">
    <div class="col-md-6" ng-class="{'has-error': edit_edu_form.select_medium.$invalid && editedusubmitted}">
    <select id="select_medium" name="select_medium" class="form-control" ng-model="editedu.medium" required ng-options="medium.value as (medium.shortcutCode+'-'+medium.label) for medium in mediumMap">
    <option value="">{{ entity + 'Medium of passing' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_edu_form.select_medium.$invalid && editedusubmitted">
    <span class="help-block" ng-show="edit_edu_form.select_medium.$error.required">{{entity + 'Select medium'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="row">
    <div class="col-md-6">
    <div class="form-group">
    <label class="col-md-6 control-label" for="edit_input_percentage">{{entity + 'Percentage'|translate}}</label>
    <div class="col-md-6"  ng-class="{'has-error': edit_edu_form.input_percentage.$invalid && editedusubmitted}">
    <input type="text" max=100 name="input_percentage" id="edit_input_percentage" class="form-control"  ng-pattern="/^((0|[1-9]\d?)(\.\d{1,3})?|100(\.00?)?)$/" required ng-model="editedu.empPercentage"/>

    <div class="error,help-block" ng-show="edit_edu_form.input_percentage.$invalid && editedusubmitted">
    <span class="help-block" ng-show="edit_edu_form.input_percentage.$error.required">{{entity + 'Enter percentage'|translate}}</span>
    <span class="help-block" ng-show="edit_edu_form.input_percentage.$error.max">{{entity + 'percentage cannot be more than 100'|translate}}</span>                                                
    <span class="help-block"  ng-show="edit_edu_form.input_percentage.$error.pattern">{{entity + 'Percentage is invalid'|translate}}</span>                             
    </div>
    </div>
    </div>
    </div>
    </div>
    <div ng-if="isCreate">
    <dynamic-form  input-css ="col-md-4" label-css="col-md-3 control-label" db-map="editeducationdbType" 
    internationalization-label="{{i18DynamicForm}}" form-name="form2" template="editEducationTemplate" 
    ng-model="editeducationData" ng-if="editEducationTemplate" submit-flag-name="editedusubmitted" edit-flag="{{!isCreate}}">
    </dynamic-form>  </div>
    <div ng-if="!isCreate">
    <dynamic-form  input-css ="col-md-4" label-css="col-md-3 control-label" db-map="editeducationdbType" 
    internationalization-label="{{i18DynamicForm}}" form-name="form2" template="editEducationTemplate" 
    ng-model="editeducationData" ng-if="editEducationTemplate" submit-flag-name="editedusubmitted" edit-flag="{{!isCreate}}">
    </dynamic-form>  </div>

    </div>
    <div class="modal-footer" >
    <a ng-click="hideEduViewAll()">Cancel</a>&nbsp;
    <button type="button" class="btn btn-hkg" ng-click="saveEditEduChanges(edit_edu_form)"> {{entity + 'Save Changes'| translate }}</button>
    </div>
    </form>
    </div>
</script>
<!--Education detail modal ends-->

<!--Experience detail modal-->
<script type="text/ng-template" id="expViewAllTmpl.html">
    <div class="modal-content" >
    <div class="modal-header">
    <button type="button" class="close" ng-click="closeViewAllExp()" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewAllExperienceModalLabel"> {{entity + 'View All'| translate }}</h4>
    </div>   
    <div class="modal-body">
    <div class="table-responsive">
    <table class="table table-striped table-responsive" cellspacing="0" width="100%" ag-data-table="viewAllExp">
    <thead ng-show="viewAllExp.length > 0">
    <tr>
    <th>{{ entity + ' Company ' | translate}}</th>
    <th>{{ entity + ' Designation ' | translate}}</th>
    <th style=" white-space: nowrap;">{{ entity + ' Work From ' | translate}}</th>
    <th style=" white-space: nowrap;">{{ entity + ' Work To ' | translate}}</th>
    <th>{{ entity + ' Salary ' | translate}}</th>
    <th style=" white-space: nowrap;">{{ entity + ' Reason For Leaving ' | translate}}</th>
    <th><span ng-hide="isEmployeeRelieved" >{{ entity + ' Action' | translate}}</span></th>
    </tr>
    </thead>
    <tbody ng-show="viewAllExp.length > 0">
    <tr ng-repeat="Expdetail in viewAllExp" >
    <td class="wordRap">{{Expdetail.company}}</td>
    <td class="wordRap">{{Expdetail.designationname}}</td>
    <td>{{Expdetail.startedFrom|date:dateFormat}}</td>
    <td>{{Expdetail.workedTill|date:dateFormat}}</td>
    <td class="wordRap">{{Expdetail.salary}}</td>                            
    <td class="wordRap">{{Expdetail.reasonOfLeaving}}</td>
    <td>
    <a ng-hide="isEmployeeRelieved"  ng-click="openEditExpModal(Expdetail)"><i class="glyphicon glyphicon-edit" title="Edit"></i></a>
    <a ng-hide="isEmployeeRelieved"  ng-click="removeExp(Expdetail)"><i class="text-danger glyphicon glyphicon-remove" title="Remove"></i></a>
    </td>
    </tr>
    </tbody>
    </table> 
    </div>
    </div> 
    </div>
</script>
<script type="text/ng-template" id="editExpTmpl.html">
    <div class="modal-content" >
    <form class="form-horizontal" role="form" name="edit_Exp_form" novalidate>
    <div class="modal-header">
    <button type="button" class="close" ng-click="hideExpViewAll()" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewAllExperienceModalLabel"> {{entity + 'Edit Experience Detail'| translate }}</h4>
    </div>
    <div class="modal-body">
    <div class="row">
    <div class="col-md-6">
    <div class="form-group">
    <label for="edit_input_company" class="col-md-6 control-label">{{entity + 'Company Name'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Exp_form.input_company.$invalid && editexpsubmitted}">
    <input type="text" maxlength="255" class="form-control" id="edit_input_company" name="input_company" required ng-model="editexp.company"/>
    <div class="error,help-block" ng-show="edit_Exp_form.input_company.$invalid && editexpsubmitted">
    <span class="help-block" ng-show="edit_Exp_form.input_company.$error.required">{{entity + ' Previous company not entered'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    <div class="col-md-6">
    <div class="form-group">
    <div class="col-md-8" ng-class="{'has-error': edit_Exp_form.input_empDeg.$invalid && editexpsubmitted}">
    <select class="form-control" id="input_empDeg" name="input_empDeg" ng-model="editexp.designation" required ng-options="dep.value as (dep.shortcutCode +'-' +dep.label) for dep in expDepList">
    <option value="">{{ entity + ' Select or add designation ' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_Exp_form.input_empDeg.$invalid && editexpsubmitted">
    <span class="help-block" ng-show="edit_Exp_form.input_empDeg.$error.required">{{entity + 'Previous desgination not entered'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="row">
    <div class="col-md-12">
    <div class="form-group">
    <label for="edit_input_started_from" class="col-md-3 control-label">{{entity + 'Work Duration'|translate}}</label>
    <div class="col-md-9">
    <div class="row">
    <div class="col-md-5" ng-class="{'has-error': edit_Exp_form.input_started_from.$invalid && editexpsubmitted}">
    <span class="input-group">
    <input type="text" max="editexp.workedTill?startEditExperienceRange:today" min="employee.dob" id="edit_input_started_from" name="input_started_from"  placeholder="{{format}}" class="form-control" datepicker-popup="{{format}}" required ng-model="editexp.startedFrom" is-open="opened_started_from1" ng-required="true" close-text="Close" ng-change="setMonthsWorkedFor(); setEditWorkExperienceEndDate(editexp.startedFrom)"/>
    <span class="input-group-btn">
    <button class="btn btn-default" ng-click="open($event); opened_started_from1 = true;"><i class="glyphicon glyphicon-calendar"></i></button>
    </span>
    </span> 
    <div class="error,help-block" ng-show="edit_Exp_form.input_started_from.$invalid && editexpsubmitted">
    <span class="help-block" ng-show="edit_Exp_form.input_started_from.$error.required && !(edit_Exp_form.input_started_from.$error.date || edit_Exp_form.input_started_from.$error.min || edit_Exp_form.input_started_from.$error.max)">
    {{ entity + "Start date not selected" | translate }}</span>
    <span class="help-block" ng-show="edit_Exp_form.input_started_from.$error.date">{{ entity + "Invalid date format" | translate }}</span>
    <span class="help-block" ng-show="edit_Exp_form.input_started_from.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
    <span class="help-block" ng-show="edit_Exp_form.input_started_from.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
    </div>
    </div>
    <div class="col-md-1">
    <div class="text-center">to</div>
    </div>
    <div class="col-md-5" ng-class="{'has-error': edit_Exp_form.input_worked_till.$invalid && editexpsubmitted}">
    <span class="input-group">
    <input type="text" max="today" min="editexp.startedFrom?endEditExperienceInitrange:employee.dob" id="input_worked_till" name="input_worked_till" class="form-control" placeholder="{{format}}" datepicker-popup="{{format}}" required ng-model="editexp.workedTill" is-open="opened_worked_till1" ng-required="true" close-text="Close" ng-change="setMonthsWorkedFor(); setEditWorkExperienceStartDate(editexp.workedTill)"/>
    <span class="input-group-btn">
    <button class="btn btn-default" ng-click="open($event); opened_worked_till1 = true;"><i class="glyphicon glyphicon-calendar"></i></button>
    </span>
    </span>  
    <div class="error,help-block" ng-show="edit_Exp_form.input_worked_till.$invalid && editexpsubmitted">
    <span class="help-block" ng-show="edit_Exp_form.input_worked_till.$error.required && !(edit_Exp_form.input_worked_till.$error.date || edit_Exp_form.input_worked_till.$error.min || edit_Exp_form.input_worked_till.$error.max)">
    {{ entity + "End date not selected" | translate }}</span>
    <span class="help-block" ng-show="edit_Exp_form.input_worked_till.$error.date">{{ entity + "Invalid date format" | translate }}</span>
    <span class="help-block" ng-show="edit_Exp_form.input_worked_till.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
    <span class="help-block" ng-show="edit_Exp_form.input_worked_till.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="row">
    <div class="col-md-12">
    <div class="form-group">
    <label for="edit_input_Annual_Salary" class="col-md-3 control-label">{{entity + 'Annual Salary'|translate}}</label>
    <div class="col-md-3" ng-class="{'has-error': edit_Exp_form.input_Annual_Salary.$invalid && editexpsubmitted}">
    <div class="input-group">
    <input type="text" class="form-control" numbers-only="numbers-only" id="edit_input_Annual_Salary" name="input_Annual_Salary" required ng-model="editexp.salary"/>
    <span class="input-group-addon">{{entity + 'INR'|translate}}</span>
    </div>
    <div class="error,help-block" ng-show="edit_Exp_form.input_Annual_Salary.$invalid && editexpsubmitted">
    <span class="help-block" ng-show="edit_Exp_form.input_Annual_Salary.$error.required">{{entity + 'Annual salary of previous employment not entered'|translate}}</span>
    </div>
    </div>



    </div>
    </div>
    </div>

    <div class="row">
    <div class="col-md-12">
    <div class="form-group">
    <label for="file_uplodDocs" class="col-md-3 control-label">{{entity + 'Upload Salary Slip'|translate}}</label>

    <!--<div class="col-md-6">-->
    <div flow-init="uploadFile" flow-file-added="salaryslipFileAdded($file, $flow)" flow-file-success="salaryslipFileUploaded($file,$flow,addEventForm,$message,true)"  flow-files-submitted="$flow.upload()">

    <div name='salaryslipImage'>
    <div class='row'>
    <div class='col-md-6'>
    <button class="btn btn-hkg" flow-btn>{{entity + 'Choose File'|translate}}</button>                        
    </div>
    </div>

    </div>
    </div>
    <!--</div>-->
    </div>
    </div>
    </div>
    <div class='row'>
    <div class='col-md-3'></div>
    <div id="wordRap" class='col-md-8'>
    <ul class="list-group">    
    <li class="list-group-item" ng-if="editexp.salaryslipImageName.length > 0">
    <a ng-href='{{appendAuthToken(apipath + "employee/download?filename="+editexp.salaryslipImageName)}}'>{{editexp.salaryslipImageName.substring(editexp.salaryslipImageName.indexOf('~~') + 1, editexp.salaryslipImageName.length)}}</a>
    <span class="glyphicon glyphicon-remove pull-right" ng-click="$flow.files.splice($index, 1);
    salaryslipRemoveEdit();"></span>
    </li>
    <li class="list-group-item" ng-show="salaryslipImg.invalidFileFlag">
    <span class="text-danger"> {{salaryslipImg.fileName}} {{entity + 'is not valid file'| translate}} </span>
    <span class="glyphicon glyphicon-remove pull-right" ng-click="salaryslipImg.invalidFileFlag = false"></span>
    </li>
    <li class="list-group-item" ng-show="salaryslipImg.invalidFileSizeFlag">
    <span class="text-danger"> {{entity + 'File size too large'| translate}} </span>
    <span class="glyphicon glyphicon-remove pull-right" ng-click="salaryslipImg.invalidFileSizeFlag = false"></span>
    </li>
    </ul>
    </div>
    </div>



    <div class="row">
    <div class="col-md-12">
    <div class="form-group">
    <label for="edit_input_reason_leaving" class="col-md-3 control-label">{{entity + 'Reason Of Leaving'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Exp_form.input_reason_leaving.$invalid && editexpsubmitted}">
    <textarea class="form-control" id="edit_input_reason_leaving" name="input_reason_leaving" ng-model="editexp.reasonOfLeaving" required></textarea>
    <div class="error,help-block" ng-show="edit_Exp_form.input_reason_leaving.$invalid && editexpsubmitted">
    <span class="help-block" ng-show="edit_Exp_form.input_reason_leaving.$error.required">{{entity + 'Reason for leaving previous employment  not entered'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div ng-if="isCreate">
    <dynamic-form  input-css ="col-md-4" label-css="col-md-3 control-label" db-map="editexperiencedbType" 
    internationalization-label="{{i18DynamicForm}}" form-name="form2" template="editexperienceTemplate" 
    ng-model="editexperienceData" ng-if="editexperienceTemplate" submit-flag-name="editexpsubmitted" edit-flag="{{!isCreate}}">
    </dynamic-form>  </div>
    <div ng-if="!isCreate">
    <dynamic-form  input-css ="col-md-4" label-css="col-md-3 control-label" db-map="editexperiencedbType" 
    internationalization-label="{{i18DynamicForm}}" form-name="form2" template="editexperienceTemplate" 
    ng-model="editexperienceData" ng-if="editexperienceTemplate" submit-flag-name="editexpsubmitted" edit-flag="{{!isCreate}}">
    </dynamic-form>  </div>

    </div>
    <div class="modal-footer" >
    <a ng-click="hideExpViewAll()">Cancel</a>&nbsp;
    <button type="button" class="btn btn-hkg" ng-click="saveEditExpChanges(edit_Exp_form)"> {{entity + 'Save Changes'| translate }}</button>
    </div>
    </form>
    </div>
</script>
<!--Experience detail modal ends-->
<!--Family detail modal-->
<script type="text/ng-template" id="familyViewAllTmpl.html">
    <div class="modal-content" >
    <div class="modal-header">
    <button type="button" class="close" ng-click="closeViewAllFamily()" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewAllFamilyModalLabel"> {{entity + 'View All'| translate }}</h4>
    </div>
    <div class="modal-body">
    <div class="table-responsive">
    <table class="table table-striped table-responsive" cellspacing="0" width="100%" ag-data-table="viewAllFamily">
    <thead ng-show="viewAllFamily.length > 0">
    <tr>
    <th> {{entity + 'Name'| translate}} </th>
    <th> {{ entity + ' Relation ' | translate}}</th>
    <th>{{ entity + ' DOB ' | translate}}</th>
    <th>{{ entity + ' Occupation' | translate}}</th>
    <th style="white-space: nowrap;">{{ entity + ' Blood Group' | translate}}</th>
    <th>{{ entity + ' Contact' | translate}}</th>
    <th><span ng-hide="isEmployeeRelieved" >{{ entity + ' Action' | translate}}</span> </th>
    </tr>
    </thead>
    <tbody ng-show="viewAllFamily.length > 0">
    <tr  ng-repeat="Familydetail in viewAllFamily" >
    <td class="wordRap">{{Familydetail.firstName}}</td>
    <td class="wordRap">{{Familydetail.relationname}}</td>
    <td>{{Familydetail.dateOfBirth|date:dateFormat}}</td>
    <td class="wordRap">{{Familydetail.occupationname}}</td>
    <td>{{Familydetail.bloodGroupname}}</td>                            
    <td class="wordRap">{{Familydetail.mobileNumber}}</td>
    <td>
    <a ng-hide="isEmployeeRelieved"  ng-click="openEditFamilyModal(Familydetail)"><i class="glyphicon glyphicon-edit" title="Edit"></i></a>
    <a ng-hide="isEmployeeRelieved"  ng-click="removeFamily(Familydetail, $index)"><i class="text-danger glyphicon glyphicon-remove" title="Remove"></i></a>
    </td>
    </tr>
    </tbody>
    </table> 
    </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="editFamilyTmpl.html">
    <div class="modal-content" >
    <form class="form-horizontal" role="form" name="edit_Family_form" novalidate>
    <div class="modal-header">
    <button type="button" ng-click="hideFamilyViewAll()" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewAllFamilyModalLabel"> {{entity + 'Edit Family Detail'| translate }}</h4>
    </div>
    <div class="modal-body">
    <div class="row">
    <div class="col-md-7">
    <div class="form-group">
    <label for="edit_input_member_fname" class="col-md-6 control-label">{{entity + 'Member Name'|translate}}</label>
    <div class="col-md-6"  ng-class="{'has-error': (edit_Family_form.input_member_fname.$dirty || editfamilysubmitted) && (edit_Family_form.input_member_fname.$invalid || !iseditfamilyNameDuplicate) }">
    <input type="text" class="form-control" maxlength="255" id="edit_input_member_fname" name="input_member_fname" placeholder="Firstname middlename lastname" ng-model="editfamily.firstName" required/>
    <div class="error,help-block" ng-show="(edit_Family_form.input_member_fname.$dirty || editfamilysubmitted) && (edit_Family_form.input_member_fname.$invalid || !iseditfamilyNameDuplicate)">
    <span class="help-block" ng-show="edit_Family_form.input_member_fname.$error.required">{{entity + 'Family member name not entered'|translate}}</span>
    <span class="help-block" ng-show="!iseditfamilyNameDuplicate || !edit_Family_form.input_member_fname.$error.required">{{ entity + "Member already exist" | translate }}</span>
    </div>
    </div>
    </div>
    <div class="form-group">
    <label for="edit_input_family_mem_dob" class="col-md-6 control-label">{{entity + 'DOB'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Family_form.input_family_mem_dob.$invalid && editfamilysubmitted}">
    <span class="input-group">
    <input type="text" id="edit_input_family_mem_dob" max=today name="input_family_mem_dob" placeholder="{{format}}" class="form-control" datepicker-popup="{{format}}" ng-model="editfamily.dateOfBirth" is-open="opened_family_mem_dob1"  required close-text="Close" />
    <span class="input-group-btn">
    <button class="btn btn-default" ng-click="open($event); opened_family_mem_dob1 = true;"><i class="glyphicon glyphicon-calendar"></i></button>
    </span>
    </span>
    <div class="error,help-block" ng-show="edit_Family_form.input_family_mem_dob.$invalid && editfamilysubmitted">
    <span class="help-block" ng-show="edit_Family_form.input_family_mem_dob.$error.required && !(edit_Family_form.input_family_mem_dob.$error.date || edit_Family_form.input_family_mem_dob.$error.min || edit_Family_form.input_family_mem_dob.$error.max)">
    {{ entity + "Date of birth of member not entered" | translate }}</span>
    <span class="help-block" ng-show="edit_Family_form.input_family_mem_dob.$error.date">{{ entity + "Invalid date format" | translate }}</span>
    <span class="help-block" ng-show="edit_Family_form.input_family_mem_dob.$error.min">{{ entity + "Violates minimum constraint" | translate }}</span>
    <span class="help-block" ng-show="edit_Family_form.input_family_mem_dob.$error.max">{{ entity + "Violates maximum constraint" | translate }}</span>
    </div>
    </div>
    </div>
    <div class="form-group">
    <label for="edit_select_occupation" class="col-md-6 control-label">{{entity + 'Other Details'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Family_form.select_occupation.$invalid && editfamilysubmitted}">
    <select id="edit_select_occupation" name="select_occupation" class="form-control" ng-model="editfamily.occupation" ng-options="occupation.value as  (occupation.shortcutCode+'-'+occupation.label) for occupation in occupationList"  required>
    <option value=""> {{ entity + 'Select occupation' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_Family_form.select_occupation.$invalid && editfamilysubmitted">
    <span class="help-block" ng-show="edit_Family_form.select_occupation.$error.required">{{entity + 'Occupation of member not entered'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    <div class="col-md-3">
    <div class="form-group">
    <div class="col-md-12" ng-class="{'has-error': edit_Family_form.select_relation.$invalid && editfamilysubmitted}">
    <select id="select_relation" name="select_relation" class="form-control" ng-model="editfamily.relation" ng-options="relation.value as (relation.shortcutCode +'-'+relation.label) for relation in relationList"  required>
    <option value="">{{ entity + 'Relation with employee' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_Family_form.select_relation.$invalid && editfamilysubmitted">
    <span class="help-block" ng-show="edit_Family_form.select_relation.$error.required">{{entity + 'Relation with member not selected'|translate}}</span>
    </div>
    </div>
    </div>
    <div class="form-group">
    <div class="col-md-12 form-group">
    &nbsp;
    </div>
    </div>
    <div class="form-group">
    <div class="col-md-12" ng-class="{'has-error': edit_Family_form.select_member_bld_grp.$invalid && editfamilysubmitted}">
    <select id="select_member_bld_grp" name="select_member_bld_grp" class="form-control" ng-model="editfamily.bloodGroup" ng-options="bloodGroup.value as (bloodGroup.shortcutCode+'-'+bloodGroup.label) for bloodGroup in bloodGroups"  required>
    <option value="">{{ entity + 'Blood group' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_Family_form.select_member_bld_grp.$invalid && editfamilysubmitted">
    <span class="help-block" ng-show="edit_Family_form.select_member_bld_grp.$error.required">{{entity + ' Blood group of member not entered'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="row">
    <div class="col-md-7">
    <div class="form-group">
    <label for="edit_input_family_mem_contact" class="col-md-6 control-label">{{entity + 'Contact'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Family_form.input_family_mem_contact.$invalid}">
    <input type="text" maxlength="10" numbers-only="numbers-only" class="form-control" id="edit_input_family_mem_contact" name="input_family_mem_contact" ng-model="editfamily.mobileNumber" ng-pattern="/^[0-9]{10}$/"/>
    <span class="help-block" ng-show="edit_Family_form.input_family_mem_contact.$error.pattern">{{entity + 'Enter valid contact'|translate}}</span>
    </div>
    </div>
    </div>
    <!--                    </div>-->
    <div class="col-md-5">
    <div class=" form-group">
    <div flow-init="uploadFile" flow-file-added="familyFileAdded($file, $flow)" flow-file-success="familyFileUploaded($file,$flow,addEventForm,$message,true)" flow-files-submitted="$flow.upload()">

    <div class="col-md-12" name='familyImage'>
    <div class='row'>
    <div class='col-md-4'>
    <div ng-if="editfamily.familyImageName == null || editfamily.familyImageName.length === 0">
    <img ng-src="{{retrieveAvatar()}}" height="130" width="130"/>
    </div>
    <div ng-if="editfamily.familyImageName != null && editfamily.familyImageName.length > 0">
    <img ng-src="{{getProfileImageContact(familyIndex, true, true)}}" id='templateModal1' height="130" width="130" ng-click="getProfileImageContact(familyIndex, true, false)"/>
    <span class="glyphicon glyphicon-remove text-danger" style="vertical-align: top;cursor: pointer;" ng-click="$flow.files.splice($index, 1);
    familyFileRemoveEdit()"></span>
    </div>
    </div>
    <div class='col-md-1'>
    <span title="Upload from drive" class="glyphicon glyphicon-folder-open text-info" style="font-size: 18px;cursor: pointer;" flow-btn></span><!--{{entity + 'Click To Add Picture'|translate}} -->                        
    <camera style="display:inline;" model-name="Franchise" model-value="editfamily.familyImageName" feature-name="USER" field-type="PROFILE" is-custom="false" is-thumbnail="true" unique-id="familyPicEdit"></camera>
    </div>
    </div>
    //    <div class='row'>
    //    <div class='col-md-12'>
    //    <div class="text-right" style="width: 130px;">
    //    <span title="Upload from drive" class="glyphicon glyphicon-folder-open text-info" style="font-size: 18px;cursor: pointer;" flow-btn></span><!--{{entity + 'Click To Add Picture'|translate}} -->                        
    //    <camera style="display:inline;" model-name="Franchise" model-value="editfamily.familyImageName" feature-name="USER" field-type="PROFILE" is-custom="false" is-thumbnail="true" unique-id="familyPicEdit"></camera>
    //    </div>
    //    </div>
    //    </div>
    <div>
    <ul class="list-group" style="margin-bottom: 0px;">    
    <li class="list-group-item" ng-if="familyImg.invalidFileFlag">
    <span class="text-danger"> {{familyImg.fileName}} {{entity + 'not image file'| translate}} </span>
    <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="familyImg.invalidFileFlag = false"></span>
    </li>
    <li class="list-group-item" ng-if="familyImg.invalidFileSizeFlag">
    <span class="text-danger"> {{entity + 'File size too large'| translate}} </span>
    <span class="glyphicon glyphicon-remove pull-right text-danger" ng-click="familyImg.invalidFileSizeFlag = false"></span>
    </li>
    </ul>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div ng-if="isCreate">
    <dynamic-form  input-css ="col-md-4" label-css="col-md-3 control-label" db-map="editfamilydbType" 
    internationalization-label="{{i18DynamicForm}}" form-name="form2" template="editfamilyTemplate" 
    ng-model="editfamilyData" ng-if="editfamilyTemplate"  submit-flag-name="editfamilysubmitted" edit-flag="{{!isCreate}}">
    </dynamic-form> </div> 
    <div ng-if="!isCreate">
    <dynamic-form  input-css ="col-md-4" label-css="col-md-3 control-label" db-map="editfamilydbType" 
    internationalization-label="{{i18DynamicForm}}" form-name="form2" template="editfamilyTemplate" 
    ng-model="editfamilyData" ng-if="editfamilyTemplate"  submit-flag-name="editfamilysubmitted" edit-flag="{{!isCreate}}">
    </dynamic-form> </div> 

    <div class="modal-footer" >
    <a ng-click="hideFamilyViewAll()">{{ entity + 'Cancel' | translate}}</a>&nbsp;
    <button type="button" class="btn btn-hkg" ng-click="saveEditFamilyChanges(edit_Family_form)"> {{entity + 'Save Changes'| translate }}</button>
    </div>
    </form>
    </div>
</script>
<!--Family detail modal ends-->

<!--Policy detail modal-->
<script type="text/ng-template" id="policyViewAllTmpl.html">
    <div class="modal-content" >
    <div class="modal-header">
    <button type="button" class="close" ng-click="closeViewAllPolicy()" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewAllPolicyModalLabel"> {{entity + 'View All'| translate }}</h4>
    </div>
    <div class="modal-body">
    <div class="table-responsive">
    <table class="table table-striped table-responsive" cellspacing="0" width="100%" ag-data-table="viewAllPolicy">
    <thead ng-show="viewAllPolicy.length > 0">
    <tr>
    <th style=" white-space: nowrap;"> {{ entity + 'Policy Holder' | translate }}</th>
    <th style=" white-space: nowrap;">{{ entity + 'Policy Company ' | translate }}</th>
    <th style=" white-space: nowrap;">{{ entity + 'Status' | translate }}</th>
    <th style=" white-space: nowrap;">{{ entity + 'Policy Number' | translate }}</th>
    <th style=" white-space: nowrap;">{{ entity + 'Policy Name' | translate }}</th>
    <th><span ng-hide="isEmployeeRelieved" >{{ entity + 'Action' | translate }}</span></th>
    </tr>
    </thead>
    <tbody ng-show="viewAllPolicy.length > 0">
    <tr ng-repeat="Policydetail in viewAllPolicy" >
    <td class="wordRap">{{Policydetail.holdername}}</td>
    <td class="wordRap">{{Policydetail.companyname}}</td>
    <td class="wordRap">{{Policydetail.status}}</td>
    <td class="wordRap">{{Policydetail.policyNumber}}</td>
    <td class="wordRap">{{Policydetail.policyName}}</td>                            
    <td>
    <a ng-hide="isEmployeeRelieved"  ng-click="openEditPolicyModal(Policydetail)"><i class="glyphicon glyphicon-edit" title="Edit"></i></a>
    <a ng-hide="isEmployeeRelieved"  ng-click="removePolicy(Policydetail)"><i class="text-danger glyphicon glyphicon-remove" title="Delete"></i></a>
    </td>
    </tr>
    </tbody>
    </table> 
    </div>
    </div>
    </div>
</script>
<script type="text/ng-template" id="editPolicyTmpl.html">
    <div class="modal-content" >
    <form class="form-horizontal" role="form" name="edit_Policy_form" novalidate>
    <div class="modal-header">
    <button type="button" ng-click="hidePolicyViewAll()" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewAllPolicyModalLabel"> {{entity + 'Edit Policy Detail'| translate }}</h4>
    </div>
    <div class="modal-body">
    <div class="row">
    <div class="col-md-6">
    <div class="form-group">
    <label for="edit_select_policy_holder" class="col-md-6 control-label">{{entity + 'Policy Holder'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Policy_form.select_policy_holder.$invalid && editpolicysubmitted}">
    <select id="edit_select_policy_holder" name="select_policy_holder" class="form-control" required ng-model="editpolicy.contactUser" ng-options="policyHolderId as policyHolderVal for (policyHolderId,policyHolderVal) in policyHoldersMap">
    <option value="">{{ entity + 'Select member' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_Policy_form.select_policy_holder.$invalid && editpolicysubmitted">
    <span class="help-block" ng-show="edit_Policy_form.select_policy_holder.$error.required">{{entity + 'Select policy holder'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="row">
    <div class="col-md-6">
    <div class="form-group">
    <label for="edit_input_emppolicycompany" class="col-md-6 control-label">{{entity + 'Company'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Policy_form.input_emppolicycompany.$invalid && editpolicysubmitted}">
    <select class="form-control" id="edit_input_emppolicycompany" name="input_emppolicycompany" required ng-model="editpolicy.company" ng-options="policyCompany.value as (policyCompany.shortcutCode+'-'+policyCompany.label) for policyCompany in policyCompanyList">
    <option value="">{{ entity + 'Select policy company ' | translate}}</option>
    </select>
    <div class="error,help-block" ng-show="edit_Policy_form.input_emppolicycompany.$invalid && editpolicysubmitted">
    <span class="help-block" ng-show="edit_Policy_form.input_emppolicycompany.$error.required">{{entity + 'Select policy company'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    <div class="col-md-6">
    <div class="form-group">
    <label for="edit_select_policy_status" class="col-md-4 control-label">{{entity + 'Policy Status'|translate}}</label>
    <div class="col-md-6">
    <select ng-model="editpolicy.status" id="edit_select_policy_status" name="select_policy_status" class="form-control">
    <option value="Active">{{entity + 'Active'|translate}}</option>
    <option value="Inactive">{{entity + 'Inactive'|translate}}</option>
    </select>
    </div>
    </div>
    </div>
    </div>
    <div class="row">
    <div class="col-md-6">
    <div class="form-group">
    <label for="edit_input_policy_num" class="col-md-6 control-label">{{entity + 'Policy Number'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Policy_form.input_policy_num.$invalid && editpolicysubmitted}">
    <input type="text" class="form-control" id="edit_input_policy_num" name="input_policy_num" required ng-model="editpolicy.policyNumber"/>
    <div class="error,help-block" ng-show="edit_Policy_form.input_policy_num.$invalid && editpolicysubmitted">
    <span class="help-block" ng-show="edit_Policy_form.input_policy_num.$error.required">{{entity + 'Enter policy number'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    <div class="col-md-6">
    <div class="form-group">
    <label for="edit_input_policy_name" class="col-md-4 control-label">{{entity + 'Policy Name'|translate}}</label>
    <div class="col-md-6" ng-class="{'has-error': edit_Policy_form.input_policy_name.$invalid && editpolicysubmitted}">
    <input type="text"  maxlength="25" class="form-control" id="edit_input_policy_name" name="input_policy_name" required ng-model="editpolicy.policyName" />
    <div class="error,help-block" ng-show="edit_Policy_form.input_policy_name.$invalid && editpolicysubmitted">
    <span class="help-block" ng-show="edit_Policy_form.input_policy_name.$error.required">{{entity + 'Enter policy name'|translate}}</span>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div ng-if="isCreate">
    <dynamic-form  input-css ="col-md-4" label-css="col-md-3 control-label" db-map="editpolicydbType" 
    internationalization-label="{{i18DynamicForm}}" form-name="form2" template="editpolicyTemplate" 
    ng-model="editpolicyData" ng-if="editpolicyTemplate" submit-flag-name="editpolicysubmitted" edit-flag="{{!isCreate}}">
    </dynamic-form> </div> 
    <div ng-if="!isCreate">
    <dynamic-form  input-css ="col-md-4" label-css="col-md-3 control-label" db-map="editpolicydbType" 
    internationalization-label="{{i18DynamicForm}}" form-name="form2" template="editpolicyTemplate" 
    ng-model="editpolicyData" ng-if="editpolicyTemplate" submit-flag-name="editpolicysubmitted" edit-flag="{{!isCreate}}">
    </dynamic-form> </div> 
    </div>
    <div class="modal-footer" >
    <a ng-click="hidePolicyViewAll()">{{ entity + 'Cancel'| translate}}</a>&nbsp;
    <button  type="button" class="btn btn-hkg" ng-click="saveEditPolicyChanges(edit_Policy_form)"> {{entity + 'Save Changes'| translate }}</button>
    </div>
    </form>
    </div>
</script>
<!--Policy detail modal ends-->

<!--Terminate Employee modal-->
<script type="text/ng-template" id="terminateEmpTmpl.html">
    <div class="modal-content" >
    <form class="form-horizontal" role="form" name="terminate_employee_modal" novalidate>
    <div class="modal-header">
    <button type="button" ng-click="cancelproceed();" class="close" ng-click="cancelproceed()" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="terminateEmployeeModalLabel"> {{entity + 'Terminate Employee'| translate }}</h4>
    </div>
    <div class="modal-body">
    {{ entity + " You have marked \{\{empName\}\}" | translate:{empName:(empName | translate)} }}

    {{ entity + "- \{\{empId\}\}" | translate:{empId:(empId | translate)} }}
    {{entity + ' for employment termination .Are you sure you want to continue ?'| translate }}
    </div>
    <div class="modal-footer">
    <a ng-click="cancelproceed();">{{i18EntityMessaging + 'Cancel'| translate }}</a>
    <button type="button" class="btn btn-hkg" ng-click="proceed(add_employee_form)"> {{entity + 'Proceed'| translate }}</button>

    </div>
    </form>
    </div>
</script>
<!--Terminate Employee ends-->
<!--View all docs-->
<script type="text/ng-template" id="docsViewAllTmpl.html">
    <div class="modal-content" >
    <form class="form-horizontal" role="form" name="terminate_employee_modal" novalidate>
    <div class="modal-header">
    <button type="button" ng-click="hidedocsViewAll()" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="viewdocsModalLabel"> {{entity + 'View all'| translate }}</h4>
    </div>
    <div class="modal-body">
    <table class="table table-striped table-responsive" cellspacing="0" width="100%" ag-data-table="employee.otherdocs">
    <thead ng-show="hasAnyDoc">
    <tr>
    <th>{{ entity + 'Doc Name' | translate}}</th>
    <th>{{ entity + 'Date' | translate}}</th>
    <th>{{ entity + 'Action' | translate}}</th>
    </tr>
    </thead>
    <tbody ng-show="hasAnyDoc">
    <tr id="wordRap" ng-repeat="doc in employee.otherdocs track by $index" ng-show="doc !== null" >
    <td>{{doc.substring(doc.indexOf('~~') + 1, doc.length)}}</td>
    <td>{{employee.otherdocsDate[$index]| date:dateFormatWithTime}} </td>
    <td>
    <a ng-click="otherdocRemove($index)">Remove</a>
    </td>
    </tr>
    </tbody>
    </table> 
    </div>
    <div class="modal-footer">
    </div>
    </form>
    </div>
</script>
<!--View all docs ends-->
<!--Change password popup-->
<script type="text/ng-template" id="changePasswordTmpl.html">
    <div class="modal-content" >
    <form class="form-horizontal" role="form" name="change_password" novalidate>
    <div class="modal-header">
    <button type="button" ng-click="resetPassword();" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="changePasswordModalLabel"> {{entity + 'Change Password'| translate }}</h4>
    </div>
    <div class="modal-body">
    <div class="form-group">
    <label for="userid" class="col-md-2 control-label"> {{entity + 'UserId'| translate }}</label>
    <div class="col-md-4" ng-class="{'has-error': change_password.userid.$invalid || passwordObj.notUniqueUserId}">
    <div>
    <input type="text" class="form-control lowercase" maxlength="50" id="userid" name="userid" ng-model="userid" required ng-blur="doesUserIdExist(userid)" ng-disabled="true">

    </div>
    <div class="error,help-block" ng-show="((change_password.userid.$dirty || passwordObj.passsubmitted) && change_password.userid.$invalid) || passwordObj.notUniqueUserId">
    <span class="help-block" ng-show="change_password.userid.$error.required">{{ entity + "UserId not entered" | translate }}</span>
    <span class="help-block" ng-show="passwordObj.notUniqueUserId">{{ entity + "UserId already exisits" | translate }}</span>
    </div>
    </div>
    </div>  
    <div class="form-group">
    <label for="Password" class="col-md-2 control-label"> {{entity + 'New Password'| translate }}</label>
    <div class="col-md-4" ng-class="{'has-error': change_password.Password.$invalid}">
    <div>
    <input type="password" class="form-control" ng-minlength="8" maxlength="50" id="Password" name="Password" ng-change="confirmPasswordValidation();"   ng-model="passwordObj.password" required>
    </div>
    <div class="error,help-block" ng-show="(change_password.Password.$dirty || passwordObj.passsubmitted) && change_password.Password.$invalid">
    <span class="help-block" ng-show="change_password.Password.$error.required">{{ entity + "Password not entered" | translate }}</span>
    <span class="help-block" ng-show="change_password.Password.$error.minlength">{{ entity + "Password must be atleast 8 characters" | translate }}</span>  
    </div>
    </div>
    </div>  
    <div class="form-group">
    <label for="adminRetypePwd" class="col-md-2 control-label"> {{entity + 'Confirm Password'| translate }}</label>
    <div class="col-md-4" ng-class="{'has-error': change_password.adminRetypePwd.$invalid || passwordObj.isMatched}">
    <div>
    <input type="password" class="form-control"  maxlength="50" id="adminRetypePwd"  ng-model="passwordObj.confirmpassword"  ng-change="confirmPasswordValidation()"  name="adminRetypePwd" required>
    </div>
    <div class="error,help-block" ng-show="(change_password.adminRetypePwd.$dirty || passwordObj.passsubmitted) && (change_password.adminRetypePwd.$invalid || passwordObj.isMatched)">
    <span class="help-block" ng-show="change_password.adminRetypePwd.$error.required">{{ entity + "Confirmation password not entered" | translate }}</span>                                                                        
    <span class="help-block"ng-show="!change_password.adminRetypePwd.$error.required && passwordObj.isMatched">{{ entity + "Password mismatch, please try again" | translate }}</span>
    </div>
    </div>
    </div> 
    </div>
    <div class="modal-footer">
    <a ng-click="resetPassword();"> {{ entity + 'Cancel' | translate}}</a>&nbsp;
    <button class="btn btn-hkg" ng-click="changePassword(change_password)">{{ entity + 'Submit' | translate}}</button>
    </div>
    </form>
    </div>
</script>
<!---Change password popup ends-->
<!--Profile image popup-->
<div class="modal fade" role="dialog" id="profileImagePopup" tabindex="-1" aria-hidden="true" >
    <div class="modal-dialog">
        <img ng-src="{{appendAuthToken(apipath + 'employee/getimage?file_name=' + selectedProfileImageName)}}" height="400px" width="560px" ng-if="selectedProfileImageName !== undefined"/>
    </div>
</div>
<!--Family image popup-->
<div class="modal fade" role="dialog" id="familyImagePopup" tabindex="-1" aria-hidden="true" >
    <div class="modal-dialog">
        <img ng-src="{{appendAuthToken(apipath + 'employee/getimage?file_name=' + selectedFamilyImageName)}}" height="400px" width="560px" ng-if="selectedFamilyImageName !== undefined"/>
    </div>
</div>